"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[67414],{28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var l=i(96540);const t={},r=l.createContext(t);function o(e){const n=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),l.createElement(r.Provider,{value:n},e.children)}},37567:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>s,contentTitle:()=>c,default:()=>d,frontMatter:()=>a,metadata:()=>l,toc:()=>p});const l=JSON.parse('{"id":"lang/cpp/libraries/opencl/opencl-with-mali-gpu","title":"OpenCL with Mali GPU","description":"OpenCL with Mali GPU","source":"@site/docs/lang/cpp/libraries/opencl/opencl-with-mali-gpu.mdx","sourceDirName":"lang/cpp/libraries/opencl","slug":"/lang/cpp/libraries/opencl/opencl-with-mali-gpu","permalink":"/docs/lang/cpp/libraries/opencl/opencl-with-mali-gpu","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/lang/cpp/libraries/opencl/opencl-with-mali-gpu.mdx","tags":[],"version":"current","lastUpdatedAt":1744387113000,"frontMatter":{"id":"opencl-with-mali-gpu","title":"OpenCL with Mali GPU","description":"OpenCL with Mali GPU","keywords":["C++","OpenCL","Mali"]},"sidebar":"cpp","previous":{"title":"Basics","permalink":"/docs/lang/cpp/libraries/opencl/opencl-basics"},"next":{"title":"Example","permalink":"/docs/lang/cpp/libraries/opencl/opencl-example"}}');var t=i(74848),r=i(28453),o=i(86025);const a={id:"opencl-with-mali-gpu",title:"OpenCL with Mali GPU",description:"OpenCL with Mali GPU",keywords:["C++","OpenCL","Mali"]},c=void 0,s={},p=[{value:"Mali memory model",id:"mali-memory-model",level:2},{value:"CL_MEM_ALLOC_HOST_PTR",id:"cl_mem_alloc_host_ptr",level:3},{value:"CL_MEM_USE_HOST_PTR",id:"cl_mem_use_host_ptr",level:3},{value:"malloc",id:"malloc",level:3}];function m(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Ref: ",(0,t.jsx)(n.a,{href:"https://developer.arm.com/solutions/graphics-and-gaming/resources/presentations/opencl-tutorials",children:"https://developer.arm.com/solutions/graphics-and-gaming/resources/presentations/opencl-tutorials"})]}),"\n",(0,t.jsxs)(n.admonition,{type:"danger",children:[(0,t.jsx)(n.p,{children:"Due to the difference in hardware structure, Desktop GPU and Mali GPU are different. Therefore, when using the Mali GPU, there are restrictions on the use of some functions."}),(0,t.jsx)(n.p,{children:"Read the ARM\xae Mali\u2122 GPU OpenCL Developer Guide, which can have a huge impact on performance."})]}),"\n",(0,t.jsx)(n.h2,{id:"mali-memory-model",children:"Mali memory model"}),"\n",(0,t.jsx)(n.p,{children:"Mali GPU uses global memory with cache, instead of using local or private memory. If local or private memory is allocated, it is difficult to expect performance improvement, because it is allocated to global memory. In addition, unnecessary data movement may occur, which can degrade performance."}),"\n",(0,t.jsx)(n.h3,{id:"cl_mem_alloc_host_ptr",children:"CL_MEM_ALLOC_HOST_PTR"}),"\n",(0,t.jsxs)(n.p,{children:["It is recommended to use ",(0,t.jsx)(n.code,{children:"clCreateBuffer(CL_MEM_ALLOC_HOST_PTR)"})," whenever possible."]}),"\n",(0,t.jsx)("center",{children:(0,t.jsx)("img",{src:(0,o.Ay)("img/lang/cpp/libraries/opencl/opencl-mali-alloc.png")})}),"\n",(0,t.jsx)(n.h3,{id:"cl_mem_use_host_ptr",children:"CL_MEM_USE_HOST_PTR"}),"\n",(0,t.jsxs)(n.p,{children:["It is better not to create a buffer using ",(0,t.jsx)(n.code,{children:"clCreateBuffer(CL_MEM_USE_HOST_PTR)"})," whenever possible."]}),"\n",(0,t.jsx)(n.p,{children:"Creating a buffer with HOST_PTR creates a buffer accessed by the host program and a buffer accessed by the GPU in global memory. The result is 'unnecessary copying'."}),"\n",(0,t.jsx)("center",{children:(0,t.jsx)("img",{src:(0,o.Ay)("img/lang/cpp/libraries/opencl/opencl-mali-host.png")})}),"\n",(0,t.jsx)(n.h3,{id:"malloc",children:"malloc"}),"\n",(0,t.jsx)(n.p,{children:"There is a global memory area that the host program can access, not the Mali GPU."}),"\n",(0,t.jsx)("center",{children:(0,t.jsx)("img",{src:(0,o.Ay)("img/lang/cpp/libraries/opencl/opencl-mali-malloc.png")})})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(m,{...e})}):m(e)}}}]);