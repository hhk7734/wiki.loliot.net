"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[78257],{28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>c});var s=i(96540);const d={},l=s.createContext(d);function r(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:r(e.components),s.createElement(l.Provider,{value:n},e.children)}},31242:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>o,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"mlops/device/infiniband/rdma-shared-device-plugin","title":"RDMA Shared Device Plugin","description":"RDMA Shared Device Plugin","source":"@site/docs/mlops/device/infiniband/rdma-shared-device-plugin.mdx","sourceDirName":"mlops/device/infiniband","slug":"/mlops/device/infiniband/rdma-shared-device-plugin","permalink":"/docs/mlops/device/infiniband/rdma-shared-device-plugin","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/device/infiniband/rdma-shared-device-plugin.mdx","tags":[],"version":"current","lastUpdatedAt":1744038011000,"frontMatter":{"id":"rdma-shared-device-plugin","title":"RDMA Shared Device Plugin","sidebar_label":"RDMA Shared Device Plugin","description":"RDMA Shared Device Plugin","keywords":["rdma","shared device plugin","cdi"]},"sidebar":"device","previous":{"title":"OFED","permalink":"/docs/mlops/device/infiniband/ofed"}}');var d=i(74848),l=i(28453);const r={id:"rdma-shared-device-plugin",title:"RDMA Shared Device Plugin",sidebar_label:"RDMA Shared Device Plugin",description:"RDMA Shared Device Plugin",keywords:["rdma","shared device plugin","cdi"]},c=void 0,t={},a=[{value:"RDMA Shared Device Plugin",id:"rdma-shared-device-plugin",level:2},{value:"Plugin \uc124\uc815",id:"plugin-\uc124\uc815",level:2},{value:"\uc7a5\uce58 \uc0ac\uc6a9\ud558\uae30",id:"\uc7a5\uce58-\uc0ac\uc6a9\ud558\uae30",level:2}];function h(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.h2,{id:"rdma-shared-device-plugin",children:"RDMA Shared Device Plugin"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://github.com/Mellanox/k8s-rdma-shared-dev-plugin",children:"https://github.com/Mellanox/k8s-rdma-shared-dev-plugin"})}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://github.com/hhk7734/helm-charts/tree/main/charts/rdma-shared-device-plugin",children:"https://github.com/hhk7734/helm-charts/tree/main/charts/rdma-shared-device-plugin"})}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["kubelet\uc5d0 \ub514\ubc14\uc774\uc2a4 \ub9ac\uc18c\uc2a4\uc758 \uc874\uc7ac\ub97c \uc54c\ub9ac\uace0, Host\uc758 RDMA \ub514\ubc14\uc774\uc2a4(Ex. ",(0,d.jsx)(n.code,{children:"/dev/infiniband/{issm,rdma_cm,umad,uverbs}"}),")\ub97c Pod\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d \ud558\ub294 \ud50c\ub7ec\uadf8\uc778\uc785\ub2c8\ub2e4."]}),"\n",(0,d.jsx)(n.h2,{id:"plugin-\uc124\uc815",children:"Plugin \uc124\uc815"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.a,{href:"https://github.com/Mellanox/k8s-rdma-shared-dev-plugin?tab=readme-ov-file#rdma-shared-device-plugin-configurations",children:"https://github.com/Mellanox/k8s-rdma-shared-dev-plugin?tab=readme-ov-file#rdma-shared-device-plugin-configurations"})}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-json",children:'{\n\t"periodicUpdateInterval": 300,\n\t"configList": [\n\t\t{\n\t\t\t"resourceName": "hca_shared_devices_a",\n\t\t\t"resourcePrefix": "example_prefix",\n\t\t\t"rdmaHcaMax": 1000,\n\t\t\t"devices": ["ib0", "ib1"]\n\t\t},\n\t\t{\n\t\t\t"resourceName": "hca_shared_devices_b",\n\t\t\t"rdmaHcaMax": 500,\n\t\t\t"selectors": {\n\t\t\t\t"vendors": ["15b3"],\n\t\t\t\t"deviceIDs": ["1017"],\n\t\t\t\t"ifNames": ["ib3", "ib4"]\n\t\t\t}\n\t\t}\n\t]\n}\n'})}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"periodicUpdateInterval"}),": \ud638\uc2a4\ud2b8 \uc7a5\uce58 \ubcc0\uacbd\uc0ac\ud56d \uc5c5\ub370\uc774\ud2b8 \uc8fc\uae30\uc785\ub2c8\ub2e4.","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"0\uc73c\ub85c \uc124\uc815\ud558\uba74 \uc5c5\ub370\uc774\ud2b8\uac00 \ube44\ud65c\uc131\ud654\ub429\ub2c8\ub2e4."}),"\n",(0,d.jsx)(n.li,{children:"\uc124\uc815\ud558\uc9c0 \uc54a\uc73c\uba74 \uae30\ubcf8\uac12\uc778 60 \ucd08\ub85c \uc124\uc815\ub429\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"configList"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"resourcePrifix"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Optional"}),"\n",(0,d.jsxs)(n.li,{children:["\uae30\ubcf8\uac12\uc73c\ub85c ",(0,d.jsx)(n.code,{children:"rdma"}),"\uac00 \uc0ac\uc6a9\ub429\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"resourceName"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"resourcePrifix"})," \ub0b4\uc5d0\uc11c \uc720\uc77c\ud55c \uc774\ub984\uc774\uc5b4\uc57c\ud569\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"rdmaHcaMax"}),": \ub514\ubc14\uc774\uc2a4\uc5d0 \uc758\ud574 \uc81c\uacf5\ub418\ub294 RDMA \ub9ac\uc18c\uc2a4\uc758 \ucd5c\ub300 \uac12\uc785\ub2c8\ub2e4."]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"selectors"}),": \ub514\ubc14\uc774\uc2a4\ub97c \uc120\ud0dd\ud558\ub294 \ub370 \uc0ac\uc6a9\ub418\ub294 \ud544\ud130\uc785\ub2c8\ub2e4.","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Optional"}),"\n",(0,d.jsx)(n.li,{children:"\uc120\uc5b8\ub418\uc9c0 \uc54a\uc740 \ud544\ub4dc\ub294 \ubb34\uc2dc\ub429\ub2c8\ub2e4."}),"\n",(0,d.jsx)(n.li,{children:'\uc120\uc5b8\ub41c \ud544\ub4dc\ub4e4\uc740 AND \uc870\uac74\uc73c\ub85c \uc0ac\uc6a9\ub418\uace0, \ud544\ub4dc\uc758 \uac12\ub4e4\uc740 OR \uc870\uac74\uc73c\ub85c \uc0ac\uc6a9\ub429\ub2c8\ub2e4. EX) vendor "15b3" && deviceID "1017" && (ifName "ib3" || ifName "ib4")'}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"vendors"}),": \ubca4\ub354\ub97c Hex \ucf54\ub4dc\ub85c \ud45c\ud604\ud55c \ubb38\uc790\uc5f4\uc785\ub2c8\ub2e4.","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"cat /sys/class/net/<ifName>/device/vendor"})}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"deviceIDs"}),": \ub514\ubc14\uc774\uc2a4 ID\ub97c Hex \ucf54\ub4dc\ub85c \ud45c\ud604\ud55c \ubb38\uc790\uc5f4\uc785\ub2c8\ub2e4.","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"cat /sys/class/net/<ifName>/device/device"})}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"drivers"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"readlink -f /sys/class/net/<ifName>/device/driver"})}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"ifNames"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"ls /sys/class/net/"})}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"linkTypes"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"ip link show dev <ifName>"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.code,{children:"devices"}),": ",(0,d.jsx)(n.code,{children:"selectors"}),"\uc5d0 ",(0,d.jsx)(n.code,{children:"ifNames"}),"\ub9cc \uc788\ub294 \uacbd\uc6b0\uc640 \ub3d9\uc77c\ud569\ub2c8\ub2e4.","\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"Optional"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h2,{id:"\uc7a5\uce58-\uc0ac\uc6a9\ud558\uae30",children:"\uc7a5\uce58 \uc0ac\uc6a9\ud558\uae30"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Pod\nspec:\n  containers:\n    - resources:\n        limits:\n          <resourcePrefix>/<resourceName>: "1"\n'})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"ls -l /dev/infiniband /sys/class/infiniband /sys/class/net\n"})})]})}function o(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(h,{...e})}):h(e)}}}]);