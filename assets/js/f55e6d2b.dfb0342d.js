"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[59884],{28453:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>i});var r=o(96540);const l={},t=r.createContext(l);function s(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),r.createElement(t.Provider,{value:n},e.children)}},91444:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>i,default:()=>d,frontMatter:()=>s,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"mlops/mlops/auth/oauth2-proxy/oauth2-proxy","title":"oauth2-proxy\ub85c \uac04\ub2e8\ud55c \uc778\uc99d \uc808\ucc28 \ucd94\uac00\ud558\uae30","description":"oauth2-proxy\ub85c \uac04\ub2e8\ud55c \uc778\uc99d \uc808\ucc28 \ucd94\uac00\ud558\uae30","source":"@site/docs/mlops/mlops/auth/oauth2-proxy/oauth2-proxy.mdx","sourceDirName":"mlops/mlops/auth/oauth2-proxy","slug":"/mlops/mlops/auth/oauth2-proxy/","permalink":"/docs/mlops/mlops/auth/oauth2-proxy/","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/mlops/auth/oauth2-proxy/oauth2-proxy.mdx","tags":[],"version":"current","lastUpdatedAt":1749318943000,"frontMatter":{"id":"oauth2-proxy","title":"oauth2-proxy\ub85c \uac04\ub2e8\ud55c \uc778\uc99d \uc808\ucc28 \ucd94\uac00\ud558\uae30","sidebar_label":"oauth2-proxy","description":"oauth2-proxy\ub85c \uac04\ub2e8\ud55c \uc778\uc99d \uc808\ucc28 \ucd94\uac00\ud558\uae30","keywords":["oauth2-proxy"]},"sidebar":"mlops","previous":{"title":"Dex","permalink":"/docs/mlops/mlops/auth/dex/"},"next":{"title":"Argo Events","permalink":"/docs/mlops/mlops/event/argo-events"}}');var l=o(74848),t=o(28453);const s={id:"oauth2-proxy",title:"oauth2-proxy\ub85c \uac04\ub2e8\ud55c \uc778\uc99d \uc808\ucc28 \ucd94\uac00\ud558\uae30",sidebar_label:"oauth2-proxy",description:"oauth2-proxy\ub85c \uac04\ub2e8\ud55c \uc778\uc99d \uc808\ucc28 \ucd94\uac00\ud558\uae30",keywords:["oauth2-proxy"]},i=void 0,a={},h=[{value:"\uc778\uc99d \ubc29\uc2dd",id:"\uc778\uc99d-\ubc29\uc2dd",level:2},{value:"OAuth2 Reverse Proxy",id:"oauth2-reverse-proxy",level:3},{value:"OAuth2 Middleware",id:"oauth2-middleware",level:3},{value:"\uc124\uce58",id:"\uc124\uce58",level:2},{value:"\uc124\uc815",id:"\uc124\uc815",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",mermaid:"mermaid",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"\uc778\uc99d-\ubc29\uc2dd",children:"\uc778\uc99d \ubc29\uc2dd"}),"\n",(0,l.jsx)(n.h3,{id:"oauth2-reverse-proxy",children:"OAuth2 Reverse Proxy"}),"\n",(0,l.jsx)("center",{children:(0,l.jsx)(n.mermaid,{value:"flowchart LR\n  Client\n  Oauth2Proxy(oauth2-proxy)\n  OIDCProvider\n  Upstream\n\n  style Oauth2Proxy fill:#4B7,color:#fff\n\n  Client <--\x3e Oauth2Proxy\n  Oauth2Proxy <--\x3e OIDCProvider\n  Oauth2Proxy <--\x3e Upstream"})}),"\n",(0,l.jsx)("center",{children:"OAuth2Proxy\uac00 \uc778\uc99d \uc5ed\ud560\uacfc \ub9ac\ubc84\uc2a4 \ud504\ub85d\uc2dc \uc5ed\ud560 \ubaa8\ub450 \uc218\ud589"}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"--upstream=<upstream-url>[,<upstream-url>...]"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\ub9ac\ubc84\uc2a4 \ud504\ub85d\uc2dc\uc5d0\uc11c \uc0ac\uc6a9\ud560 upstream \uc11c\ubc84\ub97c \uc124\uc815\ud569\ub2c8\ub2e4"}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"/path"}),"\uac00 \ub9e4\ud551\ub429\ub2c8\ub2e4"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"oauth2-middleware",children:"OAuth2 Middleware"}),"\n",(0,l.jsx)("center",{children:(0,l.jsx)(n.mermaid,{value:"flowchart LR\n  Client\n  Gateway\n  Oauth2Proxy(oauth2-proxy)\n  OIDCProvider\n  Upstream\n\n  style Oauth2Proxy fill:#4B7,color:#fff\n\n  Client <--\x3e Gateway\n  Gateway -- request --\x3e Oauth2Proxy\n  Oauth2Proxy <--\x3e OIDCProvider\n  Oauth2Proxy -- response --\x3e Gateway\n  Gateway <--\x3e Upstream"})}),"\n",(0,l.jsx)("center",{children:"OAuth2Proxy\uac00 \uc778\uc99d \uc5ed\ud560\ub9cc \uc218\ud589"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"--upstream=static://202"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["upstream \uc11c\ubc84\ub97c \uc124\uc815\ud558\uc9c0 \uc54a\uace0 \uc778\uc99d\uc774 \uc131\uacf5\ud55c \uacbd\uc6b0 ",(0,l.jsx)(n.code,{children:"202"}),", \uc2e4\ud328\ud55c \uacbd\uc6b0 ",(0,l.jsx)(n.code,{children:"401"})," \uc751\ub2f5\uc744 \ubc18\ud658\ud569\ub2c8\ub2e4"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\uc124\uce58",children:"\uc124\uce58"}),"\n",(0,l.jsx)(n.admonition,{title:"Reference",type:"info",children:(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/oauth2-proxy/manifests/tree/main/helm/oauth2-proxy",children:"oauth2-proxy manifests GitHub / helm / oauth2-proxy"})}),"\n"]})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"helm repo add oauth2-proxy https://oauth2-proxy.github.io/manifests\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"helm repo update oauth2-proxy \\\n&& helm search repo oauth2-proxy/oauth2-proxy -l | head -n 10\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"helm pull oauth2-proxy/oauth2-proxy --version 7.12.17\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"helm show values oauth2-proxy/oauth2-proxy --version 7.12.17 > oauth2-proxy-7.12.17.yaml\n"})}),"\n",(0,l.jsxs)(n.admonition,{type:"info",children:[(0,l.jsx)(n.p,{children:"terraform\uc73c\ub85c \ucfe0\ud0a4 \uc2dc\ud06c\ub9bf\uc744 \uc0dd\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-hcl",children:'resource "random_password" "oauth2_proxy_cookie_secret" {\n  length           = 32\n  override_special = "-_"\n}\n'})})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",metastring:'title="oauth2-proxy-values.yaml"',children:'config:\n  # proxyVarsAsSecrets: true\n  clientID: <clientID>\n  clientSecret: <clientSecret>\n  cookieSecret: <cookieSecret>\n\n  configFile: |\n    email_domains = [ "*" ]\n\n    provider = "oidc"\n    oidc_issuer_url = "<issuerURL>"\n    scope = "openid email profile groups"\n    redirect_url = "<clientURL>/oauth2/callback"\n\n    upstreams = [ "<upstreamURL>" ]\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"helm template oauth2-proxy oauth2-proxy/oauth2-proxy \\\n    --version 7.12.17 \\\n    -n oauth2-proxy \\\n    -f oauth2-proxy-values.yaml \\\n    > oauth2-proxy.yaml\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"helm upgrade oauth2-proxy oauth2-proxy/oauth2-proxy \\\n    --install \\\n    --history-max 5 \\\n    --version 7.12.17 \\\n    -n oauth2-proxy \\\n    -f oauth2-proxy-values.yaml\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\uc124\uc815",children:"\uc124\uc815"}),"\n",(0,l.jsx)(n.admonition,{title:"Reference",type:"info",children:(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://oauth2-proxy.github.io/oauth2-proxy/configuration/overview",children:"oauth2-proxy Docs / Configuration / Overview"})}),"\n"]})}),"\n",(0,l.jsx)(n.p,{children:"\uc635\uc158\uc744 \uc804\ub2ec\ud558\ub294 \ubc29\uc2dd\uc740 3\uac00\uc9c0\uac00 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"args"}),"\uc73c\ub85c \uc635\uc158\uc744 \uc804\ub2ec"]}),"\n",(0,l.jsxs)(n.li,{children:["\ud30c\uc77c","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"--config=<config-path>"})}),"\n",(0,l.jsxs)(n.li,{children:["\uc635\uc158\uc758 ",(0,l.jsx)(n.code,{children:"-"}),"\ub97c ",(0,l.jsx)(n.code,{children:"_"}),"\ub85c \ubcc0\uacbd"]}),"\n",(0,l.jsxs)(n.li,{children:["\uc5ec\ub7ec\ubc88 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 \uc635\uc158\uc758 \uacbd\uc6b0 \ub9c8\uc9c0\ub9c9\uc5d0 s\ub97c \ubd99\uc774\uace0 ",(0,l.jsx)(n.code,{children:"[]"})," \ub9ac\uc2a4\ud2b8\ub85c \ubcc0\uacbd"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"env"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\uc635\uc158\uc758 \uc18c\ubb38\uc790\ub97c \ub300\ubb38\uc790\ub85c, ",(0,l.jsx)(n.code,{children:"-"}),"\ub97c ",(0,l.jsx)(n.code,{children:"_"}),"\ub85c \ubcc0\uacbd"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"OAUTH2_PROXY_"}),"\uc744 \uc55e\uc5d0 \ubd99\uc784"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["alpha config","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"--alpha-config=<config-path>"})}),"\n",(0,l.jsx)(n.li,{children:"alpha \ud14c\uc2a4\ud2b8 \uc911\uc778 \uc124\uc815 \ubc29\ubc95\uc73c\ub85c yaml \ud30c\uc77c\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4."}),"\n",(0,l.jsx)(n.li,{children:"alpha config\ub97c \uc0ac\uc6a9\ud558\uba74 \uc704\uc758 3 \uac00\uc9c0 \ubc29\ubc95\uc911 \ud638\ud658\ub418\uc9c0 \uc54a\ub294 \uc635\uc158\ub4e4\uc774 \uc0dd\uae41\ub2c8\ub2e4."}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://oauth2-proxy.github.io/oauth2-proxy/docs/configuration/alpha-config",children:"https://oauth2-proxy.github.io/oauth2-proxy/docs/configuration/alpha-config"})}),"\n"]}),"\n"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}}}]);