"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[43336],{10180:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>d,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"mlops/mlops/auth/rbac","title":"Kubernetes \uc778\uac00(Authz); RBAC","description":"kubernetes \uc778\uac00(Authz); RBAC","source":"@site/docs/mlops/mlops/auth/rbac.mdx","sourceDirName":"mlops/mlops/auth","slug":"/mlops/mlops/auth/rbac","permalink":"/docs/mlops/mlops/auth/rbac","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/mlops/auth/rbac.mdx","tags":[],"version":"current","lastUpdatedAt":1747248331000,"frontMatter":{"id":"rbac","title":"Kubernetes \uc778\uac00(Authz); RBAC","sidebar_label":"k8s \uc778\uac00(Authz); RBAC","description":"kubernetes \uc778\uac00(Authz); RBAC","keywords":["kubernetes","authz","rbac"]},"sidebar":"mlops","previous":{"title":"k8s \uc778\uc99d(Authn)","permalink":"/docs/mlops/mlops/auth/authn"},"next":{"title":"OpenID Connect(OIDC)","permalink":"/docs/mlops/mlops/auth/oidc"}}');var l=r(74848),a=r(28453);const t={id:"rbac",title:"Kubernetes \uc778\uac00(Authz); RBAC",sidebar_label:"k8s \uc778\uac00(Authz); RBAC",description:"kubernetes \uc778\uac00(Authz); RBAC",keywords:["kubernetes","authz","rbac"]},o=void 0,i={},c=[{value:"API server",id:"api-server",level:2},{value:"Role/ClusterRole",id:"roleclusterrole",level:2},{value:"Role/ClusterRole",id:"roleclusterrole-1",level:3},{value:"ClusterRole aggregationRule",id:"clusterrole-aggregationrule",level:3},{value:"RoleBinding/ClusterRoleBinding",id:"rolebindingclusterrolebinding",level:3},{value:"\uad8c\ud55c \ud655\uc778",id:"\uad8c\ud55c-\ud655\uc778",level:2}];function u(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/access-authn-authz/rbac/",children:"https://kubernetes.io/docs/reference/access-authn-authz/rbac/"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"api-server",children:"API server"}),"\n",(0,l.jsx)(n.p,{children:"Kubernetes API\ub294 \uc544\ub798\uc640 \uac19\uc740 \ubc29\uc2dd\uc73c\ub85c \uad6c\uc131\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<verb>"})," /api/v1/namespace/",(0,l.jsx)(n.code,{children:"<namespace>"}),"/",(0,l.jsx)(n.code,{children:"<resource>"}),"/",(0,l.jsx)(n.code,{children:"<resourceName>"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<verb>"})," /apis/",(0,l.jsx)(n.code,{children:"<apiGroup>"}),"/",(0,l.jsx)(n.code,{children:"<version>"}),"/namespace/",(0,l.jsx)(n.code,{children:"<namespace>"}),"/",(0,l.jsx)(n.code,{children:"<resource>"}),"/",(0,l.jsx)(n.code,{children:"<resourceName>"})]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"roleclusterrole",children:"Role/ClusterRole"}),"\n",(0,l.jsx)(n.h3,{id:"roleclusterrole-1",children:"Role/ClusterRole"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"apiVersion: rbac.authorization.k8s.io/v1\nkind: Role # Role|ClusterRole\nmetadata:\n  name: <name>\n  namespace: <namespace> # ClusterRole\uc740 namespace\uc5d0 \uc18d\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\nrules:\n  - apiGroups: []\n    resources: []\n    # resourceNames: []\n    verbs: []\n"})}),"\n",(0,l.jsx)(n.h3,{id:"clusterrole-aggregationrule",children:"ClusterRole aggregationRule"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'apiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: <name1>\naggregationRule:\n  clusterRoleSelectors:\n    - matchLabels:\n        rbac.authorization.loliot.net/aggregate-to-<name1>: "true"\nrules: []\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'apiVersion: rbac.authorization.k8s.io/v1\nkind: ClusterRole\nmetadata:\n  name: <name2>\n  labels:\n    rbac.authorization.loliot.net/aggregate-to-<name1>: "true"\nrules:\n  - apiGroups: [""]\n    resources: ["services", "endpointslices", "pods"]\n    verbs: ["get", "list", "watch"]\n'})}),"\n",(0,l.jsx)(n.h3,{id:"rolebindingclusterrolebinding",children:"RoleBinding/ClusterRoleBinding"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"apiVersion: rbac.authorization.k8s.io/v1\nkind: RoleBinding # RoleBinding|ClusterRoleBinding\nmetadata:\n  name: <name>\n  namespace: <namespace>\nroleRef:\n  apiGroup: rbac.authorization.k8s.io\n  kind: Role # Role|ClusterRole\n  name: <name>\nsubjects:\n  - apiGroup: rbac.authorization.k8s.io\n    kind: User\n    name: <user>\n  - apiGroup: rbac.authorization.k8s.io\n    kind: Group\n    name: <group>\n  - kind: ServiceAccount\n    name: <serviceAccount>\n    namespace: <namespace>\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\uad8c\ud55c-\ud655\uc778",children:"\uad8c\ud55c \ud655\uc778"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"kubectl auth can-i --list\n"})})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(u,{...e})}):u(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>o});var s=r(96540);const l={},a=s.createContext(l);function t(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);