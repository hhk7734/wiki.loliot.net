"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[35747],{88771:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"mlops/mlops/monitoring/prometheus/promql","title":"PromQL","description":"PromQL","source":"@site/docs/mlops/mlops/monitoring/prometheus/promql.mdx","sourceDirName":"mlops/mlops/monitoring/prometheus","slug":"/mlops/mlops/monitoring/prometheus/promql","permalink":"/docs/mlops/mlops/monitoring/prometheus/promql","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/mlops/monitoring/prometheus/promql.mdx","tags":[],"version":"current","lastUpdatedAt":1732809096000,"frontMatter":{"id":"promql","title":"PromQL","sidebar_label":"PromQL","description":"PromQL","keywords":["promql"]},"sidebar":"mlops","previous":{"title":"Monitor","permalink":"/docs/mlops/mlops/monitoring/prometheus/crd/monitor"},"next":{"title":"Custom Exporter \ub9cc\ub4e4\uae30","permalink":"/docs/mlops/mlops/monitoring/prometheus/custom-exporter"}}');var o=s(74848),l=s(28453);const t={id:"promql",title:"PromQL",sidebar_label:"PromQL",description:"PromQL",keywords:["promql"]},i=void 0,c={},d=[{value:"Data Model",id:"data-model",level:2},{value:"PromQL",id:"promql",level:2},{value:"Instant Vector",id:"instant-vector",level:3},{value:"Range Vector",id:"range-vector",level:3},{value:"Operators",id:"operators",level:3},{value:"Aggregation Operators",id:"aggregation-operators",level:4},{value:"Functions",id:"functions",level:3}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"data-model",children:"Data Model"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://prometheus.io/docs/concepts/data_model/",children:"https://prometheus.io/docs/concepts/data_model/"})}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-promql",children:'# \uc8fc\uc11d\n<metric_name>[{<label>="<label_value>"[,<label>="<label_value>"]}] <value>\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"<metric_name>"}),": ",(0,o.jsx)(n.code,{children:"[a-zA-Z_:][a-zA-Z0-9_:]*"})," \uc815\uaddc\uc2dd\uc744 \ub9cc\uc871\ud574\uc57c\ud569\ub2c8\ub2e4"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"<label>"}),": ",(0,o.jsx)(n.code,{children:"[a-zA-Z_][a-zA-Z0-9_]*"})," \uc815\uaddc\uc2dd\uc744 \ub9cc\uc871\ud574\uc57c\ud569\ub2c8\ub2e4","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"instance"}),": \ub370\uc774\ud130\ub97c \uc218\uc9d1\ud560 \ud0c0\uac9f\uc758 ",(0,o.jsx)(n.code,{children:"host:port"}),"\ub85c, Prometheus\uac00 \ub370\uc774\ud130\ub97c \uc218\uc9d1\ud560 \ub54c \uc790\ub3d9\uc73c\ub85c \ucd94\uac00\ud569\ub2c8\ub2e4"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"job"}),": \uac19\uc740 \ubaa9\uc801\uc744 \uac00\uc9c4 \uc778\uc2a4\ud134\uc2a4 \uc9d1\ud569\uc758 \uc774\ub984\uc73c\ub85c, Prometheus\uac00 \ub370\uc774\ud130\ub97c \uc218\uc9d1\ud560 \ub54c \uc790\ub3d9\uc73c\ub85c \ucd94\uac00\ud569\ub2c8\ub2e4"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"<label_value>"}),": \ubaa8\ub4e0 \ubb38\uc790\uc5f4\uc744 \ud5c8\uc6a9\ud558\uba70, \ube48 \ubb38\uc790\uc5f4\uc778 \uacbd\uc6b0 \ud574\ub2f9 \ub808\uc774\ube14\uc744 \uc0ac\uc6a9\ud558\uc9c0 \uc54a\uc740 \uac83\uc73c\ub85c \uac04\uc8fc\ud569\ub2c8\ub2e4"]}),"\n",(0,o.jsx)(n.li,{children:"\uba54\ud2b8\ub9ad \uc774\ub984\uacfc \ub808\uc774\ube14\uc758 \uc870\ud569\uc740 \uc2dc\uacc4\uc5f4 \ub370\uc774\ud130\uc758 \ud0a4\uac00 \ub429\ub2c8\ub2e4"}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsxs)(n.p,{children:["\uba54\ud2b8\ub9ad \uc774\ub984\uc5d0\uc11c ",(0,o.jsx)(n.code,{children:":"}),"\uc740 \uc0ac\uc6a9\uc790 \uc815\uc758 recording rule\uc5d0\uc11c \uc0ac\uc6a9\ub418\uace0, ",(0,o.jsx)(n.code,{children:"__"}),"\ub85c \uc2dc\uc791\ud558\ub294 \ub808\uc774\ube14\uc740 \ub0b4\ubd80 \uc0ac\uc6a9\uc744 \uc704\ud574 \uc608\uc57d\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4."]})}),"\n",(0,o.jsx)(n.h2,{id:"promql",children:"PromQL"}),"\n",(0,o.jsx)(n.h3,{id:"instant-vector",children:"Instant Vector"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/basics/#instant-vector-selectors",children:"https://prometheus.io/docs/prometheus/latest/querying/basics/#instant-vector-selectors"})}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"\uc5ec\ub7ec \uc2dc\uacc4\uc5f4 \ub370\uc774\ud130\uc5d0\uc11c \uac19\uc740 timestamp\ub97c \uac16\ub294 \uc0d8\ud50c\uc744 \ud55c \uac1c\uc529 \ubaa8\uc544\uc11c \ub9cc\ub4e0 \uc9d1\ud569\uc785\ub2c8\ub2e4."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-promql",children:'[<metric_name>][{<label><match_operator>"<string|regex>"[,<label><match_operator>"<string|regex>"]}]\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"\uba54\ud2b8\ub9ad \uc774\ub984 \ub610\ub294 \ub808\uc774\ube14\ub9cc\uc73c\ub85c \ucffc\ub9ac\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"__name__"})," \ub808\uc774\ube14\uc758 \uac12\uc73c\ub85c \uba54\ud2b8\ub9ad \uc774\ub984\uc744 \uc9c0\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"<match_operator>"}),": ",(0,o.jsx)(n.code,{children:"="}),", ",(0,o.jsx)(n.code,{children:"!="}),", ",(0,o.jsx)(n.code,{children:"=~"}),", ",(0,o.jsx)(n.code,{children:"!~"})," \uc911 \ud558\ub098\uc785\ub2c8\ub2e4","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"="}),": \ub808\uc774\ube14\uc758 \uac12\uc774 \uc8fc\uc5b4\uc9c4 ",(0,o.jsx)(n.code,{children:"\ubb38\uc790\uc5f4"}),"\uacfc \uc77c\uce58"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"!="}),": \ub808\uc774\ube14\uc758 \uac12\uc774 \uc8fc\uc5b4\uc9c4 ",(0,o.jsx)(n.code,{children:"\ubb38\uc790\uc5f4"}),"\uacfc \ubd88\uc77c\uce58"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"=~"}),": \ub808\uc774\ube14\uc758 \uac12\uc774 \uc8fc\uc5b4\uc9c4 ",(0,o.jsx)(n.code,{children:"\uc815\uaddc\uc2dd"}),"\uacfc \uc77c\uce58"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"!~"}),": \ub808\uc774\ube14\uc758 \uac12\uc774 \uc8fc\uc5b4\uc9c4 ",(0,o.jsx)(n.code,{children:"\uc815\uaddc\uc2dd"}),"\uacfc \ubd88\uc77c\uce58"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"range-vector",children:"Range Vector"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/basics/#range-vector-selectors",children:"https://prometheus.io/docs/prometheus/latest/querying/basics/#range-vector-selectors"})}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"\uc5ec\ub7ec \uc2dc\uacc4\uc5f4 \ub370\uc774\ud130\uc5d0\uc11c \uc8fc\uc5b4\uc9c4 \ubc94\uc704\uc758 timestamp\ub97c \uac16\ub294 \uc0d8\ud50c\ub4e4\uc744 \ubaa8\uc544\uc11c \ub9cc\ub4e0 \uc9d1\ud569\uc785\ub2c8\ub2e4."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-promql",children:"# duration\uc5d0 \uc0ac\uc6a9\ub418\ub294 []\ub294 \uc635\uc158\uc758 \uc758\ubbf8\uac00 \uc544\ub2d9\ub2c8\ub2e4\n# Ex) http_requests_total[5m]\n<instant_vector_expr>[<duration>[:<resolution>]] [offset <duration>] [@ <unix_timestamp>|start()|end()]\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"<duration>"}),": \uc22b\uc790 + \ub2e8\uc704\ub85c \uad6c\uc131\ub41c \uac12\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\ub2e8\uc704: ",(0,o.jsx)(n.code,{children:"ms"}),", ",(0,o.jsx)(n.code,{children:"s"}),", ",(0,o.jsx)(n.code,{children:"m"}),", ",(0,o.jsx)(n.code,{children:"h"}),", ",(0,o.jsx)(n.code,{children:"d"}),", ",(0,o.jsx)(n.code,{children:"w"}),", ",(0,o.jsx)(n.code,{children:"y"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"operators",children:"Operators"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/operators/",children:"https://prometheus.io/docs/prometheus/latest/querying/operators/"})}),"\n"]}),"\n",(0,o.jsx)(n.h4,{id:"aggregation-operators",children:"Aggregation Operators"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/operators/#aggregation-operators",children:"Aggregation Operators"})}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-promql",children:"<operator> [without|by (<label>[,<label>])] ([parameter,] <instantVector>)\n"})}),"\n",(0,o.jsx)(n.p,{children:"\ub610\ub294"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-promql",children:"<operator> ([parameter,] <instantVector>) [without|by (<label>[,<label>])]\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"sum (<instantVector>)"}),": \uba54\ud2b8\ub9ad\uc758 \ucd1d\ud569\uc744 \uad6c\ud569\ub2c8\ub2e4."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"sum by (<label>[,<label>]) (<instantVector>)"}),": ",(0,o.jsx)(n.code,{children:"<label>[,<label>]"}),"\uc774 \uac19\uc740 \uba54\ud2b8\ub9ad\uc758 \ucd1d\ud569\uc744 \uad6c\ud569\ub2c8\ub2e4."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"sum without (<label>[,<label>]) (<instantVector>)"}),": ",(0,o.jsx)(n.code,{children:"<label>[,<label>]"}),"\uc774 \ub2e4\ub978 \uba54\ud2b8\ub9ad\uc758 \ucd1d\ud569\uc744 \uad6c\ud569\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"functions",children:"Functions"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://prometheus.io/docs/prometheus/latest/querying/functions/",children:"Functions"})}),"\n"]}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"rate(<rangeVector>)"}),": x\ucd95\uc744 timestamp\ub85c\ud558\ub294 \uadf8\ub798\ud504\uc758 \ud3c9\uade0 \ubcc0\ud654\uc728\uc744 \uacc4\uc0b0\ud569\ub2c8\ub2e4."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>i});var r=s(96540);const o={},l=r.createContext(o);function t(e){const n=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);