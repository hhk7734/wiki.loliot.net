"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[62908],{28453:(e,o,s)=>{s.d(o,{R:()=>i,x:()=>a});var n=s(96540);const r={},t=n.createContext(r);function i(e){const o=n.useContext(t);return n.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(t.Provider,{value:o},e.children)}},39259:(e,o,s)=>{s.r(o),s.d(o,{assets:()=>c,contentTitle:()=>a,default:()=>d,frontMatter:()=>i,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"mlops/storage/ceph/rbd","title":"Ceph Rados Block Device(RBD)","description":"Ceph Rados Block Device(RBD)","source":"@site/docs/mlops/storage/ceph/rbd.mdx","sourceDirName":"mlops/storage/ceph","slug":"/mlops/storage/ceph/rbd","permalink":"/docs/mlops/storage/ceph/rbd","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/storage/ceph/rbd.mdx","tags":[],"version":"current","lastUpdatedAt":1758994254000,"frontMatter":{"id":"rbd","title":"Ceph Rados Block Device(RBD)","sidebar_label":"Block Device","description":"Ceph Rados Block Device(RBD)","keywords":["ceph","rbd"]},"sidebar":"storage","previous":{"title":"Shared File System","permalink":"/docs/mlops/storage/ceph/cephfs"},"next":{"title":"Object Storage","permalink":"/docs/mlops/storage/ceph/object-gateway"}}');var r=s(74848),t=s(28453);const i={id:"rbd",title:"Ceph Rados Block Device(RBD)",sidebar_label:"Block Device",description:"Ceph Rados Block Device(RBD)",keywords:["ceph","rbd"]},a=void 0,c={},l=[{value:"Operator \uc124\uc815",id:"operator-\uc124\uc815",level:2},{value:"CephBlockPool \uc0dd\uc131",id:"cephblockpool-\uc0dd\uc131",level:2},{value:"StorageClass \uc0dd\uc131",id:"storageclass-\uc0dd\uc131",level:2}];function p(e){const o={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.h2,{id:"operator-\uc124\uc815",children:"Operator \uc124\uc815"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-yaml",metastring:'title="rook-ceph-values.yaml"',children:"csi:\n  enableRbdDriver: true\n\n  csiRBDProvisionerResource: |\n    - name : csi-provisioner\n      resource: null\n    - name : csi-resizer\n      resource: null\n    - name : csi-attacher\n      resource: null\n    - name : csi-snapshotter\n      resource: null\n    - name : csi-rbdplugin\n      resource: null\n    - name : csi-omap-generator\n      resource: null\n    - name : liveness-prometheus\n      resource: null\n\n  provisionerTolerations: []\n\n  csiRBDPluginResource: |\n    - name : driver-registrar\n      resource: null\n    - name : csi-rbdplugin\n      resource: null\n    - name : liveness-prometheus\n      resource: null\n\n  pluginTolerations: []\n\n  kubeletDirPath: /var/lib/kubelet\n"})}),"\n",(0,r.jsx)(o.h2,{id:"cephblockpool-\uc0dd\uc131",children:"CephBlockPool \uc0dd\uc131"}),"\n",(0,r.jsx)(o.admonition,{title:"Reference",type:"info",children:(0,r.jsxs)(o.ul,{children:["\n",(0,r.jsx)(o.li,{children:(0,r.jsx)(o.a,{href:"https://rook.io/docs/rook/latest/Storage-Configuration/Block-Storage-RBD/block-storage/",children:"Rook / Block Storage Overview"})}),"\n",(0,r.jsx)(o.li,{children:(0,r.jsx)(o.a,{href:"https://rook.io/docs/rook/latest/CRDs/Block-Storage/ceph-block-pool-crd/",children:"Rook / CephBlockPool CRD"})}),"\n"]})}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-yaml",children:"apiVersion: ceph.rook.io/v1\nkind: CephBlockPool\nspec:\n  failureDomain: host\n  replicated:\n    size: 3\n"})}),"\n",(0,r.jsx)(o.h2,{id:"storageclass-\uc0dd\uc131",children:"StorageClass \uc0dd\uc131"}),"\n",(0,r.jsx)(o.pre,{children:(0,r.jsx)(o.code,{className:"language-yaml",children:'apiVersion: storage.k8s.io/v1\nkind: StorageClass\nmetadata:\n  annotations:\n    storageclass.kubernetes.io/is-default-class: "true"\nprovisioner: <operatorNamespace>.rbd.csi.ceph.com\nvolumeBindingMode: Immediate\nreclaimPolicy: Delete\nallowVolumeExpansion: true\nparameters:\n  clusterID: <cephClusterNamespace>\n  pool: <cephBlockPoolName>\n\n  imageFormat: "2"\n  imageFeatures: "layering"\n\n  csi.storage.k8s.io/fstype: ext4\n\n  csi.storage.k8s.io/provisioner-secret-name: rook-csi-rbd-provisioner\n  csi.storage.k8s.io/provisioner-secret-namespace: <cephClusterNamespace>\n\n  csi.storage.k8s.io/controller-expand-secret-name: rook-csi-rbd-provisioner\n  csi.storage.k8s.io/controller-expand-secret-namespace: <cephClusterNamespace>\n\n  csi.storage.k8s.io/controller-publish-secret-name: rook-csi-rbd-provisioner\n  csi.storage.k8s.io/controller-publish-secret-namespace: <cephClusterNamespace>\n\n  csi.storage.k8s.io/node-stage-secret-name: rook-csi-rbd-node\n  csi.storage.k8s.io/node-stage-secret-namespace: <cephClusterNamespace>\n'})})]})}function d(e={}){const{wrapper:o}={...(0,t.R)(),...e.components};return o?(0,r.jsx)(o,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}}}]);