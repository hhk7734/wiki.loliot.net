"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[71264],{28453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>r});var t=s(96540);const i={},a=t.createContext(i);function l(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(a.Provider,{value:n},e.children)}},28624:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>m,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"mlops/kubernetes/storage/persistent-volume","title":"PersistentVolume","description":"kubernetes PersistentVolume","source":"@site/docs/mlops/kubernetes/storage/persistent-volume.mdx","sourceDirName":"mlops/kubernetes/storage","slug":"/mlops/kubernetes/storage/persistent-volume","permalink":"/docs/mlops/kubernetes/storage/persistent-volume","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/kubernetes/storage/persistent-volume.mdx","tags":[],"version":"current","lastUpdatedAt":1740111436000,"frontMatter":{"id":"persistent-volume","title":"PersistentVolume","sidebar_label":"PersistentVolume","description":"kubernetes PersistentVolume","keywords":["kubernetes","PersistentVolume"]},"sidebar":"kubernetes","previous":{"title":"volumes","permalink":"/docs/mlops/kubernetes/storage/volumes"},"next":{"title":"Pod env","permalink":"/docs/mlops/kubernetes/configuration/env"}}');var i=s(74848),a=s(28453);const l={id:"persistent-volume",title:"PersistentVolume",sidebar_label:"PersistentVolume",description:"kubernetes PersistentVolume",keywords:["kubernetes","PersistentVolume"]},r=void 0,o={},c=[{value:"Static provisioning",id:"static-provisioning",level:2},{value:"Dynamic provisioning",id:"dynamic-provisioning",level:2},{value:"StorageClass",id:"storageclass",level:2},{value:"AWS provisioner",id:"aws-provisioner",level:3},{value:"PersistentVolume",id:"persistentvolume",level:2},{value:"PersistentVolumeClaim",id:"persistentvolumeclaim",level:2},{value:"StatefulSet\uc5d0\uc11c \ubbf8\ub9ac \uc0dd\uc131\ub41c PV \uc0ac\uc6a9\ud558\uae30",id:"statefulset\uc5d0\uc11c-\ubbf8\ub9ac-\uc0dd\uc131\ub41c-pv-\uc0ac\uc6a9\ud558\uae30",level:2}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"static-provisioning",children:"Static provisioning"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\uad00\ub9ac\uc790\uac00 PV(PersistentVolume)\ub97c \uc0dd\uc131"}),"\n",(0,i.jsx)(n.li,{children:"PVC(PersistentVolumeClaim) \uc0dd\uc131, \uba85\uc2dc\ub41c \uc694\uad6c \uc0ac\ud56d\uc744 \ucda9\uc871\uc2dc\ud0ac \uc218 \uc788\ub294 PV\uac00 \uc788\uc73c\uba74 \ubc14\uc778\ub529"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"dynamic-provisioning",children:"Dynamic provisioning"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"StorageClass\uc5d0 \ud504\ub85c\ube44\uc800\ub2dd\uc744 \uc704\ud55c \uc18d\uc131 \uc124\uc815"}),"\n",(0,i.jsxs)(n.li,{children:["StorageClass\ub97c \uba85\uc2dc\ud55c PVC \uc0dd\uc131","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"\ubd80\ud569\ud558\ub294 PV\uac00 \uc874\uc7ac\ud558\uba74 \ubc14\uc778\ub529"}),"\n",(0,i.jsx)(n.li,{children:"\uc5c6\uc73c\uba74 StorageClass\uc758 \uc18d\uc131\uc5d0 \ub530\ub77c PV \uc0dd\uc131"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"storageclass",children:"StorageClass"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://kubernetes.io/ko/docs/tasks/administer-cluster/change-default-storage-class/",children:"https://kubernetes.io/ko/docs/tasks/administer-cluster/change-default-storage-class/"})}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\uae30\ubcf8 StorageClass\ub85c \ub4f1\ub85d\ud558\uae30 \uc704\ud574\uc11c\ub294 \uc544\ub798 \uc124\uc815\uc744 \ucd94\uac00\ud558\uba74 \ub429\ub2c8\ub2e4."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'#...\nmetadata:\n  annotations:\n    storageclass.kubernetes.io/is-default-class: "true"\n#...\n'})}),"\n",(0,i.jsx)(n.h3,{id:"aws-provisioner",children:"AWS provisioner"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'title="aws-standard-storage-class.yaml"',children:"apiVersion: storage.k8s.io/v1\nkind: StorageClass\nmetadata:\n  name: standard\nprovisioner: kubernetes.io/aws-ebs\nparameters:\n  type: gp2\nreclaimPolicy: Delete\nallowVolumeExpansion: true\nmountOptions:\n  - debug\nvolumeBindingMode: Immediate\n"})}),"\n",(0,i.jsx)(n.h2,{id:"persistentvolume",children:"PersistentVolume"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: PersistentVolume\nmetadata:\n  name: <name>\nspec:\n  persistentVolumeReclaimPolicy: Retain # Retain, Delete\n  capacity:\n    storage: <storage> # 5Gi\n  volumeMode: Filesystem # Filesystem, Block\n  accessModes:\n    - ReadWriteOnce # ReadWriteOnce, ReadOnlyMany, ReadWriteMany\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"persistentVolumeReclaimPolicy"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Retain"}),": PVC\ub97c \uc0ad\uc81c\ud558\ub354\ub77c\ub3c4 PV\ub294 \uc0ad\uc81c\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"PV\ub97c \uc0ad\uc81c\ud558\ub354\ub77c\ub3c4 \ubb3c\ub9ac \ubcfc\ub968\uc740 \uc0ad\uc81c\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"Delete"}),": PVC\ub97c \uc0ad\uc81c\ud558\uba74 PV\uc640 \ubb3c\ub9ac \ubcfc\ub968\uc774 \uc0ad\uc81c\ub429\ub2c8\ub2e4"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"persistentvolumeclaim",children:"PersistentVolumeClaim"}),"\n",(0,i.jsx)(n.h2,{id:"statefulset\uc5d0\uc11c-\ubbf8\ub9ac-\uc0dd\uc131\ub41c-pv-\uc0ac\uc6a9\ud558\uae30",children:"StatefulSet\uc5d0\uc11c \ubbf8\ub9ac \uc0dd\uc131\ub41c PV \uc0ac\uc6a9\ud558\uae30"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: apps/v1\nkind: StatefulSet\nmetadata:\n  name: <name>\n  namespace: <namespace>\nspec:\n  replicas: 3\n  template:\n    spec:\n      containers:\n        - volumeMounts:\n            - name: <PVCTemplateName>\n              mountPath: <mount-path>\n  volumeClaimTemplates:\n    - metadata:\n        name: <PVCTemplateName>\n      spec:\n        accessModes:\n          - ReadWriteOnce\n        resources:\n          requests:\n            storage: <storage>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\uc704\uc640 \uac19\uc774 StatefulSet\uc744 \uc0dd\uc131\ud558\uba74, ",(0,i.jsx)(n.code,{children:"<PVCTemplateName>-<StatefulSetName>-<ReplicaIndex>"})," \ud615\ud0dc\uc758 PVC\uac00 \uc0dd\uc131\ub418\ubbc0\ub85c \uc544\ub798\uc640 \uac19\uc740 PersistentVolume\uc744 \ubbf8\ub9ac \uc0dd\uc131\ud558\uba74 \ub429\ub2c8\ub2e4."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: PersistentVolume\nmetadata:\n  name: <name>\n  namespace: <namespace>\nspec:\n  claimRef:\n    name: <PVCTemplateName>-<StatefulSetName>-<ReplicaIndex>\n    namespace: <namespace>\n  capacity:\n    storage: <storage>\n  accessModes:\n    - ReadWriteOnce\n  volumeMode: Filesystem\n  persistentVolumeReclaimPolicy: Retain\n"})})]})}function m(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);