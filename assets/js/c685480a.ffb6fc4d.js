"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[74332],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var t=i(96540);const o={},s=t.createContext(o);function l(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),t.createElement(s.Provider,{value:n},e.children)}},40814:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>f,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"mlops/kubernetes/scheduling/affinity","title":"Affinity","description":"node/pod affinity/anti-affinity","source":"@site/docs/mlops/kubernetes/scheduling/affinity.mdx","sourceDirName":"mlops/kubernetes/scheduling","slug":"/mlops/kubernetes/scheduling/affinity","permalink":"/docs/mlops/kubernetes/scheduling/affinity","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/kubernetes/scheduling/affinity.mdx","tags":[],"version":"current","lastUpdatedAt":1744567061000,"frontMatter":{"id":"affinity","title":"Affinity","sidebar_label":"Affinity","description":"node/pod affinity/anti-affinity","keywords":["kubernetes","affinity","anti-affinity"]},"sidebar":"kubernetes","previous":{"title":"SecurityContext","permalink":"/docs/mlops/kubernetes/security/security-context"},"next":{"title":"Taints and Tolerations","permalink":"/docs/mlops/kubernetes/scheduling/taint-toleration"}}');var o=i(74848),s=i(28453);const l={id:"affinity",title:"Affinity",sidebar_label:"Affinity",description:"node/pod affinity/anti-affinity",keywords:["kubernetes","affinity","anti-affinity"]},a=void 0,r={},d=[{value:"nodeAffinity &amp; nodeAntiAffinity",id:"nodeaffinity--nodeantiaffinity",level:2},{value:"podAffinity &amp; podAntiAffinity",id:"podaffinity--podantiaffinity",level:2}];function c(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"nodeaffinity--nodeantiaffinity",children:"nodeAffinity & nodeAntiAffinity"}),"\n",(0,o.jsx)(n.p,{children:"Pod\uac00 \uc2a4\ucf00\uc904\ub9c1\ub420 \ub54c Node\uc758 label\uc744 \uae30\uc900\uc73c\ub85c Pod\uc744 \uc2a4\ucf00\uc904\ub9c1\ud558\uac70\ub098 \ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"spec:\n  affinity:\n    nodeAffinity:\n      # \ud544\uc218\uc801\uc73c\ub85c \ub9cc\uc871\ud574\uc57c\ud558\ub294 \uaddc\uce59\uc785\ub2c8\ub2e4\n      requiredDuringSchedulingIgnoredDuringExecution:\n        nodeSelectorTerms:\n          # \uc5ec\ub7ec\uac1c \uc120\uc5b8\ud558\uba74 OR \uc870\uac74\uc774 \uc801\uc6a9\ub429\ub2c8\ub2e4\n          - matchExpressions:\n              # \uc5ec\ub7ec\uac1c \uc120\uc5b8\ud558\uba74 AND \uc870\uac74\uc774 \uc801\uc6a9\ub429\ub2c8\ub2e4\n              - key: <labelKey>\n                operator: In # In, NotIn, Exists, DoesNotExist, Gt, Lt\n                values:\n                  - <labelValue>\n          # - matchLabels:\n          #     <key>: <value>\n      # \uc120\ud638\ud558\ub294 Node\uc5d0 \ub300\ud55c \uaddc\uce59\uc785\ub2c8\ub2e4\n      preferredDuringSchedulingIgnoredDuringExecution:\n        - weight: 1 # 1 ~ 100, \ub9cc\uc871\ud558\ub294 \uc870\uac74\uc758 weight\uc758 \ucd1d\ud569\uc774 \ub192\uc740 Node\ub97c \uc120\ud638\ud569\ub2c8\ub2e4\n          preference:\n            matchExpressions:\n              - key: <labelKey>\n                operator: In # In, NotIn, Exists, DoesNotExist, Gt, Lt\n                values:\n                  - <labelValue>\n"})}),"\n",(0,o.jsx)(n.h2,{id:"podaffinity--podantiaffinity",children:"podAffinity & podAntiAffinity"}),"\n",(0,o.jsxs)(n.p,{children:["Pod\uac00 \uc2a4\ucf00\uc904\ub9c1\ub420 \ub54c ",(0,o.jsx)(n.code,{children:"topologyKey"}),"\uc870\uac74 \ub0b4\uc5d0\uc11c label\uc774 \uc77c\uce58\ud558\ub294 Pod\uc744 \ucc3e\uc2b5\ub2c8\ub2e4. ",(0,o.jsx)(n.code,{children:"podAffinity"}),"\uc758 \uacbd\uc6b0 \uc870\uac74\uc774 \uc77c\uce58\ud558\ub294 \ud1a0\ud3f4\ub85c\uc9c0\uc5d0 Pod\ub97c \ubc30\uce58\ud558\uace0, ",(0,o.jsx)(n.code,{children:"podAntiAffinity"}),"\uc758 \uacbd\uc6b0 \uc870\uac74\uc774 \uc77c\uce58\ud558\ub294 \ud1a0\ud3f4\ub85c\uc9c0\ub97c \ud53c\ud574\uc11c Pod\uc744 \ubc30\uce58\ud569\ub2c8\ub2e4."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"spec:\n  affinity:\n    podAffinity:\n      # \ud544\uc218\uc801\uc73c\ub85c \ub9cc\uc871\ud574\uc57c\ud558\ub294 \uaddc\uce59\uc785\ub2c8\ub2e4\n      requiredDuringSchedulingIgnoredDuringExecution:\n        - topologyKey: <labelKey>\n          # namespaces\uac00 null\uc774\uac70\ub098 \ube48 \ubc30\uc5f4\uc774\uace0 namespaceSelector\uac00 null\uc774\uba74 Pod\uc758 namespace\ub97c\n          # \uae30\uc900\uc73c\ub85c \ud569\ub2c8\ub2e4.\n          # namespaces:\n          #   - <namespace>\n          # namespaceSelector: {}\uc778 \uacbd\uc6b0 \ubaa8\ub4e0 namespace\ub97c \uae30\uc900\uc73c\ub85c \ud569\ub2c8\ub2e4.\n          namespaceSelector:\n            matchExpressions:\n              - key: <labelKey>\n                operator: In # In, NotIn, Exists, DoesNotExist\n                values:\n                  - <labelValue>\n          labelSelector:\n            matchExpressions:\n              - key: <labelKey>\n                operator: In # In, NotIn, Exists, DoesNotExist\n                values:\n                  - <labelValue>\n\n      # \uc120\ud638\ud558\ub294 Pod\uac00 \uc788\ub294 Node\uc5d0 \ub300\ud55c \uaddc\uce59\uc785\ub2c8\ub2e4\n      preferredDuringSchedulingIgnoredDuringExecution:\n        - weight: 1 # 1 ~ 100, \ub9cc\uc871\ud558\ub294 \uc870\uac74\uc758 weight\uc758 \ucd1d\ud569\uc774 \ub192\uc740 Node\ub97c \uc120\ud638\ud569\ub2c8\ub2e4\n          podAffinityTerm:\n            labelSelector:\n              matchExpressions:\n                - key: <labelKey>\n                  operator: In # In, NotIn, Exists, DoesNotExist\n                  values:\n                    - <labelValue>\n            topologyKey: <labelKey>\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"topologyKey"}),":Node","\uc758 label\uc744 \ud655\uc778\ud558\uc5ec ",(0,o.jsx)(n.code,{children:"<topologyKey>: <topologyValue>"}),"\uac00 \uac19\uc740 Node\ub97c \uae30\uc900\uc73c\ub85c selector\uc758 \uc870\uac74\uc744 \ud655\uc778\ud569\ub2c8\ub2e4","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"kubernetes.io/hostname"}),": \ud55c Node \ub0b4\uc5d0\uc11c \uc870\uac74\uc744 \ub9cc\uc871\ud574\uc57c\ud568"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"topology.kubernetes.io/zone"}),": \uac19\uc740 zone \ub0b4\uc5d0\uc11c \uc870\uac74\uc744 \ub9cc\uc871\ud574\uc57c\ud568"]}),"\n"]}),"\n"]}),"\n"]})]})}function f(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);