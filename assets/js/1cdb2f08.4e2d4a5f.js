"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[77605],{28453:(n,e,i)=>{i.d(e,{R:()=>o,x:()=>c});var s=i(96540);const l={},r=s.createContext(l);function o(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:o(n.components),s.createElement(r.Provider,{value:e},n.children)}},93558:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"mlops/mlops/workflow/mpi-operator/mpijob","title":"MPIJob","description":"MPIJob","source":"@site/docs/mlops/mlops/workflow/mpi-operator/mpijob.mdx","sourceDirName":"mlops/mlops/workflow/mpi-operator","slug":"/mlops/mlops/workflow/mpi-operator/mpijob","permalink":"/docs/mlops/mlops/workflow/mpi-operator/mpijob","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/mlops/workflow/mpi-operator/mpijob.mdx","tags":[],"version":"current","lastUpdatedAt":1743701067000,"frontMatter":{"id":"mpijob","title":"MPIJob","sidebar_label":"MPIJob","description":"MPIJob","keywords":["mpi","operator","mpijob"]},"sidebar":"mlops","previous":{"title":"CRD","permalink":"/docs/mlops/mlops/workflow/awx/crd"},"next":{"title":"OpenMPI","permalink":"/docs/mlops/mlops/workflow/mpi-operator/openmpi"}}');var l=i(74848),r=i(28453);const o={id:"mpijob",title:"MPIJob",sidebar_label:"MPIJob",description:"MPIJob",keywords:["mpi","operator","mpijob"]},c=void 0,d={},t=[{value:"MPIJob",id:"mpijob",level:2}];function h(n){const e={code:"code",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,r.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h2,{id:"mpijob",children:"MPIJob"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:'apiVersion: kubeflow.org/v2beta1\nkind: MPIJob\nspec:\n  mpiReplicaSpecs:\n    Launcher:\n      replicas: 1\n      template:\n        spec:\n          containers:\n            - name: mpi-launcher\n              image: ""\n              command: [mpirun]\n              args: []\n    Worker:\n      replicas: 2\n      template:\n        spec:\n          containers:\n            - name: mpi-worker\n              image: ""\n'})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"sshAuthMountPath: <dir>"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\uc0dd\uc131\ub41c SSH Secret\uc758 \uacf5\uac1c\ud0a4\uc640 \uac1c\uc778\ud0a4\uac00 \uac01\uac01 ",(0,l.jsx)(e.code,{children:"authorized_keys"}),", ",(0,l.jsx)(e.code,{children:"id_rsa"}),"\ub85c \ub9c8\uc6b4\ud2b8\ub429\ub2c8\ub2e4."]}),"\n",(0,l.jsxs)(e.li,{children:["\uae30\ubcf8\uac12\uc740 ",(0,l.jsx)(e.code,{children:"/root/.ssh"}),"\uc785\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"launcherCreationPolicy: AtStartup|WaitForWorkersReady"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"runLauncherAsWorker: false"})}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"slotsPerWorker: 1"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"hostfile\uc5d0 \uc124\uc815\ub420 slot \uc218\uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"runPolicy"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"backoffLimit: <number>"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Job\uc744 Failed\ub85c \uac04\uc8fc\ud558\uae30 \uc804\uc5d0 \uc7ac\uc2dc\ub3c4\ud558\ub294 \ud69f\uc218\uc785\ub2c8\ub2e4."}),"\n",(0,l.jsx)(e.li,{children:"\uae30\ubcf8\uac12\uc740 6\uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"ttlSecondsAfterFinished: <seconds>"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Job\uc774 \uc644\ub8cc\ub41c \ud6c4 \uc0ad\uc81c\ub418\uae30\uae4c\uc9c0 \ub300\uae30\ud558\ub294 \uc2dc\uac04\uc785\ub2c8\ub2e4."}),"\n",(0,l.jsx)(e.li,{children:"\uae30\ubcf8\uac12\uc740 \ubb34\ud55c\uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"cleanPodPolicy: Running|All|None"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Job\uc774 \uc644\ub8cc\ub41c \ud6c4 Pod\uc744 \uc815\ub9ac\ud558\ub294 \uc815\ucc45\uc785\ub2c8\ub2e4."}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"Running"}),": Running \uc0c1\ud0dc\uc778 Pod\uc744 \uc815\ub9ac\ud569\ub2c8\ub2e4. \uae30\ubcf8\uac12\uc785\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"mpiReplicaSpecs"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"Launcher"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Job\uc774 \uc0dd\uc131\ub429\ub2c8\ub2e4."}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"replicas: <replicas>"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\uae30\ubcf8\uac12\uc740 1 \uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"restartPolicy: Always|OnFailure|Never"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\uae30\ubcf8\uac12\uc740 ",(0,l.jsx)(e.code,{children:"Nerver"}),"\uc785\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"template: <core/v1.PodTemplateSpec>"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"Worker"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Pod\uc774 \uc0dd\uc131\ub429\ub2c8\ub2e4."}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"template"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"spec"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"containers"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"command: []"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\uae30\ubcf8 \uac12\uc73c\ub85c ",(0,l.jsx)(e.code,{children:"[/usr/sbin/sshd, -De]"}),"\uac00 \uc124\uc815\ub429\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(h,{...n})}):h(n)}}}]);