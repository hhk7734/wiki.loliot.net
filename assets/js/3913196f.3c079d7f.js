"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[88209],{28453:(e,n,c)=>{c.d(n,{R:()=>o,x:()=>r});var t=c(96540);const s={},i=t.createContext(s);function o(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(i.Provider,{value:n},e.children)}},53126:(e,n,c)=>{c.r(n),c.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"mlops/storage/ceph/object-gateway","title":"Ceph Object Gateway, S3 \ud638\ud658 Object Storage","description":"Ceph Object Gateway, S3 \ud638\ud658 Object Storage","source":"@site/docs/mlops/storage/ceph/object-gateway.mdx","sourceDirName":"mlops/storage/ceph","slug":"/mlops/storage/ceph/object-gateway","permalink":"/docs/mlops/storage/ceph/object-gateway","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/storage/ceph/object-gateway.mdx","tags":[],"version":"current","lastUpdatedAt":1746637031000,"frontMatter":{"id":"object-gateway","title":"Ceph Object Gateway, S3 \ud638\ud658 Object Storage","sidebar_label":"Object Storage","description":"Ceph Object Gateway, S3 \ud638\ud658 Object Storage","keywords":["ceph","object gateway","object storage"]},"sidebar":"storage","previous":{"title":"Block Device","permalink":"/docs/mlops/storage/ceph/rbd"},"next":{"title":"Provisioning","permalink":"/docs/mlops/storage/ceph/provisioning"}}');var s=c(74848),i=c(28453);const o={id:"object-gateway",title:"Ceph Object Gateway, S3 \ud638\ud658 Object Storage",sidebar_label:"Object Storage",description:"Ceph Object Gateway, S3 \ud638\ud658 Object Storage",keywords:["ceph","object gateway","object storage"]},r=void 0,l={},a=[{value:"Operator \uc124\uc815",id:"operator-\uc124\uc815",level:2},{value:"CephObjectStore \uc0dd\uc131",id:"cephobjectstore-\uc0dd\uc131",level:2},{value:"StorageClass \uc0dd\uc131",id:"storageclass-\uc0dd\uc131",level:2},{value:"ObjectBucketClaim \uc0dd\uc131",id:"objectbucketclaim-\uc0dd\uc131",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"operator-\uc124\uc815",children:"Operator \uc124\uc815"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="rook-ceph-values.yaml"',children:"rbacAggregate:\n  enableOBCs: true\n"})}),"\n",(0,s.jsx)(n.h2,{id:"cephobjectstore-\uc0dd\uc131",children:"CephObjectStore \uc0dd\uc131"}),"\n",(0,s.jsx)(n.admonition,{title:"Reference",type:"info",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://rook.io/docs/rook/latest-release/Storage-Configuration/Object-Storage-RGW/object-storage/",children:"Rook / Object Storage Overview"})}),"\n"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"apiVersion: ceph.rook.io/v1\nkind: CephObjectStore\nspec:\n  metadataPool:\n  dataPool:\n  gateway:\n    port: 80\n    instances: 1\n    priorityClassName: system-cluster-critical\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"metadataPool"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"failureDomain: <crushType|osd>"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\uae30\ubcf8 \uac12\uc740 ",(0,s.jsx)(n.code,{children:"host"}),"\uc785\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"replicated"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"size: <size>"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"dataPool"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"failureDomain: <crushType|osd>"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\uae30\ubcf8 \uac12\uc740 ",(0,s.jsx)(n.code,{children:"host"}),"\uc785\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"replicated"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"size: <size>"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"gateway"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"port: <port>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"instances: <replicas>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"resources"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"placement"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"nodeAffinity"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"podAffinity"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"podAntiAffinity"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"tolerations"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"topologySpreadConstraints"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"storageclass-\uc0dd\uc131",children:"StorageClass \uc0dd\uc131"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"apiVersion: storage.k8s.io/v1\nkind: StorageClass\n# operator\uc5d0 CSI_DRIVER_NAME_PREFIX\ub97c \uc124\uc815\ud558\uc9c0 \uc54a\uc558\ub2e4\uba74 operator\uac00 \uc18d\ud55c namespace\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\nprovisioner: <operatorNamespace>.ceph.rook.io/bucket\nvolumeBindingMode: Immediate\nreclaimPolicy: Delete\nparameters:\n  objectStoreName: <cephObjectStoreName>\n  objectStoreNamespace: <cephObjectStoreNamespace>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"objectbucketclaim-\uc0dd\uc131",children:"ObjectBucketClaim \uc0dd\uc131"}),"\n",(0,s.jsx)(n.admonition,{title:"Reference",type:"info",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://rook.io/docs/rook/latest-release/Storage-Configuration/Object-Storage-RGW/ceph-object-bucket-claim/",children:"Rook / Bucket Claim"})}),"\n"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"apiVersion: objectbucket.io/v1alpha1\nkind: ObjectBucketClaim\nspec:\n  generateBucketName: <bucketNamePrefix>\n  storageClassName: <storageClassName>\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"bucketName: <bucketName>"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"generateBucketName: <bucketNamePrefix>"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\ub3d9\uc77c\ud55c bucketName\uc5d0 \ub300\ud55c \ucda9\ub3cc\uc744 \ubc29\uc9c0\ud558\ub824\ub294 \uacbd\uc6b0 \uad8c\uc7a5\ub429\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"storageClassName: <storageClassName>"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"additionalConfig"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:'maxObjects: "1000"'})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:'maxSize: "2G"'})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.p,{children:["ObjectBucketClaim namespace\uc640 name\uc774 \ub3d9\uc77c\ud55c ConfigMap, Secret\uc774 \uc0dd\uc131\ub429\ub2c8\ub2e4. ConfigMap\uc5d0\ub294 ",(0,s.jsx)(n.code,{children:"BUCKET_HOST"}),", ",(0,s.jsx)(n.code,{children:"BUCKET_NAME"}),", ",(0,s.jsx)(n.code,{children:"BUCKET_PORT"}),", ",(0,s.jsx)(n.code,{children:"BUCKET_REGION"}),", ",(0,s.jsx)(n.code,{children:"BUCKET_SUBREGION"}),"\uc774 \uc800\uc7a5\ub418\uc5b4 \uc788\uace0, Secret\uc5d0\ub294 ",(0,s.jsx)(n.code,{children:"AWS_ACCESS_KEY_ID"}),", ",(0,s.jsx)(n.code,{children:"AWS_SECRET_ACCESS_KEY"}),"\uac00 \uc800\uc7a5\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4."]})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);