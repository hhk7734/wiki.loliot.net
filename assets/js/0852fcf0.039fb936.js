"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[13573],{28453:(t,e,n)=>{n.d(e,{R:()=>a,x:()=>s});var o=n(96540);const i={},r=o.createContext(i);function a(t){const e=o.useContext(r);return o.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function s(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(i):t.components||i:a(t.components),o.createElement(r.Provider,{value:e},t.children)}},73777:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>p,frontMatter:()=>a,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"mlops/network/istio/traffic-management/envoy-filter/ext-authz","title":"EnvoyFilter\ub85c \uc678\ubd80 \uc778\uc99d\uc11c\ubc84\uc640 \ud1b5\uc2e0\ud558\uae30","description":"EnvoyFilter\ub85c \uc678\ubd80 \uc778\uc99d\uc11c\ubc84\uc640 \ud1b5\uc2e0\ud558\uae30","source":"@site/docs/mlops/network/istio/traffic-management/envoy-filter/ext-authz.mdx","sourceDirName":"mlops/network/istio/traffic-management/envoy-filter","slug":"/mlops/network/istio/traffic-management/envoy-filter/ext-authz","permalink":"/docs/mlops/network/istio/traffic-management/envoy-filter/ext-authz","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/network/istio/traffic-management/envoy-filter/ext-authz.mdx","tags":[],"version":"current","lastUpdatedAt":1754575588000,"frontMatter":{"id":"ext-authz","title":"EnvoyFilter\ub85c \uc678\ubd80 \uc778\uc99d\uc11c\ubc84\uc640 \ud1b5\uc2e0\ud558\uae30","sidebar_label":"\uc678\ubd80 \uc778\uc99d\uc11c\ubc84","description":"EnvoyFilter\ub85c \uc678\ubd80 \uc778\uc99d\uc11c\ubc84\uc640 \ud1b5\uc2e0\ud558\uae30","keywords":["EnvoyFilter","ext-authz"]},"sidebar":"network","previous":{"title":"HTTP \uc555\ucd95 \uad00\ub9ac\ud558\uae30","permalink":"/docs/mlops/network/istio/traffic-management/envoy-filter/compressor"},"next":{"title":"\uc678\ubd80 \ud504\ub85c\uc138\uc11c","permalink":"/docs/mlops/network/istio/traffic-management/envoy-filter/ext-proc"}}');var i=n(74848),r=n(28453);const a={id:"ext-authz",title:"EnvoyFilter\ub85c \uc678\ubd80 \uc778\uc99d\uc11c\ubc84\uc640 \ud1b5\uc2e0\ud558\uae30",sidebar_label:"\uc678\ubd80 \uc778\uc99d\uc11c\ubc84",description:"EnvoyFilter\ub85c \uc678\ubd80 \uc778\uc99d\uc11c\ubc84\uc640 \ud1b5\uc2e0\ud558\uae30",keywords:["EnvoyFilter","ext-authz"]},s=void 0,l={},c=[{value:"ExtAuthz",id:"extauthz",level:2}];function u(t){const e={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,r.R)(),...t.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h2,{id:"extauthz",children:"ExtAuthz"}),"\n",(0,i.jsx)(e.admonition,{title:"Reference",type:"info",children:(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/ext_authz_filter",children:"Envoy / Configuration / HTTP / Filters / ExtAuthz"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/http/ext_authz/v3/ext_authz.proto",children:"Envoy / API / V3 / Extensions / Filters / HTTP / ExtAuthz"})}),"\n"]})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-yaml",children:'spec:\n  configPatches:\n    - applyTo: HTTP_FILTER\n      match:\n        context: GATEWAY\n        listener:\n          filterChain:\n            filter:\n              name: envoy.filters.network.http_connection_manager\n      patch:\n        operation: INSERT_BEFORE\n        value:\n          name: envoy.filters.http.ext_authz\n          typed_config:\n            "@type": type.googleapis.com/envoy.extensions.filters.http.ext_authz.v3.ExtAuthz\n            # status_on_error:\n            #   code: ServiceUnavailable # \ubb38\uc81c\uac00 \uc0dd\uae30\uba74 503\uc73c\ub85c \uc751\ub2f5\n            http_service:\n              server_uri:\n                uri: http://<service>.<namespace>.svc.cluster.local\n                cluster: outbound|8080||<service>.<namespace>.svc.cluster.local\n                timeout: 10s\n              authorization_request:\n                allowed_headers:\n                  patterns:\n                    - exact: cookie\n                    - exact: authorization\n                    - exact: x-auth-token\n              authorization_response:\n                allowed_upstream_headers:\n                  patterns:\n                    - exact: x-auth-request-email\n                    - exact: authorization\n    - applyTo: HTTP_ROUTE\n      match:\n        routeConfiguration:\n          vhost:\n            name: kubeflow.loliot.net:80\n            route:\n              name: <.VirtualService.spec.http.name> # \ud2b9\uc815\ud55c \uc774\ub984\uc758 \ub77c\uc6b0\ud305\uc5d0 \ub300\ud574 \uc801\uc6a9\n      patch:\n        operation: MERGE\n        value:\n          typed_per_filter_config:\n            envoy.filters.http.ext_authz:\n              "@type": type.googleapis.com/envoy.extensions.filters.http.ext_authz.v3.ExtAuthzPerRoute\n              disabled: true\n'})})]})}function p(t={}){const{wrapper:e}={...(0,r.R)(),...t.components};return e?(0,i.jsx)(e,{...t,children:(0,i.jsx)(u,{...t})}):u(t)}}}]);