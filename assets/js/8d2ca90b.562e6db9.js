"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[60734],{28453:(e,i,n)=>{n.d(i,{R:()=>a,x:()=>c});var s=n(96540);const r={},l=s.createContext(r);function a(e){const i=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(l.Provider,{value:i},e.children)}},50237:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>d,contentTitle:()=>c,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"lang/javascript/libraries/prisma/migrate","title":"Prisma\ub85c \uc2a4\ud0a4\ub9c8 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud558\uae30","description":"Prisma\ub85c \uc2a4\ud0a4\ub9c8 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud558\uae30","source":"@site/docs/lang/javascript/libraries/prisma/migrate.mdx","sourceDirName":"lang/javascript/libraries/prisma","slug":"/lang/javascript/libraries/prisma/migrate","permalink":"/docs/lang/javascript/libraries/prisma/migrate","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/lang/javascript/libraries/prisma/migrate.mdx","tags":[],"version":"current","lastUpdatedAt":1743962785000,"frontMatter":{"id":"migrate","title":"Prisma\ub85c \uc2a4\ud0a4\ub9c8 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud558\uae30","sidebar_label":"Migrate","description":"Prisma\ub85c \uc2a4\ud0a4\ub9c8 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud558\uae30","keywords":["prisma","schema","migrate","migration"]},"sidebar":"javascript","previous":{"title":"Prisma ORM","permalink":"/docs/lang/javascript/libraries/prisma/"},"next":{"title":"Authentication","permalink":"/docs/lang/javascript/libraries/firebase/authentication"}}');var r=n(74848),l=n(28453);const a={id:"migrate",title:"Prisma\ub85c \uc2a4\ud0a4\ub9c8 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud558\uae30",sidebar_label:"Migrate",description:"Prisma\ub85c \uc2a4\ud0a4\ub9c8 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud558\uae30",keywords:["prisma","schema","migrate","migration"]},c=void 0,d={},t=[{value:"\uc2a4\ud0a4\ub9c8 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uad00\ub9ac",id:"\uc2a4\ud0a4\ub9c8-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uad00\ub9ac",level:2},{value:"DevOps(\uac1c\ubc1c \ubd80\ud130 \ubc30\ud3ec\uae4c\uc9c0)",id:"devops\uac1c\ubc1c-\ubd80\ud130-\ubc30\ud3ec\uae4c\uc9c0",level:2},{value:"\ub864\ubc31",id:"\ub864\ubc31",level:2},{value:"\ub864\ubc31 \ud30c\uc77c \uc0dd\uc131",id:"\ub864\ubc31-\ud30c\uc77c-\uc0dd\uc131",level:3},{value:"\ub864\ubc31",id:"\ub864\ubc31-1",level:3},{value:"CLI Reference",id:"cli-reference",level:2}];function o(e){const i={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.h2,{id:"\uc2a4\ud0a4\ub9c8-\ub9c8\uc774\uadf8\ub808\uc774\uc158-\uad00\ub9ac",children:"\uc2a4\ud0a4\ub9c8 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uad00\ub9ac"}),"\n",(0,r.jsxs)(i.admonition,{type:"warning",children:[(0,r.jsx)(i.p,{children:"MongoDB\ub294"}),(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"prisma db push"}),"\ub9cc \uc9c0\uc6d0\ud558\ubbc0\ub85c \uc774 \ubb38\uc11c\uac00 \uc801\uc6a9\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(i.li,{children:"standalone\uc778 \uacbd\uc6b0 \ud2b8\ub79c\uc7ad\uc158\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc73c\ubbc0\ub85c \uc815\uc0c1 \uc791\ub3d9\ud558\uc9c0 \uc54a\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n"]})]}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"prisma/migrations"})," \ub514\ub809\ud1a0\ub9ac\uc758 ",(0,r.jsx)(i.code,{children:"<migration>/migration.sql"})," \ud30c\uc77c\uc744 \ud1b5\ud574 \uc2a4\ud0a4\ub9c8 \ubcc0\uacbd \uc774\ub825\uc744 \uad00\ub9ac\ud569\ub2c8\ub2e4.","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"<migration>"}),"=",(0,r.jsx)(i.code,{children:"<timestamp>_<name>"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\ub370\uc774\ud130\ubca0\uc774\uc2a4\uc758 ",(0,r.jsx)(i.code,{children:"_prisma_migrations"})," \ud14c\uc774\ube14\uc5d0 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc801\uc6a9 \uc774\ub825\uc744 \uad00\ub9ac\ud569\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"devops\uac1c\ubc1c-\ubd80\ud130-\ubc30\ud3ec\uae4c\uc9c0",children:"DevOps(\uac1c\ubc1c \ubd80\ud130 \ubc30\ud3ec\uae4c\uc9c0)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\uac1c\ubc1c","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"\uc2a4\ud0a4\ub9c8 \ud30c\uc77c\uc744 \uc218\uc815\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsxs)(i.li,{children:["\ub9c8\uc774\uadf8\ub808\uc774\uc158 \ub418\ub3cc\ub9ac\uae30\ub97c \uc704\ud55c ",(0,r.jsx)(i.code,{children:"down.sql"}),"\ud30c\uc77c\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4.","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"#%EB%A1%A4%EB%B0%B1-%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1",children:"\ub864\ubc31 \ud30c\uc77c \uc0dd\uc131"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"prisma migrate dev"})," \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(i.li,{children:["prisma\uc5d0\uc11c \uc9c0\uc6d0\ud558\uc9c0\uc54a\ub294 \uc635\uc158\uc774\ub098, \ub370\uc774\ud130 \uc774\ub3d9 \ub4f1\uc774 \ud544\uc694\ud55c \uacbd\uc6b0","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"prisma migrate dev --create-only"})," \uba85\ub839\uc5b4\ub85c \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud30c\uc77c\ub9cc \uc0dd\uc131\ud558\uace0"]}),"\n",(0,r.jsx)(i.li,{children:"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud30c\uc77c\uc744 \uc218\uc815\ud55c \ud6c4"}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"prisma migrate dev"})," \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \ucd08\uae30\ud654\ud558\ub824\uba74 ",(0,r.jsx)(i.code,{children:"prisma migrate reset"})," \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4.","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"seed \uc124\uc815\uc774 \ub418\uc5b4\uc788\ub294 \uacbd\uc6b0 \ucd08\uae30\ud654 \ud6c4 \uc790\ub3d9\uc73c\ub85c \uc801\uc6a9\ub429\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["\ubc30\ud3ec","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["CI/CD \ud30c\uc774\ud504\ub77c\uc778\uc5d0\uc11c \ub9c8\uc774\uadf8\ub808\uc774\uc158\ud558\ub294 \uacbd\uc6b0","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["\uc560\ud50c\ub9ac\ucf00\uc774\uc158 \ubc30\ud3ec \uc804\uc5d0 ",(0,r.jsx)(i.code,{children:"prisma migrate deploy"})," \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(i.li,{children:["Kubernetes\ub97c \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0","\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.code,{children:"initContainers"}),"\uc5d0\uc11c ",(0,r.jsx)(i.code,{children:"prisma migrate deploy"})," \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(i.admonition,{type:"danger",children:(0,r.jsx)(i.p,{children:"\ubc30\ud3ec\ub41c \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc744 \ub864\ubc31\ud558\ub294 \uacbd\uc6b0, \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc2a4\ud0a4\ub9c8\ub3c4 \ub864\ubc31\ub418\ub294 \uac83\uc740 \uc544\ub2c8\ubbc0\ub85c \uc9c1\uc811 \ub864\ubc31\ud574\uc57c\ud569\ub2c8\ub2e4."})}),"\n",(0,r.jsx)(i.h2,{id:"\ub864\ubc31",children:"\ub864\ubc31"}),"\n",(0,r.jsx)(i.h3,{id:"\ub864\ubc31-\ud30c\uc77c-\uc0dd\uc131",children:"\ub864\ubc31 \ud30c\uc77c \uc0dd\uc131"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://www.prisma.io/docs/orm/prisma-migrate/workflows/generating-down-migrations",children:"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \ub864\ubc31 \ud30c\uc77c \uc0dd\uc131"})}),"\n"]}),"\n",(0,r.jsx)(i.admonition,{type:"warning",children:(0,r.jsx)(i.p,{children:"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \ud30c\uc77c\uc744 \uc0dd\uc131\ud558\uae30 \uc804\uc5d0 \uc218\ud589\ud574\uc57c\ud569\ub2c8\ub2e4."})}),"\n",(0,r.jsx)(i.p,{children:"\uc2a4\ud0a4\ub9c8 \ubcc0\uacbd \ud6c4 \uc544\ub798 \ub450 \uba85\ub839\uc5b4 \uc911 \ud558\ub098\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4. \uccab\ubc88\uc9f8 \uba85\ub839\uc5b4\uac00 \ub354 robust\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-shell",children:"prisma migrate diff \\\n  --from-schema-datamodel prisma/schema.prisma \\\n  --to-migrations prisma/migrations \\\n  --shadow-database-url $SHADOW_DATABASE_URL \\\n  --script \\\n  > down.sql\n"})}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-shell",children:"prisma migrate diff \\\n  --from-schema-datamodel prisma/schema.prisma \\\n  --to-schema-datasource prisma/schema.prisma \\\n  --script \\\n  > down.sql\n"})}),"\n",(0,r.jsxs)(i.p,{children:[(0,r.jsx)(i.code,{children:"prisma migrate dev"}),"\ub97c \uc218\ud589 \ud6c4 \uc0dd\uc131\ub41c \ub9c8\uc774\uadf8\ub808\uc774\uc158 \ub514\ub809\ud1a0\ub9ac\ub85c ",(0,r.jsx)(i.code,{children:"down.sql"})," \ud30c\uc77c\uc744 \uc62e\uae41\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-shell",metastring:'title="Example"',children:"prisma/\n\u251c\u2500\u2500 migrations/\n\u2502   \u251c\u2500\u2500 20240719141550_init/\n\u2502   \u2502   \u2514\u2500\u2500 migration.sql\n\u2502   \u251c\u2500\u2500 20240719163748_add_post/\n\u2502   \u2502   \u251c\u2500\u2500 down.sql\n\u2502   \u2502   \u2514\u2500\u2500 migration.sql\n\u2502   \u2514\u2500\u2500 migration_lock.toml\n\u2514\u2500\u2500 schema.prisma\n"})}),"\n",(0,r.jsx)(i.h3,{id:"\ub864\ubc31-1",children:"\ub864\ubc31"}),"\n",(0,r.jsx)(i.p,{children:"\ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \ud655\uc778\ud558\uc5ec \uc218\uc791\uc5c5\uc73c\ub85c \ub864\ubc31\ud558\uac70\ub098 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-shell",children:"prisma db execute --file prisma/migrations/<migration>/down.sql\n"})}),"\n",(0,r.jsx)(i.p,{children:"\ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc2e4\ud328 \ub54c\ubb38\uc5d0 \ub864\ubc31\uc744 \ud55c \uacbd\uc6b0, \ud574\ub2f9 \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc774 \ub864\ubc31\ub418\uc5c8\ub2e4\ub294 \uac83\uc744 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \ud45c\uc2dc\ud558\uae30 \uc704\ud574 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-shell",children:"prisma migrate resolve --rolled-back <migration>\n"})}),"\n",(0,r.jsxs)(i.p,{children:["\ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc2e4\ud328\uac00 \uc544\ub2cc \ub864\ubc31\uc758 \uacbd\uc6b0 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc758 ",(0,r.jsx)(i.code,{children:"_prisma_migrations"}),"\uc5d0\uc11c \ub864\ubc31\ub41c \ub9c8\uc774\uadf8\ub798\uc774\uc158\uc744 \uc0ad\uc81c\ud574\uc57c\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(i.h2,{id:"cli-reference",children:"CLI Reference"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.a,{href:"https://www.prisma.io/docs/orm/reference/prisma-cli-reference",children:"Prisma CLI Reference"})}),"\n"]})]})}function m(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);