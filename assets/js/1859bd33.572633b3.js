"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[2882],{12738:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"mlops/kubernetes/configuration/env","title":"Pod Environment Variables","description":"Pod Environment Variables","source":"@site/docs/mlops/kubernetes/configuration/env.mdx","sourceDirName":"mlops/kubernetes/configuration","slug":"/mlops/kubernetes/configuration/env","permalink":"/docs/mlops/kubernetes/configuration/env","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/kubernetes/configuration/env.mdx","tags":[],"version":"current","lastUpdatedAt":1740111436000,"frontMatter":{"id":"env","title":"Pod Environment Variables","sidebar_label":"Pod env","description":"Pod Environment Variables","keywords":["kubernetes","pod","deployment","environment"]},"sidebar":"kubernetes","previous":{"title":"PersistentVolume","permalink":"/docs/mlops/kubernetes/storage/persistent-volume"},"next":{"title":"ConfigMap","permalink":"/docs/mlops/kubernetes/configuration/configmap"}}');var r=s(74848),o=s(28453);const d={id:"env",title:"Pod Environment Variables",sidebar_label:"Pod env",description:"Pod Environment Variables",keywords:["kubernetes","pod","deployment","environment"]},l=void 0,t={},c=[{value:"spec.containers.env",id:"speccontainersenv",level:2},{value:"spec.containers.envFrom",id:"speccontainersenvfrom",level:2},{value:"Pod fields to env",id:"pod-fields-to-env",level:2},{value:"Container fields to env",id:"container-fields-to-env",level:2}];function a(e){const n={a:"a",code:"code",h2:"h2",li:"li",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"speccontainersenv",children:"spec.containers.env"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/inject-data-application/define-interdependent-environment-variables/",children:"https://kubernetes.io/docs/tasks/inject-data-application/define-interdependent-environment-variables/"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'spec:\n  containers:\n    - env:\n        - name: SERVICE_PORT\n          value: "8080"\n        - name: SERVICE_IP\n          value: "172.16.1.2"\n        - name: UNCHANGED_REFERENCE\n          # SCHEME\uc774 \ub2e4\uc74c\uc5d0 \uc815\uc758\ub418\uc5b4 \uc788\uc73c\ubbc0\ub85c `$(SCHEME)://172.16.1.2:8080` \ub85c \uc124\uc815\ub428\n          value: "$(SCHEME)://$(SERVICE_IP):$(SERVICE_PORT)"\n        - name: SCHEME\n          value: "https"\n        - name: SERVICE_ADDRESS\n          # \uad00\ub828 \ubcc0\uc218\uac00 \uc774\uc804\uc5d0 \uc815\uc758\ub3c4\uc5b4 \uc788\uc73c\ubbc0\ub85c `https://172.16.1.2:8080`\ub85c \uc124\uc815\ub428\n          value: "$(SCHEME)://$(SERVICE_IP):$(SERVICE_PORT)"\n        - name: ESCAPED_REFERENCE\n          # SCHEME\uc774 escape\ub418\uc5b4 \uc788\uc73c\ubbc0\ub85c `$(SCHEME)://172.16.1.2:8080`\ub85c \uc124\uc815\ub428\n          value: "$$(SCHEME)://$(SERVICE_IP):$(SERVICE_PORT)"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"speccontainersenvfrom",children:"spec.containers.envFrom"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/mlops/kubernetes/configuration/configmap",children:"ConfigMap"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/mlops/kubernetes/configuration/secret",children:"Secret"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"pod-fields-to-env",children:"Pod fields to env"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/workloads/pods/downward-api/#downwardapi-fieldRef",children:"https://kubernetes.io/docs/concepts/workloads/pods/downward-api/#downwardapi-fieldRef"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: <podName>\nspec:\n  containers:\n    - env:\n        - name: <envName>\n          valueFrom:\n            fieldRef:\n              fieldPath: <fieldPath>\n        - name: POD_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"<fieldPath>"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"metadata.name"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"metadata.namespace"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"metadata.uid"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"metadata.anonotations[<key>]"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"metadata.labels[<key>]"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"spec.serviceAccountName"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"spec.nodeName"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"status.hostIP"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"status.podIP"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"container-fields-to-env",children:"Container fields to env"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/workloads/pods/downward-api/#downwardapi-resourceFieldRef",children:"https://kubernetes.io/docs/concepts/workloads/pods/downward-api/#downwardapi-resourceFieldRef"})}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: <podName>\nspec:\n  containers:\n    - name: <containerName>\n      env:\n        - name: <envName>\n          valueFrom:\n            resourceFieldRef:\n              # containerName: <containerName>\n              resource: <resource>\n        - name: CONTAINER_CPU_LIMIT\n          valueFrom:\n            resourceFieldRef:\n              resource: limits.cpu\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"<resource>"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"requests.cpu"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"requests.memory"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"requests.hugepages-*"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"requests.ephemeral-storage"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"limits.cpu"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"limits.memory"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"limits.hugepages-*"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"limits.ephemeral-storage"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"CPU, Memory \uc124\uc815\uc774 \uc5c6\uc73c\uba74 kubelet\uc774 \ud560\ub2f9\uac00\ub2a5\ud55c \ucd5c\ub300 \ud560\ub2f9 \uac00\ub2a5 \uac12\uc744 \uc0ac\uc6a9\ud558\uac8c \ub429\ub2c8\ub2e4"}),"\n",(0,r.jsxs)(n.li,{children:["CPU\ub294 \uc62c\ub9bc\ub41c Core \uc218\uac00 \uc0ac\uc6a9\ub429\ub2c8\ub2e4(",(0,r.jsx)(n.code,{children:"250m"})," -> ",(0,r.jsx)(n.code,{children:"1"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:["Memory\ub294 \ubc14\uc774\ud2b8 \ub2e8\uc704 \uac12\uc774 \uc0ac\uc6a9\ub429\ub2c8\ub2e4(",(0,r.jsx)(n.code,{children:"64Mi"})," -> ",(0,r.jsx)(n.code,{children:"67108864"}),")"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>l});var i=s(96540);const r={},o=i.createContext(r);function d(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);