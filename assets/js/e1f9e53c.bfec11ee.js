"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[70378],{10415:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>x,frontMatter:()=>d,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"mlops/mlops/auth/oidc","title":"OpenID Connect(OIDC)","description":"OpenID Connect(OIDC)","source":"@site/docs/mlops/mlops/auth/oidc.mdx","sourceDirName":"mlops/mlops/auth","slug":"/mlops/mlops/auth/oidc","permalink":"/docs/mlops/mlops/auth/oidc","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/mlops/auth/oidc.mdx","tags":[],"version":"current","lastUpdatedAt":1746033570000,"frontMatter":{"id":"oidc","title":"OpenID Connect(OIDC)","sidebar_label":"OpenID Connect(OIDC)","description":"OpenID Connect(OIDC)","keywords":["oidc"]},"sidebar":"mlops","previous":{"title":"k8s \uc778\uac00(Authz); RBAC","permalink":"/docs/mlops/mlops/auth/rbac"},"next":{"title":"TLS","permalink":"/docs/mlops/mlops/auth/tls/"}}');var l=i(74848),c=i(28453);const d={id:"oidc",title:"OpenID Connect(OIDC)",sidebar_label:"OpenID Connect(OIDC)",description:"OpenID Connect(OIDC)",keywords:["oidc"]},r=void 0,o={},t=[{value:"OIDC",id:"oidc",level:2},{value:"Discovery",id:"discovery",level:2},{value:"Authorization Code Flow",id:"authorization-code-flow",level:2},{value:"Test",id:"test",level:2},{value:"token_endpoint",id:"token_endpoint",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",mermaid:"mermaid",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"oidc",children:"OIDC"}),"\n",(0,l.jsx)(n.admonition,{title:"Reference",type:"info",children:(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://openid.net/developers/how-connect-works/",children:"How OpenID Connect Works"})}),"\n"]})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["OIDC","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"OpenID Connect"}),"\n",(0,l.jsx)(n.li,{children:"Minimal: Core"}),"\n",(0,l.jsx)(n.li,{children:"Dynamic: Minimal, Discovery, Dynamic Client Registration"}),"\n",(0,l.jsx)(n.li,{children:"Complete: Dynamic, Session Management, Form Post Response Mode"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["OP","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"OpenID Connect Provider"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["RP","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Relying Party"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"discovery",children:"Discovery"}),"\n",(0,l.jsx)(n.admonition,{title:"Reference",type:"info",children:(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-discovery-1_0.html",children:"OpenID Connect Discovery 1.0"})}),"\n"]})}),"\n",(0,l.jsxs)(n.p,{children:["OP\ub294 ",(0,l.jsx)(n.code,{children:"GET <issuer>/.well-known/openid-configuration"}),"\ub97c \ud1b5\ud574 \uc124\uc815\uc815\ubcf4\ub97c \ub178\ucd9c\ud569\ub2c8\ub2e4."]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\ud544\uc218(required)","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"issuer: <issuer>"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["OP\uac00 \ubc1c\uae09\ud55c ID token\uc758 ",(0,l.jsx)(n.code,{children:"iss"}),"\uc758 \uac12\uacfc \uac19\uc544\uc57c\ud569\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"authorization_endpoint: <authorizationEndpoint>"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\uc778\uc99d \ucf54\ub4dc\ub098 \ud1a0\ud070\uc744 \ubc1c\uae09\ud558\ub294 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"token_endpoint: <tokenEndpoint>"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\ud1a0\ud070\uc744 \ubc1c\uae09\ud558\uac70\ub098 \uac31\uc2e0\ud558\ub294 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\uc785\ub2c8\ub2e4."}),"\n",(0,l.jsx)(n.li,{children:"Implicit Flow\ub9cc \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 \ud544\uc218\uac00 \uc544\ub2d9\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"jwks_uri: <jwksURI>"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"RP\uac00 OP\ub85c\ubd80\ud130 \ubc1b\uc740 \ud1a0\ud070\uc758 \uc11c\uba85\uc744 \uac80\uc99d\ud558\uae30 \uc704\ud574 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub294 JWK \uc815\ubcf4\ub97c \uc81c\uacf5\ud558\ub294 URI\uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"response_types_supported: [<responseType>]"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Dynamic OP\ub294 ",(0,l.jsx)(n.code,{children:"code"}),", ",(0,l.jsx)(n.code,{children:"id_token"}),", ",(0,l.jsx)(n.code,{children:"id_token token"}),"\uc744 \ud544\uc218\ub85c \uc9c0\uc6d0\ud574\uc57c\ud569\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"subject_types_supported: [<subjectType>]"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"public"}),", ",(0,l.jsx)(n.code,{children:"pairwise"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"id_token_signing_alg_values_supported: [<alg>]"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"RS256"}),"\ub97c \ud544\uc218\ub85c \uc9c0\uc6d0\ud574\uc57c\ud569\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\ucd94\ucc9c(recommended)","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"userinfo_endpoint: <userinfoEndpoint>"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"access_token"}),"\uc5d0 \ud574\ub2f9\ud558\ub294 \uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \uc81c\uacf5\ud558\ub294 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\uc785\ub2c8\ub2e4."]}),"\n",(0,l.jsx)(n.li,{children:"\uc774 \uc5d4\ub4dc\ud3ec\uc778\ud2b8\ub97c \uc0ac\uc6a9\ud558\ub294 \uac83\uc73c\ub85c \ud1a0\ud070 \uac80\uc99d\uc744 \ub300\uccb4\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"registration_endpoint: <registrationEndpoint>"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"scopes_supported: [<scope>]"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"openid"}),"\ub97c \ud544\uc218\ub85c \uc9c0\uc6d0\ud574\uc57c\ud569\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"claims_supported: [<claim>]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"end_session_endpoint: <endSessionEndpoint>"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\uc120\ud0dd(optional)","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"response_modes_supported: [<responseMode>]"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"grant_types_supported: [<grantType>]"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Dynamic OP\ub294 ",(0,l.jsx)(n.code,{children:"authorization_code"}),", ",(0,l.jsx)(n.code,{children:"implicit"}),"\uc744 \ud544\uc218\ub85c \uc9c0\uc6d0\ud574\uc57c\ud569\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"acr_values_supported: [<acrValue>]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"id_token_encryption_alg_values_supported: [<alg>]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"id_token_encryption_enc_values_supported: [<enc>]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"userinfo_signing_alg_values_supported: [<alg>]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"userinfo_encryption_alg_values_supported: [<alg>]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"userinfo_encryption_enc_values_supported: [<enc>]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"request_object_signing_alg_values_supported: [<alg>]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"request_object_encryption_alg_values_supported: [<alg>]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"request_object_encryption_enc_values_supported: [<enc>]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"token_endpoint_auth_methods_supported: [<method>]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"token_endpoint_auth_signing_alg_values_supported: [<alg>]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"display_values_supported: [<display>]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"claim_types_supported: [<claimType>]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"service_documentation: <serviceDocumentationURL>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"claims_locales_supported: [<locale>]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ui_locales_supported: [<locale>]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"claims_parameter_supported: <boolean>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"request_parameter_supported: <boolean>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"request_uri_parameter_supported: <boolean>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"require_request_uri_registration: <boolean>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"op_policy_uri: <policyURI>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"op_tos_uri: <tosURI>"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"authorization-code-flow",children:"Authorization Code Flow"}),"\n",(0,l.jsx)(n.admonition,{title:"Reference",type:"info",children:(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://openid.net/specs/openid-connect-core-1_0.html#CodeFlowAuth",children:"OpenID Connect Core 1.0 # Authorization Code Flow"})}),"\n"]})}),"\n",(0,l.jsx)("center",{children:(0,l.jsx)(n.mermaid,{value:"sequenceDiagram\n    participant Client\n    participant RP\n    participant OP\n    participant ResourceServer\n\n    Client->>RP: \uc778\uc99d \uc694\uccad or \ub9ac\uc18c\uc2a4 \uc694\uccad\n    RP--\x3e>Client: \ub9ac\ub2e4\uc774\ub809\ud2b8 <auth>\n\n    Client->>OP: <auth>\n    note over Client,OP: \uc778\uc99d \ubc0f \ub3d9\uc758\n    OP--\x3e>Client: \ub9ac\ub2e4\uc774\ub809\ud2b8 <authCallback>\n\n    Client->>RP: <authCallback>\n    RP->>OP: <token>\n    OP--\x3e>RP: access_token, id_token, refresh_token\n    RP--\x3e>Client: \ub9ac\ub2e4\uc774\ub809\ud2b8\n\n    Client->>RP: \ub9ac\uc18c\uc2a4 \uc694\uccad\n    RP->>RP: \ud1a0\ud070 \uac80\uc99d(JWK or userinfo)\n    RP->>ResourceServer: \ub9ac\uc18c\uc2a4 \uc694\uccad\n    ResourceServer--\x3e>RP: \ub9ac\uc18c\uc2a4 \uc751\ub2f5\n    RP--\x3e>Client: \ub9ac\uc18c\uc2a4 \uc751\ub2f5"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<auth>"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"GET <authorizationEndpoint>"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Query","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"client_id=<clientID>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"redirect_uri=<authCallbackURL>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"response_type=code"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"scope=<scope>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"state=<state>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"nonce=<nonce>"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<authCallback>"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"GET <authCallbackURL>"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Query","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"code=<code>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"state=<state>"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<token>"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"POST <tokenEndpoint>"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Header","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"Authorization: Basic <base64(<clientID>:<clientSecret>)>"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Body","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"grant_type=authorization_code"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"code=<code>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"redirect_rui=<redirectURI>"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"test",children:"Test"}),"\n",(0,l.jsx)(n.h3,{id:"token_endpoint",children:"token_endpoint"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"curl '<token_endpoint>' \\\n  -H 'Content-Type: application/x-www-form-urlencoded' \\\n  -d 'client_id=<clientID>' \\\n  -d 'client_secret=<clientSecret>' \\\n  -d 'grant_type=password' \\\n  -d 'username=<user>' \\\n  -d 'password=<password>' \\\n| jq '.'\n"})})]})}function x(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>r});var s=i(96540);const l={},c=s.createContext(l);function d(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);