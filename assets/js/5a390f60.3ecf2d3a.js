"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[30961],{59858:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>t,metadata:()=>o,toc:()=>d});var l=n(74848),s=n(28453),a=n(98180);const t={id:"kiali",title:"Kiali",sidebar_label:"Kiali",description:"Kiali",keywords:["kiali","istio"]},r=void 0,o={id:"mlops/mlops/network/istio/kiali",title:"Kiali",description:"Kiali",source:"@site/docs/mlops/mlops/network/istio/kiali.mdx",sourceDirName:"mlops/mlops/network/istio",slug:"/mlops/mlops/network/istio/kiali",permalink:"/docs/mlops/mlops/network/istio/kiali",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1722572057e3,frontMatter:{id:"kiali",title:"Kiali",sidebar_label:"Kiali",description:"Kiali",keywords:["kiali","istio"]},sidebar:"mlops",previous:{title:"Authorization",permalink:"/docs/mlops/mlops/network/istio/security/authorization/"},next:{title:"Jaeger",permalink:"/docs/mlops/mlops/network/istio/jaeger"}},c={},d=[{value:"Kiali architecture",id:"kiali-architecture",level:2},{value:"\uc124\uce58",id:"\uc124\uce58",level:2},{value:"Keycloak",id:"keycloak",level:2},{value:"Service",id:"service",level:2},{value:"Reference",id:"reference",level:2}];function h(e){const i={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.h2,{id:"kiali-architecture",children:"Kiali architecture"}),"\n",(0,l.jsx)("center",{children:(0,l.jsx)("img",{src:(0,a.Ay)("img/mlops/mlops/istio/kiali-architecture.png")})}),"\n",(0,l.jsx)(i.h2,{id:"\uc124\uce58",children:"\uc124\uce58"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-shell",children:"helm repo add kiali https://kiali.org/helm-charts\n"})}),"\n",(0,l.jsx)(i.p,{children:"Istio \ubc84\uc804\uc5d0 \ub530\ub77c \ud638\ud658\ub418\ub294 Kiali \ubc84\uc804\uc744 \uc120\ud0dd\ud574\uc57c\ud569\ub2c8\ub2e4."}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.a,{href:"https://kiali.io/docs/installation/installation-guide/prerequisites/",children:"https://kiali.io/docs/installation/installation-guide/prerequisites/"})}),"\n"]}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-shell",children:"helm repo update kiali \\\n&& helm search repo kiali -l | head -n 10\n"})}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-shell",children:"mkdir -p istio/kiali/{base,helm}\n"})}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-shell",children:"helm show values kiali/kiali-server \\\n    --version 1.50.0 \\\n    > istio/kiali/helm/values.yaml\n"})}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-yaml",metastring:'title="istio/kiali/helm/values.yaml"',children:"auth:\n  strategy: anonymous\n\nexternal_services:\n  custom_dashboards:\n    enabled: true\n  prometheus:\n    url: http://prometheus-operator-prometheus.monitoring:9090 # \ud504\ub85c\uba54\ud14c\uc6b0\uc2a4 \uc11c\ube44\uc2a4 \uc8fc\uc18c\n  grafana:\n    url: http://prometheus-operator-grafana.monitoring # \uadf8\ub77c\ud30c\ub098 \uc11c\ube44\uc2a4 \uc8fc\uc18c\n"})}),"\n",(0,l.jsx)(i.admonition,{type:"warning",children:(0,l.jsx)(i.p,{children:"Grafana\ub294 \uc544\uc9c1 \ud14c\uc2a4\ud2b8 \ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-shell",children:"helm upgrade kiali kiali/kiali-server \\\n    --install \\\n    --version 1.50.0 \\\n    -n istio-system \\\n    -f istio/kiali/helm/values.yaml\n"})}),"\n",(0,l.jsx)(i.h2,{id:"keycloak",children:"Keycloak"}),"\n",(0,l.jsx)(i.p,{children:"Kubernetes api-server\uacfc OIDC\ub97c \uc5f0\uacb0\ud569\ub2c8\ub2e4."}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-yaml",metastring:'title="istio/kiali/helm/values.yaml"',children:'auth:\n  strategy: "openid"\n  openid:\n    client_id: <k8s>\n    issuer_uri: <oidc-issuer-uri>\n    scopes:\n      - "openid"\n      - "profile"\n      - "email"\n      - "groups"\n    username_claim: "email"\n\ndeployment:\n  secret_name: "kiali"\n'})}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Secret\nmetadata:\n  name: kiali\n  namespace: istio-system\n  labels:\n    app: kiali\ntype: Opaque\nstringData:\n  oidc-secret: <oidc-secret>\n"})}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-yaml",children:'apiVersion: networking.istio.io/v1alpha3\nkind: VirtualService\nmetadata:\n  name: kiali-vscv\n  namespace: istio-system\nspec:\n  hosts:\n    - <kiali-host>\n  gateways:\n    - <gateway>\n  http:\n    - match:\n        - uri:\n            prefix: "/"\n      headers:\n        request:\n          set:\n            X-Forwarded-Port: "443"\n      route:\n        - destination:\n            host: kiali.istio-system.svc.cluster.local\n            port:\n              number: 20001\n'})}),"\n",(0,l.jsx)(i.h2,{id:"service",children:"Service"}),"\n",(0,l.jsx)(i.pre,{children:(0,l.jsx)(i.code,{className:"language-shell",children:"kubectl port-forward -n istio-system service/kiali 8007:20001\n"})}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.a,{href:"http://localhost:8007",children:"http://localhost:8007"})}),"\n"]}),"\n",(0,l.jsx)(i.h2,{id:"reference",children:"Reference"}),"\n",(0,l.jsxs)(i.ul,{children:["\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.a,{href:"https://kiali.io/docs/architecture/architecture/",children:"https://kiali.io/docs/architecture/architecture/"})}),"\n",(0,l.jsx)(i.li,{children:(0,l.jsx)(i.a,{href:"https://kiali.io/docs/configuration/",children:"https://kiali.io/docs/configuration/"})}),"\n"]})]})}function p(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,l.jsx)(i,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},28453:(e,i,n)=>{n.d(i,{R:()=>t,x:()=>r});var l=n(96540);const s={},a=l.createContext(s);function t(e){const i=l.useContext(a);return l.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),l.createElement(a.Provider,{value:i},e.children)}}}]);