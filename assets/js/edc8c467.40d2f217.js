"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[91021],{12674:(e,l,n)=>{n.r(l),n.d(l,{assets:()=>r,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"lang/db/sql/mysql/lock","title":"Lock","description":"Lock","source":"@site/docs/lang/db/sql/mysql/lock.mdx","sourceDirName":"lang/db/sql/mysql","slug":"/lang/db/sql/mysql/lock","permalink":"/docs/lang/db/sql/mysql/lock","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/lang/db/sql/mysql/lock.mdx","tags":[],"version":"current","lastUpdatedAt":1733340536000,"frontMatter":{"id":"lock","title":"Lock","sidebar_label":"Lock","description":"Lock","keywords":["lock","mysql","\ubd84\uc0b0 \ub77d"]},"sidebar":"db","previous":{"title":"EXPLAIN","permalink":"/docs/lang/db/sql/mysql/explain"},"next":{"title":"Stored Program","permalink":"/docs/lang/db/sql/mysql/stored-program"}}');var c=n(74848),d=n(28453);const i={id:"lock",title:"Lock",sidebar_label:"Lock",description:"Lock",keywords:["lock","mysql","\ubd84\uc0b0 \ub77d"]},o=void 0,r={},t=[{value:"Row-Level Lock",id:"row-level-lock",level:2},{value:"FOR SHARE",id:"for-share",level:3},{value:"FOR UPDATE",id:"for-update",level:3},{value:"User-Level Lock",id:"user-level-lock",level:2},{value:"GET_LOCK",id:"get_lock",level:3},{value:"RELEASE_LOCK",id:"release_lock",level:3}];function a(e){const l={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.h2,{id:"row-level-lock",children:"Row-Level Lock"}),"\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/innodb-locking-reads.html",children:"https://dev.mysql.com/doc/refman/8.0/en/innodb-locking-reads.html"})}),"\n"]}),"\n",(0,c.jsx)(l.h3,{id:"for-share",children:"FOR SHARE"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-sql",children:"SELECT ... FOR SHARE\n"})}),"\n",(0,c.jsxs)(l.p,{children:[(0,c.jsx)(l.code,{children:"FOR SHARE"}),"\ub294 \ud574\ub2f9 \ud2b8\ub79c\uc7ad\uc158\uc774 \ucee4\ubc0b\ub418\uac70\ub098 \ub864\ubc31\ub418\uae30 \uc804\uae4c\uc9c0 ",(0,c.jsx)(l.code,{children:"SELECT"})," \ubb38\uc758 \uacb0\uacfc\uc5d0 \ud574\ub2f9\ud558\ub294 rows\uc5d0 \uc4f0\uae30 \ub77d\uc744 \uac81\ub2c8\ub2e4. \uadf8 \uc0ac\uc774 \ub2e4\ub978 \ud2b8\ub79c\uc7ad\uc158\uc740 \ud574\ub2f9 rows\ub97c \uc77d\ub294 \uac83\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(l.h3,{id:"for-update",children:"FOR UPDATE"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-sql",children:"SELECT ... FOR UPDATE\n"})}),"\n",(0,c.jsxs)(l.p,{children:[(0,c.jsx)(l.code,{children:"FOR UPDATE"}),"\ub294 \ud574\ub2f9 \ud2b8\ub79c\uc7ad\uc158\uc774 \ucee4\ubc0b\ub418\uac70\ub098 \ub864\ubc31\ub418\uae30 \uc804\uae4c\uc9c0 ",(0,c.jsx)(l.code,{children:"SELECT"})," \ubb38\uc758 \uacb0\uacfc\uc5d0 \ud574\ub2f9\ud558\ub294 rows\uc5d0 \uc77d\uae30, \uc4f0\uae30 \ub77d\uc744 \uac81\ub2c8\ub2e4. \uadf8 \uc0ac\uc774 \ub2e4\ub978 \ud2b8\ub79c\uc7ad\uc158\uc740 \ud574\ub2f9 rows\uc5d0 \uc811\uadfc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."]}),"\n",(0,c.jsxs)(l.admonition,{type:"warning",children:[(0,c.jsxs)(l.p,{children:["\uc11c\ube0c \ucffc\ub9ac\uc758 \uad00\ub828 rows\ub294 \uc7a0\uae30\uc9c0 \uc54a\uae30 \ub54c\ubb38\uc5d0 \uc11c\ube0c \ucffc\ub9ac\uc758 \uad00\ub828 rows\ub3c4 \uc7a0\uae30\uac8c \ud558\ub824\uba74 \uc11c\ube0c \ucffc\ub9ac\uc5d0\ub3c4 ",(0,c.jsx)(l.code,{children:"FOR UPDATE"}),"\ub97c \uc0ac\uc6a9\ud574\uc57c \ud569\ub2c8\ub2e4."]}),(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-sql",children:"SELECT * FROM t1 WHERE c1 = (SELECT c1 FROM t2 FOR UPDATE) FOR UPDATE;\n"})})]}),"\n",(0,c.jsx)(l.h2,{id:"user-level-lock",children:"User-Level Lock"}),"\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsx)(l.li,{children:(0,c.jsx)(l.a,{href:"https://dev.mysql.com/doc/refman/8.0/en/locking-functions.html",children:"https://dev.mysql.com/doc/refman/8.0/en/locking-functions.html"})}),"\n"]}),"\n",(0,c.jsx)(l.h3,{id:"get_lock",children:"GET_LOCK"}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-sql",children:"SELECT GET_LOCK('<name>', <timeout>);\n"})}),"\n",(0,c.jsxs)(l.p,{children:[(0,c.jsx)(l.code,{children:"GET_LOCK"}),"\uc740 ",(0,c.jsx)(l.code,{children:"<name>"}),"\uc774\ub77c\ub294 \ub124\uc784\ub4dc \ub77d\uc744 \ud68d\ub4dd\ud558\ub824\uace0 \uc2dc\ub3c4\ud569\ub2c8\ub2e4. \ub77d\uc740 ",(0,c.jsx)(l.code,{children:"RELEASE_LOCK"}),"\uc744 \ud1b5\ud574 \uba85\uc2dc\uc801\uc73c\ub85c \ud574\uc81c\ud558\uac70\ub098 \uc138\uc158 \uc885\ub8cc \uc2dc \uc554\ubb35\uc801\uc73c\ub85c \ud574\uc81c\ub429\ub2c8\ub2e4."]}),"\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"<timeout>"}),": \ub77d\uc744 \ud68d\ub4dd\ud560 \uc218 \uc788\uc744 \ub54c\uae4c\uc9c0 \ub300\uae30\ud560 \uc2dc\uac04(\ucd08), \uc74c\uc218\uc778 \uacbd\uc6b0 \ubb34\ud55c\ub300\uae30"]}),"\n",(0,c.jsxs)(l.li,{children:["\uc751\ub2f5","\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"1"}),": \ub77d \ud68d\ub4dd \uc131\uacf5"]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"0"}),": \ud0c0\uc784\uc544\uc6c3"]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"null"}),": \uc5d0\ub7ec"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(l.h3,{id:"release_lock",children:"RELEASE_LOCK"}),"\n",(0,c.jsxs)(l.p,{children:[(0,c.jsx)(l.code,{children:"RELEASE_LOCK"}),"\uc740 ",(0,c.jsx)(l.code,{children:"<name>"}),"\uc774\ub77c\ub294 \ub124\uc784\ub4dc \ub77d\uc744 \ud574\uc81c\ud569\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(l.pre,{children:(0,c.jsx)(l.code,{className:"language-sql",children:"SELECT RELEASE_LOCK('<name>');\n"})}),"\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsxs)(l.li,{children:["\uc751\ub2f5","\n",(0,c.jsxs)(l.ul,{children:["\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"1"}),": \ub77d \ud574\uc81c \uc131\uacf5"]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"0"}),": \ub77d \ud574\uc81c \uc2e4\ud328(\ud574\ub2f9 \uc2a4\ub808\ub4dc\uc5d0\uc11c \ub77d\uc744 \ud68d\ub4dd\ud55c \uac83\uc774 \uc544\ub2d8)"]}),"\n",(0,c.jsxs)(l.li,{children:[(0,c.jsx)(l.code,{children:"null"}),": \ud574\ub2f9 \ub77d\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc74c"]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:l}={...(0,d.R)(),...e.components};return l?(0,c.jsx)(l,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},28453:(e,l,n)=>{n.d(l,{R:()=>i,x:()=>o});var s=n(96540);const c={},d=s.createContext(c);function i(e){const l=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(l):{...l,...e}}),[l,e])}function o(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),s.createElement(d.Provider,{value:l},e.children)}}}]);