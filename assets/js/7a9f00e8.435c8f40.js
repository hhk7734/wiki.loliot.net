"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[36681],{28310:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"mlops/kubernetes/workloads/deployment","title":"Deployment","description":"kubernetes deployment","source":"@site/docs/mlops/kubernetes/workloads/deployment.mdx","sourceDirName":"mlops/kubernetes/workloads","slug":"/mlops/kubernetes/workloads/deployment","permalink":"/docs/mlops/kubernetes/workloads/deployment","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/kubernetes/workloads/deployment.mdx","tags":[],"version":"current","lastUpdatedAt":1740111436000,"frontMatter":{"id":"deployment","title":"Deployment","sidebar_label":"Deployment","description":"kubernetes deployment","keywords":["kubernetes","deployment"]},"sidebar":"kubernetes","previous":{"title":"Pod \uc218\uba85 \uc8fc\uae30","permalink":"/docs/mlops/kubernetes/workloads/pod-lifecycle"},"next":{"title":"StatefulSet","permalink":"/docs/mlops/kubernetes/workloads/statefulset"}}');var o=l(74848),t=l(28453),r=l(86025);const i={id:"deployment",title:"Deployment",sidebar_label:"Deployment",description:"kubernetes deployment",keywords:["kubernetes","deployment"]},d=void 0,c={},a=[{value:"Deployment",id:"deployment",level:2},{value:"label",id:"label",level:3},{value:"namespace",id:"namespace",level:3},{value:"rollout",id:"rollout",level:2}];function p(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"deployment",children:"Deployment"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/",children:"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/"})}),"\n"]}),"\n",(0,o.jsx)("center",{children:(0,o.jsx)("img",{src:(0,r.Ay)("img/mlops/kubernetes/deployment-rolling.gif"),width:750})}),"\n",(0,o.jsx)("center",{children:(0,o.jsx)("strong",{children:"Deployment and RollingUpdate"})}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"ReplicaSet"}),"\uc740 \uc544\ub798\uc640 \uac19\uc740 spec\uc744 \uac00\uc9c0\uace0 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Pod \uc9d1\ud569\uc744 \uc2dd\ubcc4\ud558\uae30 \uc704\ud55c ",(0,o.jsx)(n.code,{children:".spec.selector"})]}),"\n",(0,o.jsxs)(n.li,{children:["\uc720\uc9c0\ud558\uace0 \uc2f6\uc740 Pod \uc218\ub97c \uc9c0\uc815\ud558\ub294 ",(0,o.jsx)(n.code,{children:".spec.replicas"})]}),"\n",(0,o.jsxs)(n.li,{children:["\uc0c8\ub85c \uc0dd\uc131\ub420 Pod \uc815\ubcf4\uc778 ",(0,o.jsx)(n.code,{children:".spec.template"})]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"Deployment"}),"\ub294 ",(0,o.jsx)(n.code,{children:"ReplicaSet"}),"\uc744 \uc0dd\uc131\ud558\uace0 \ucee8\ud2b8\ub864\ud558\ub294 \ub370 \uc0ac\uc6a9\ub418\ub294 \ub9ac\uc18c\uc2a4\uc785\ub2c8\ub2e4. ",(0,o.jsx)(n.code,{children:"Deployment"}),"\uc5d0 \uc758\ud574 \uc0dd\uc131\ub41c ",(0,o.jsx)(n.code,{children:"ReplicaSet"}),"\uc740 \uc0ac\uc6a9\uc790\uac00 \uc9c1\uc811 \uad00\ub9ac\ud558\uba74 \uc548\ub429\ub2c8\ub2e4."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-deployment\nspec:\n  replicas: 3 # \uc720\uc9c0\ud558\uace0 \uc2f6\uc740 Pod \uc218\n  minReadySeconds: 10 # readinessProbe \uc131\uacf5 \ud6c4 \ucd5c\uc18c \uc900\ube44 \uc2dc\uac04, \uc758\ub3c4\uc801\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8 \uc18d\ub3c4\ub97c \ub2a6\ucd9c \uc218 \uc788\uc74c\n  strategy:\n    type: RollingUpdate # RollingUpdate(default)|Recreate\n    rollingUpdate:\n      # replicas - maxUnavailable <= \uc0ac\uc6a9 \uac00\ub2a5 Pod <= replicas + maxSurge\n      maxSurge: 25% # \uc815\uc218 \ub610\ub294 \ube44\uc728(%, ceil(replicas * maxSurge))\n      maxUnavailable: 25% # \uc815\uc218 \ub610\ub294 \ube44\uc728(%, floor(replicas * maxUnavailable))\n  selector: # \uad00\ub9ac\ud558\uace0 \uc2f6\uc740 Pod\uc758 \uc815\ubcf4\n    matchLabels:\n      app: my-app\n  template: # \uc0c8\ub85c \uc0dd\uc131\ub420 Pod\n    metadata:\n      labels: # .spec.selector\uc5d0 \uc758\ud574 \uc120\ud0dd \ub420 \uc218 \uc788\ub3c4\ub85d \uc124\uc815\n        app: my-app\n    spec:\n      containers:\n        - image: [<url>/]<image>[:tag]\n          name: my-app\n          ports:\n            - name: http # Pod \ub0b4\uc5d0\uc11c \ud2b9\ubcc4\ud574\uc57c\ud558\uba70, service\uc5d0 \uc758\ud574 \ucc38\uc870\ub420 \uc218 \uc788\uc74c\n              containerPort: 8080\n              protocol: TCP # TCP(default)|UDP|SCTP\n"})}),"\n",(0,o.jsx)(n.h3,{id:"label",children:"label"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/docs/mlops/kubernetes/object-management/label",children:"Label"})}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:".metadata.annotation"}),"\uc740 label\ucc98\ub7fc selector \uac19\uc740 \uac83\uc740 \uc5c6\uc9c0\ub9cc \uc0c1\ub300\uc801\uc73c\ub85c \uae34 \uac12\uc744 \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \uc0c8\ub85c\uc6b4 \uae30\ub2a5\uc744 \ucd94\uac00\ud558\uae30 \uc804, spec\uc5d0 \ucd94\uac00\ud560 \uac12\uc744 \uc6b0\uc120 annotation\uc5d0 \ucd94\uac00\ud574\uc11c \ud14c\uc2a4\ud2b8 \ud574\ubcf4\ub294 \uacbd\uc6b0\uac00 \uc788\uc2b5\ub2c8\ub2e4."]})}),"\n",(0,o.jsx)(n.h3,{id:"namespace",children:"namespace"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:".metadata.namespace"}),"\ub294 \ud074\ub7ec\uc2a4\ud130 \ub0b4\uc5d0\uc11c \ub9ac\uc18c\uc2a4 \uadf8\ub8f9\uc744 \uaca9\ub9ac\ud558\ub294 \uae30\ub2a5\uc785\ub2c8\ub2e4. \uc0ac\uc6a9\uc790\uac00 \uc801\uc740 \uacbd\uc6b0 label\ub9cc\uc73c\ub85c \ucda9\ubd84 \ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"kubectl config set-context --current --namespace <namespace>"})," \uba85\ub839\uc5b4\ub97c \ud1b5\ud574 \ud604\uc7ac \ucee8\ud14d\uc2a4\ud2b8\uc758 \uae30\ubcf8 namespace\ub97c \ubcc0\uacbd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,o.jsx)(n.h2,{id:"rollout",children:"rollout"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-shell",children:"kubectl rollout <subcommand> <resource> <name>\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"<subcommand>"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"pause"}),": \uc77c\uc2dc \uc911\uc9c0"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"resume"}),": \uc77c\uc2dc \uc911\uc9c0 \ud574\uc81c"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"restart"}),": \uc7ac\uc2dc\uc791"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"status"}),": rollout\uc774 \uc644\ub8cc\ub420 \ub54c\uae4c\uc9c0 \uc9c4\ud589 \uc0c1\ud0dc\ub97c \ucd9c\ub825"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"history"}),": revision \ubaa9\ub85d, ",(0,o.jsx)(n.code,{children:"--revision <int>"}),"\uc744 \uc124\uc815\ud558\uba74 \uc790\uc138\ud55c \uc815\ubcf4\ub97c \ud655\uc778 \ud560 \uc218 \uc788\uc74c"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"undo"}),": \uc774\uc804 revision \ub85c \ub418\ub3cc\ub9ac\uae30, ",(0,o.jsx)(n.code,{children:"--to-revision <int>"}),"\uc744 \uc124\uc815\ud558\uba74 \ud574\ub2f9 revision\uc73c\ub85c \ub418\ub3cc\ub9b4 \uc218 \uc788\uc74c"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"<resource>"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"deployment"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"statefulset"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"daemonset"})}),"\n"]}),"\n"]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},28453:(e,n,l)=>{l.d(n,{R:()=>r,x:()=>i});var s=l(96540);const o={},t=s.createContext(o);function r(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);