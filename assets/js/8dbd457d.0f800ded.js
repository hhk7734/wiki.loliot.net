"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[35773],{28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>c});var l=t(96540);const s={},o=l.createContext(s);function i(e){const n=l.useContext(o);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),l.createElement(o.Provider,{value:n},e.children)}},34923:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>a});const l=JSON.parse('{"id":"lang/shellscript/getopt","title":"ShellScript getopt","description":"ShellScript getopt","source":"@site/docs/lang/shellscript/getopt.mdx","sourceDirName":"lang/shellscript","slug":"/lang/shellscript/getopt","permalink":"/docs/lang/shellscript/getopt","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/lang/shellscript/getopt.mdx","tags":[],"version":"current","lastUpdatedAt":1745336627000,"frontMatter":{"id":"getopt","title":"ShellScript getopt","sidebar_label":"getopt","description":"ShellScript getopt","keywords":["ShellScript","getopt"]},"sidebar":"shellscript","previous":{"title":"Text color","permalink":"/docs/lang/shellscript/text-color"},"next":{"title":"Redirection\uacfc Piping","permalink":"/docs/lang/shellscript/redirection-piping"}}');var s=t(74848),o=t(28453);const i={id:"getopt",title:"ShellScript getopt",sidebar_label:"getopt",description:"ShellScript getopt",keywords:["ShellScript","getopt"]},c=void 0,r={},a=[{value:"getopts",id:"getopts",level:2},{value:"getopt",id:"getopt",level:2},{value:"shortOptString",id:"shortoptstring",level:3},{value:"Example",id:"example",level:4},{value:"longOptString",id:"longoptstring",level:3},{value:"Example",id:"example-1",level:4},{value:"Example script",id:"example-script",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"getopts",children:"getopts"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://mug896.github.io/bash-shell/getopts.html",children:"https://mug896.github.io/bash-shell/getopts.html"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ script.sh a  b  c  d\n     $0     $1 $2 $3 $4\n     -------------------\n             $@\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"getopts"})," \uba85\ub839\uc5b4\ub294 \uc635\uc158\uacfc \ud574\ub2f9 \uc778\uc790\ub97c \ud30c\uc2f1\ud558\ub294\ub370 \uc0ac\uc6a9\ub418\ub294 POSIX \uc258 \ube4c\ud2b8\uc778 \uba85\ub839\uc5b4\uc785\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'getopts <optString> option [parameters="$@"]\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"echo $option\necho $OPTARG\necho $OPTIND # \ub2e4\uc74c \uc778\uc790\uc758 \uc778\ub371\uc2a4\n"})}),"\n",(0,s.jsx)(n.h2,{id:"getopt",children:"getopt"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"getopts"}),"\uc758 \ub2e8\uc810\uc740"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\uc9e7\uc740 \uc635\uc158\ub9cc \ud30c\uc2f1 \uac00\ub2a5\ud569\ub2c8\ub2e4"}),"\n",(0,s.jsx)(n.li,{children:"\uc635\uc158\uc774 \uc544\ub2cc \uc778\uc790 \ub2e4\uc74c\uc5d0 \uc624\ub294 \uc635\uc158\uc744 \ud30c\uc2f1\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"getopt"})," \uba85\ub839\uc5b4\ub294 \uc635\uc158\uacfc \uc635\uc158\uc774 \uc544\ub2cc \uc778\uc790\ub97c \uc7ac\uc815\ub82c\ud558\uace0, \uc9e7\uc740 \uc635\uc158\uacfc \uae34 \uc635\uc158\uc744 \ubaa8\ub450 \ud30c\uc2f1\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"getopt -o <shortOptString> -l <longOptString> -- <parameters>\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"-n | --name <name>"}),": \ud504\ub85c\uadf8\ub7a8 \uc774\ub984\uc744 \uc124\uc815\ud569\ub2c8\ub2e4"]}),"\n"]}),"\n",(0,s.jsxs)(n.admonition,{type:"warning",children:[(0,s.jsxs)(n.p,{children:["macOS\uc5d0\uc11c\ub294 ",(0,s.jsx)(n.code,{children:"gnu-getopt"}),"\ub97c \uc124\uce58\ud558\uac70\ub098 GNU getopt\uac00 \uc5c6\ub294 \uacbd\uc6b0\uc5d0 \ub300\ud55c \ucc98\ub9ac\ub97c \ud574\uc57c\ud569\ub2c8\ub2e4."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"if ! getopt -T >/dev/null; then\n    # GNU getopt\uac00 \uc124\uce58\ub41c \uacbd\uc6b0\n    options=$(getopt ...)\nelse\n    # GNU getopt\uac00 \uc124\uce58 \uc548\ub41c \uacbd\uc6b0\nfi\n"})})]}),"\n",(0,s.jsx)(n.h3,{id:"shortoptstring",children:"shortOptString"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"<option1>[:][<option2>[:]...]\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"-a"}),", ",(0,s.jsx)(n.code,{children:"-b"}),"\ub97c \ud30c\uc2f1\ud558\uace0 \uc2f6\uc73c\uba74, ",(0,s.jsx)(n.code,{children:"shortOptString"}),"\uc744 ",(0,s.jsx)(n.code,{children:"ab"}),"\ub97c \uc124\uc815\ud558\uba74 \ub429\ub2c8\ub2e4. \ub9cc\uc57d ",(0,s.jsx)(n.code,{children:"-a"})," \uc635\uc158\uc774 \uac12\uc744 \ubc1b\uc544\uc57c \ud558\uba74 ",(0,s.jsx)(n.code,{children:":"}),"\uc744 \uc0ac\uc6a9\ud558\uc5ec ",(0,s.jsx)(n.code,{children:"a:b"}),"\ub85c \uc124\uc815\ud558\uba74 \ub429\ub2c8\ub2e4. ",(0,s.jsx)(n.code,{children:"getopt"}),"\ub294 ",(0,s.jsx)(n.code,{children:"-"})," \uc774\ud6c4\uc5d0 \ud558\ub098\uc758 \ubb38\uc790\uc5f4\ub9cc \uc778\uc2dd\ud558\ubbc0\ub85c ",(0,s.jsx)(n.code,{children:"-a a_arg"}),"\uc640 ",(0,s.jsx)(n.code,{children:"-aa_arg"}),"\ub294 \uac19\uc740 \ud45c\ud604\uc73c\ub85c \uac04\uc8fc\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'set -- -aa_arg -b asdf \\\n&& getopt -o a:b -- "$@"\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:" -a 'a_arg' -b -- 'asdf'\n"})}),"\n",(0,s.jsx)(n.h3,{id:"longoptstring",children:"longOptString"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"<option1>[:][,<option2>[:],...]\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"--foo"})," ",(0,s.jsx)(n.code,{children:"--bar"}),"\ub97c \ud30c\uc2f1\ud558\uace0 \uc2f6\uc73c\uba74, ",(0,s.jsx)(n.code,{children:"longOptString"}),"\uc5d0 ",(0,s.jsx)(n.code,{children:"foo,bar"}),"\ub97c \uc124\uc815\ud558\uba74 \ub429\ub2c8\ub2e4. \ub9cc\uc57d ",(0,s.jsx)(n.code,{children:"--foo"})," \uc635\uc158\uc774 \uac12\uc744 \ubc1b\uc544\uc57c \ud558\uba74, ",(0,s.jsx)(n.code,{children:":"}),"\uc744 \uc0ac\uc6a9\ud558\uc5ec ",(0,s.jsx)(n.code,{children:"foo:,bar"}),"\ub85c \uc124\uc815\ud558\uba74 \ub429\ub2c8\ub2e4. ",(0,s.jsx)(n.code,{children:"getopt"}),"\ub294 ",(0,s.jsx)(n.code,{children:"--foo=arg"}),"\uc640 ",(0,s.jsx)(n.code,{children:"--foo arg"}),"\ub97c \uac19\uc740 \ud45c\ud604\uc73c\ub85c \uac04\uc8fc\ud569\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(n.h4,{id:"example-1",children:"Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'set -- --foo arg --bar \\\n&& getopt -o "" -l foo:,bar -- "$@"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"example-script",children:"Example script"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:'#!/bin/sh\n\nset -e\n\nRED=$(tput setaf 1)\nBOLD=$(tput bold)\nDEFAULT=$(tput sgr0)\n\nCOMMAND=$(basename "$0")\n\nhelp_msg() {\n    cat <<END\n\uc0ac\uc6a9\ubc95:\n    $COMMAND [\uc635\uc158] [\uc778\uc790]\n\n\uc635\uc158:\n    -a, --aaa\n    -b, --bbb <\uac12>\n    -c, --ccc\n\n\uc608\uc2dc:\nEND\n}\n\nif ! getopt -T >/dev/null; then\n    options=$(getopt \\\n        -o ab:ch \\\n        -l aaa,bbb:,ccc,help \\\n        -n "$COMMAND" \\\n        -- "$@")\nelse\n    eval set -- "$(echo "$@" | sed -E \'s/--([a-z])[a-z]*/-\\1/g\')"\n    options=$(getopt \\\n        ab:ch \\\n        "$@")\nfi\n\nIS_PARSED=$?\n\nif [ $# -eq 0 ] || [ $IS_PARSED -ne 0 ]; then\n    printf "%s\\n" "${RED}${BOLD}$(help_msg)${DEFAULT}" >&2\n    exit 1\nfi\n\neval set -- "$options"\n\nwhile true; do\n    case "$1" in\n    -a | --aaa)\n        echo "$1"\n        shift\n        ;;\n    -b | --bbb)\n        echo "$1" "$2"\n        shift 2\n        ;;\n    -c | --ccc)\n        echo "$1"\n        shift\n        ;;\n    -h | --help)\n        help_msg\n        exit 0\n        ;;\n    --)\n        echo "$@"\n        shift $#\n        break\n        ;;\n    esac\ndone\n'})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);