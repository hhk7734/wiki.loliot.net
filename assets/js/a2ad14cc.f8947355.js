"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[74280],{53271:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>t});var l=i(74848),s=i(28453);const r={id:"gorm",title:"gorm",sidebar_label:"gorm",description:"gorm",keywords:["gorm"]},c=void 0,o={id:"lang/go/libraries/gorm",title:"gorm",description:"gorm",source:"@site/docs/lang/go/libraries/gorm.mdx",sourceDirName:"lang/go/libraries",slug:"/lang/go/libraries/gorm",permalink:"/docs/lang/go/libraries/gorm",draft:!1,unlisted:!1,tags:[],version:"current",lastUpdatedAt:1723169255e3,frontMatter:{id:"gorm",title:"gorm",sidebar_label:"gorm",description:"gorm",keywords:["gorm"]},sidebar:"go",previous:{title:"Swagger",permalink:"/docs/lang/go/libraries/swagger"},next:{title:"encoding/json",permalink:"/docs/lang/go/libraries/encoding-json"}},d={},t=[{value:"\uc124\uce58",id:"\uc124\uce58",level:2},{value:"Database",id:"database",level:2},{value:"Schema",id:"schema",level:2},{value:"Tag",id:"tag",level:3},{value:"Example",id:"example",level:3},{value:"Transaction",id:"transaction",level:2}];function a(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"\uc124\uce58",children:"\uc124\uce58"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://github.com/go-gorm",children:"https://github.com/go-gorm"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"go get -u gorm.io/gorm\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"go get -u gorm.io/driver/mysql\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"go get -u gorm.io/driver/postgres\n"})}),"\n",(0,l.jsx)(n.h2,{id:"database",children:"Database"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://gorm.io/docs/connecting_to_the_database.html",children:"https://gorm.io/docs/connecting_to_the_database.html"})}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"schema",children:"Schema"}),"\n",(0,l.jsx)(n.h3,{id:"tag",children:"Tag"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://gorm.io/docs/models.html#Fields-Tags",children:"https://gorm.io/docs/models.html#Fields-Tags"})}),"\n"]}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:";"}),": \uad6c\ubd84\uc790"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"column:<name>"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"type:<columnDefinition>"}),": Tag\ub85c \uc120\uc5b8\ud560 \uc218 \uc5c6\ub294 \uac83\uc740 ",(0,l.jsx)(n.code,{children:"<type>"}),"\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc120\uc5b8\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"serializer:<serializer>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"size:<size>"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"primaryKey"})," : PRIMARY KEY"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"unique"}),": UNIQUE KEY"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"default:<value>"}),": DEFAULT ",(0,l.jsx)(n.code,{children:"<value>"})]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"precision:<precision>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"scale:<scale>"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"not null"}),": NOT NULL"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"autoIncrement"}),": AUTO_INCREMENT"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"autoIncrementIncrement:<step>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"embedded"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"embeddedPrefix:<prefix>"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"autoCreateTime:milli|nano"}),": CreatedAt\uc744 unix \uc2dc\uac04\uc73c\ub85c \uc800\uc7a5\ud560 \ub54c \uc0ac\uc6a9\ud569\ub2c8\ub2e4"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"autoUpdateTime:milli|nano"}),": UpdatedAt\uc744 unix \uc2dc\uac04\uc73c\ub85c \uc800\uc7a5\ud560 \ub54c \uc0ac\uc6a9\ud569\ub2c8\ub2e4"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"index[:<config>[,<config>]]"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://gorm.io/docs/indexes.html",children:"https://gorm.io/docs/indexes.html"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"uniqueIndex"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"check:<condition>"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://gorm.io/docs/constraints.html",children:"https://gorm.io/docs/constraints.html"})}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<-[:create|update|false]"}),": \uc4f0\uae30 \uad8c\ud55c"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"->[:false]"}),": \uc77d\uae30 \uad8c\ud55c"]}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"-[:migration|all]"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"comment:<comment>"})}),"\n"]}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://gorm.io/docs/associations.html#Association-Tags",children:"https://gorm.io/docs/associations.html#Association-Tags"})}),"\n"]}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"foreignKey:<key>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"references:<key>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"polymorphic:<key>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"polymorphicValue:<value>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"many2many:<joinTable>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"joinForeignKey:<key>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"joinReferences:<key>"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"constraint:<constraint>[,<constraint>]"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"OnUpdate:<action>"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"OnDelete:<action>"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-sql",children:"CREATE TABLE accounts (\n    account_id BIGINT UNSIGNED NOT NULL AUTO_INCREMENT,\n    email VARCHAR(255) NOT NULL,\n    phone_number VARCHAR(20) NOT NULL DEFAULT '',\n    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\n    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n    PRIMARY KEY ('account_id'),\n    UNIQUE KEY 'email' ('email')\n);\n"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'type Account struct {\n\tAccountID   uint64    `gorm:"not null;autoIncrement;primaryKey"`\n\tEmail       string    `gorm:"size:255;not null;unique"`\n\tPhoneNumber string    `gorm:"size:20;not null;default:\'\'"`\n\tCreatedAt   time.Time `gorm:"type:TIMESTAMP;not null;default:CURRENT_TIMESTAMP"`\n\tUpdatedAt   time.Time `gorm:"type:TIMESTAMP ON UPDATE CURRENT_TIMESTAMP;not null;default:CURRENT_TIMESTAMP"`\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"transaction",children:"Transaction"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://gorm.io/docs/transactions.html",children:"https://gorm.io/docs/transactions.html"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>o});var l=i(96540);const s={},r=l.createContext(s);function c(e){const n=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);