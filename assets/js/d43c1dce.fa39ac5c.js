"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[5626],{27298:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>r});const s=JSON.parse('{"id":"lang/python/package/setuptools","title":"Package with setuptools","description":"Package with setuptools","source":"@site/docs/lang/python/package/setuptools.mdx","sourceDirName":"lang/python/package","slug":"/lang/python/package/setuptools","permalink":"/docs/lang/python/package/setuptools","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/lang/python/package/setuptools.mdx","tags":[],"version":"current","lastUpdatedAt":1746964508000,"frontMatter":{"id":"setuptools","title":"Package with setuptools","sidebar_label":"setuptools","description":"Package with setuptools","keywords":["Python","setuptools"]},"sidebar":"python","previous":{"title":"Type","permalink":"/docs/lang/python/package/pybind11/type"},"next":{"title":"Poetry","permalink":"/docs/lang/python/package/poetry"}}');var i=t(74848),l=t(28453);const o={id:"setuptools",title:"Package with setuptools",sidebar_label:"setuptools",description:"Package with setuptools",keywords:["Python","setuptools"]},a=void 0,p={},r=[{value:"Directory Structure",id:"directory-structure",level:2},{value:"pyproject.toml",id:"pyprojecttoml",level:2},{value:"version",id:"version",level:2},{value:"Dynamic version with setuptools_scm",id:"dynamic-version-with-setuptools_scm",level:3},{value:"<code>__version__</code>",id:"__version__",level:3},{value:"Dependencies",id:"dependencies",level:2},{value:"Scripts",id:"scripts",level:2},{value:"Build",id:"build",level:2},{value:"Publish",id:"publish",level:2},{value:"Test PyPI",id:"test-pypi",level:3},{value:"PyPI",id:"pypi",level:3}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"directory-structure",children:"Directory Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"<project>/\n\u251c\u2500\u2500 pyproject.toml\n\u251c\u2500\u2500 LICENSE\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 <package>/\n    \u251c\u2500\u2500 __init__.py # import <package>\n    \u251c\u2500\u2500 py.typed # for type hint\n    \u251c\u2500\u2500 <subpackage>/\n    \u2502   \u251c\u2500\u2500 __init__.py # from <package> import <subpackage>\n    \u2502   \u251c\u2500\u2500 <module>.py # from <package>.<subpackage> import <module>\n    \u2502   \u2514\u2500\u2500 ...\n    \u2514\u2500\u2500 ...\n"})}),"\n",(0,i.jsx)(n.h2,{id:"pyprojecttoml",children:"pyproject.toml"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://packaging.python.org/en/latest/specifications/declaring-project-metadata/",children:"https://packaging.python.org/en/latest/specifications/declaring-project-metadata/"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'title="pyproject.toml"',children:'[project]\nname = "<packageName>" # pip install <packageName>, <package>\uc640 \ub2e4\ub97c \uc218 \uc788\uc2b5\ub2c8\ub2e4.\nversion = "<version>"\ndescription = "<description>"\nauthors = [{ name = "Hyeonki Hong", email = "hhk7734@gmail.com" }]\nrequires-python = ">=3.11"\n\nlicencse = {file = "LICENSE"}\nreadme = "README.md"\nkeywords = []\nclassifiers = [\n  "Programming Language :: Python :: 3",\n  "Intended Audience :: Developers",\n]\n\n[project.urls]\nhomepage = "https://wiki.loliot.net"\nrepository = "https://github.com/hhk7734/example"\ndocumentation = "https://wiki.loliot.net"\n\n[tool.setuptools]\nzip-safe = false\n\n[tool.setuptools.package-data]\n"*" = ["py.typed", "*.pyi"]\n\n[tool.setuptools.packages.find]\n# where = ["src"]\ninclude = ["<package>", "<package>.*"]\n\n[build-system]\nrequires = ["setuptools"]\nbuild-backend = "setuptools.build_meta"\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["classifiers: ",(0,i.jsx)(n.a,{href:"https://pypi.org/classifiers/",children:"https://pypi.org/classifiers/"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"version",children:"version"}),"\n",(0,i.jsx)(n.h3,{id:"dynamic-version-with-setuptools_scm",children:"Dynamic version with setuptools_scm"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/pypa/setuptools_scm",children:"https://github.com/pypa/setuptools_scm"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'title="pyproject.toml"',children:'[project]\n# version = "<version>"\ndynamic = ["version"]\n\n# version\uc744 git tag\ub85c\ubd80\ud130 \uac00\uc838\uc635\ub2c8\ub2e4.\n[tool.setuptools_scm]\n# .git \uc774 \uc788\ub294 \uacbd\ub85c\n# root = "."\n# \ubc84\uc804\uc744 \ucc3e\ub294 \uc815\uaddc\uc2dd\n# tag_regex = \'^(?:[\\w-]+-)?(?P<version>[vV]?\\d+(?:\\.\\d+){0,2}[^\\+]*)(?:\\+.*)?$\'\n# tag\ub97c \ucc3e\ub294 \uba85\ub839\uc5b4\n# git_describe_command = \'git describe --dirty --tags --long --match "*[0-9]*"\'\n\n[build-system]\nrequires = ["setuptools", "setuptools_scm"]\nbuild-backend = "setuptools.build_meta"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"__version__",children:(0,i.jsx)(n.code,{children:"__version__"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",metastring:'title="<package>/__init__.py"',children:'from importlib.metadata import version, PackageNotFoundError\n\ntry:\n    __version__ = version("<packageName>")\nexcept PackageNotFoundError:\n    # package is not installed\n    pass\n'})}),"\n",(0,i.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://setuptools.pypa.io/en/latest/userguide/dependency_management.html",children:"https://setuptools.pypa.io/en/latest/userguide/dependency_management.html"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'title="pyproject.toml"',children:"[project]\ndependencies = []\n"})}),"\n",(0,i.jsx)(n.h2,{id:"scripts",children:"Scripts"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-toml",metastring:'title="pyproject.toml"',children:'[project.scripts]\n<cli> = "<package>.<module>" # __main__\n<cli> = "<package>.<module>:<function>"\n'})}),"\n",(0,i.jsx)(n.h2,{id:"build",children:"Build"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"python3 -m pip install -U build\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"python3 -m build\n"})}),"\n",(0,i.jsx)(n.h2,{id:"publish",children:"Publish"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"python3 -m pip install twine\n"})}),"\n",(0,i.jsx)(n.h3,{id:"test-pypi",children:"Test PyPI"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"python3 -m twine upload --repository testpypi dist/*\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"python3 -m pip install \\\n    --index-url https://test.pypi.org/simple/ \\\n    --verbose \\\n    --no-deps \\\n    <packageName>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"pypi",children:"PyPI"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"python3 -m twine upload dist/*\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-shell",children:"python3 -m pip install <packageName>\n"})})]})}function d(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var s=t(96540);const i={},l=s.createContext(i);function o(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);