"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[88261],{28453:(n,e,i)=>{i.d(e,{R:()=>c,x:()=>s});var t=i(96540);const r={},l=t.createContext(r);function c(n){const e=t.useContext(l);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:c(n.components),t.createElement(l.Provider,{value:e},n.children)}},41371:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>d,default:()=>x,frontMatter:()=>o,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"mlops/network/cni","title":"Container Network Interface(CNI)","description":"Container Network Interface(CNI)","source":"@site/docs/mlops/network/cni.mdx","sourceDirName":"mlops/network","slug":"/mlops/network/cni","permalink":"/docs/mlops/network/cni","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/network/cni.mdx","tags":[],"version":"current","lastUpdatedAt":1746291681000,"frontMatter":{"id":"cni","title":"Container Network Interface(CNI)","sidebar_label":"CNI","description":"Container Network Interface(CNI)","keywords":["Container Network Interface","cni"]},"sidebar":"network","next":{"title":"Cilium","permalink":"/docs/mlops/network/cilium/"}}');var r=i(74848),l=i(28453),c=i(86025),s=i(74856);const o={id:"cni",title:"Container Network Interface(CNI)",sidebar_label:"CNI",description:"Container Network Interface(CNI)",keywords:["Container Network Interface","cni"]},d=void 0,a={},h=[{value:"Kubernetes network",id:"kubernetes-network",level:2},{value:"Pod",id:"pod",level:3},{value:"CNI",id:"cni",level:2},{value:"CNI \uc124\uc815",id:"cni-\uc124\uc815",level:2},{value:"Example(Calico)",id:"examplecalico",level:2}];function u(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{id:"kubernetes-network",children:"Kubernetes network"}),"\n",(0,r.jsx)(e.p,{children:"Kubernetes network \uae30\ubcf8 \uc694\uad6c \uc0ac\ud56d"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\ub178\ub4dc\uc758 \ud30c\ub4dc\ub294 NAT \uc5c6\uc774 \ubaa8\ub4e0 \ub178\ub4dc\uc758 \ubaa8\ub4e0 \ud30c\ub4dc\uc640 \ud1b5\uc2e0\ud560 \uc218 \uc788\ub2e4."}),"\n",(0,r.jsx)(e.li,{children:"\ub178\ub4dc\uc758 \uc5d0\uc774\uc804\ud2b8(\uc608: \uc2dc\uc2a4\ud15c \ub370\ubaac, kubelet)\ub294 \ud574\ub2f9 \ub178\ub4dc\uc758 \ubaa8\ub4e0 \ud30c\ub4dc\uc640 \ud1b5\uc2e0\ud560 \uc218 \uc788\ub2e4."}),"\n",(0,r.jsx)(e.li,{children:"\ub178\ub4dc\uc758 \ud638\uc2a4\ud2b8 \ub124\ud2b8\uc6cc\ud06c\uc5d0 \uc788\ub294 \ud30c\ub4dc\ub294 NAT \uc5c6\uc774 \ubaa8\ub4e0 \ub178\ub4dc\uc5d0 \uc788\ub294 \ubaa8\ub4e0 \ud30c\ub4dc\uc640 \ud1b5\uc2e0\ud560 \uc218 \uc788\ub2e4."}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"pod",children:"Pod"}),"\n",(0,r.jsxs)(e.p,{children:["Docker \uc758 host \ubc29\uc2dd\uc73c\ub85c pod \ub0b4\uc758 \ucee8\ud14c\uc774\ub108\uac04 \ub124\ud2b8\uc6cc\ud06c\ub97c \uacf5\uc720\ud569\ub2c8\ub2e4. ",(0,r.jsx)(e.code,{children:"Pause"}),"\ub77c\ub294 container\uac00 \uc0dd\uc131\ub418\uba70 \uc774 \ucee8\ud14c\uc774\ub108\uac00 IPC, Network namespace\ub97c \uc0dd\uc131\ud558\uace0 \uc720\uc9c0\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(e.h2,{id:"cni",children:"CNI"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/containernetworking/cni/blob/main/SPEC.md",children:"https://github.com/containernetworking/cni/blob/main/SPEC.md"})}),"\n"]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsx)(e.p,{children:"\uc694\uc57d"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\uad00\ub9ac\uc790\uac00 \ub124\ud2b8\uc6cc\ud06c \uc124\uc815\uc744 \uc815\uc758\ud558\ub294 \ud615\uc2dd\uc785\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.li,{children:"\ucee8\ud14c\uc774\ub108 \ub7f0\ud0c0\uc784\uc774 \ub124\ud2b8\uc6cc\ud06c \ud50c\ub7ec\uadf8\uc778\uc5d0 \uc694\uccad\uc744 \ubcf4\ub0b4\ub294 \ud504\ub85c\ud1a0\ucf5c\uc785\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.li,{children:"\uc81c\uacf5\ub41c \uad6c\uc131\uc744 \uae30\ubc18\uc73c\ub85c \ud50c\ub7ec\uadf8\uc778\uc744 \uc2e4\ud589\ud558\ub294 \uc808\ucc28\uc785\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.li,{children:"\ud50c\ub7ec\uadf8\uc778\uc774 \ub2e4\ub978 \ud50c\ub7ec\uadf8\uc778\uc5d0 \uae30\ub2a5\uc744 \uc704\uc784\ud558\ub294 \uc808\ucc28\uc785\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.li,{children:"\uacb0\uacfc\ub97c \ub7f0\ud0c0\uc784\uc5d0 \ubc18\ud658\ud558\ub294 \ud50c\ub7ec\uadf8\uc778\uc758 \ub370\uc774\ud130 \uc720\ud615\uc785\ub2c8\ub2e4."}),"\n"]}),"\n",(0,r.jsx)("br",{}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:["Network configuration format","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"cniVersion"}),", ",(0,r.jsx)(e.code,{children:"cniVersions"}),", ",(0,r.jsx)(e.code,{children:"name"}),", ",(0,r.jsx)(e.code,{children:"disableCheck"}),", ",(0,r.jsx)(e.code,{children:"plugins"})," \ub4f1\uc744 \ud3ec\ud568\ud55c JSON \uac1d\uccb4\ub85c \uad6c\uc131\ub429\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Execution Protocol","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\ud50c\ub7ec\uadf8\uc778\uc740 \uc2e4\ud589\ud30c\uc77c\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.li,{children:"\ud50c\ub7ec\uadf8\uc778\uc740 \ud658\uacbd \ubcc0\uc218\uc640 stdin\uc744 \ud1b5\ud574 \uc124\uc815\uac12\uc744 \ubc1b\uc2b5\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.li,{children:"\ud50c\ub7ec\uadf8\uc778\uc740 \uc124\uc815 \uc131\uacf5 \uc2dc stdout, \uc2e4\ud328 \uc2dc stderr\ub85c \uacb0\uacfc\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Execution of Network Configurations","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\ucee8\ud14c\uc774\ub108 \ub7f0\ud0c0\uc784\uc740 \ub124\ud2b8\uc6cc\ud06c \uc124\uc815\uc744 \ud574\uc11d\ud558\uc5ec CNI \ud50c\ub7ec\uadf8\uc778\uc744 \uc2e4\ud589\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsxs)(e.li,{children:["\uc218\uba85 \uc8fc\uae30","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\ucee8\ud14c\uc774\ub108 \ub7f0\ud0c0\uc784\uc740 \ud50c\ub7ec\uadf8\uc778\uc744 \ud638\ucd9c\ud558\uae30 \uc804\uc5d0 \ucee8\ud14c\uc774\ub108\uc5d0 \ub300\ud55c \uc0c8 \ub124\ud2b8\uc6cc\ud06c \ub124\uc784\uc2a4\ud398\uc774\uc2a4\ub97c \uc0dd\uc131\ud574\uc57c \ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.li,{children:"..."}),"\n",(0,r.jsx)(e.li,{children:"\ucee8\ud14c\uc774\ub108 \ub7f0\ud0c0\uc784\uc740 \ucee8\ud14c\uc774\ub108\uc758 \ub124\ud2b8\uc6cc\ud06c \ub124\uc784\uc2a4\ud398\uc774\uc2a4 \uc815\ub9ac\ub97c \ub2f4\ub2f9\ud569\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Plugin Delegation","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"CNI \ud50c\ub7ec\uadf8\uc778\uc740 \uc77c\ubd80 \uae30\ub2a5\uc744 \ub2e4\ub978 \ud50c\ub7ec\uadf8\uc778\uc5d0 \uc704\uc784\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.(e.g., IPAM plugin)"}),"\n",(0,r.jsx)(e.li,{children:"\uc704\uc784\ubc1b\uc740 \ud50c\ub7ec\uadf8\uc778\uc740 \uc2e4\ud589\ud30c\uc77c\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.li,{children:"\uc704\uc784\ubc1b\uc740 \ud50c\ub7ec\uadf8\uc778\uc740 CNI \ud50c\ub7ec\uadf8\uc778\uc5d0 \uc804\ub2ec\ub41c \uac83\uacfc \ub3d9\uc77c\ud55c \ud658\uacbd \ubcc0\uc218\uc640 stdin\uc744 \ubaa8\ub450 \uc124\uc815\uac12\uc73c\ub85c \ubc1b\uc544\uc57c\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(e.li,{children:"\uc704\uc784\ubc1b\uc740 \ud50c\ub7ec\uadf8\uc778\uc740 \uc124\uc815 \uc131\uacf5 \uc2dc stdout, \uc2e4\ud328 \uc2dc stderr\ub85c \uacb0\uacfc\ub97c \ubc18\ud658\ud569\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["Result Types","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"CNI \ud50c\ub7ec\uadf8\uc778\uc758 \uc2e4\ud589 \uacb0\uacfc\uc5d0 \ub300\ud55c JSON \ud615\uc2dd\uc758 \uc2a4\ud0a4\ub9c8\uac00 \uc788\uc2b5\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"cni-\uc124\uc815",children:"CNI \uc124\uc815"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/containernetworking/cni/blob/main/SPEC.md#section-1-network-configuration-format",children:"https://github.com/containernetworking/cni/blob/main/SPEC.md#section-1-network-configuration-format"})}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",metastring:'title="/etc/cni/net.d/10-calico.conflist"',children:'{\n\t"cniVersion": "0.3.1",\n\t"name": "k8s-pod-network",\n\t"plugins": [\n\t\t{\n\t\t\t"type": "calico",\n\t\t\t// plugin specific parameters\n\t\t\t"datastore_type": "kubernetes",\n\t\t\t"ipam": {\n\t\t\t\t"type": "calico-ipam",\n\t\t\t\t"assign_ipv4": "true"\n\t\t\t},\n\t\t\t"policy": {\n\t\t\t\t"type": "k8s"\n\t\t\t},\n\t\t\t"kubernetes": {\n\t\t\t\t"kubeconfig": "/etc/cni/net.d/calico-kubeconfig"\n\t\t\t}\n\n\t\t\t//...\n\t\t}\n\t]\n}\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",metastring:'title="/etc/cni/net.d/00-multus.conf"',children:'{\n\t"cniVersion": "0.3.1",\n\t"name": "multus-cni-network",\n\t"type": "multus-shim",\n\t"capabilities": {\n\t\t"bandwidth": true,\n\t\t"portMappings": true\n\t},\n\t"clusterNetwork": "/host/etc/cni/net.d/10-calico.conflist"\n}\n'})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"plugins"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://www.cni.dev/plugins/current/",children:"https://www.cni.dev/plugins/current/"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/containernetworking/plugins",children:"https://github.com/containernetworking/plugins"})}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"type"}),"\uc744 \uc81c\uc678\ud55c \ub098\uba38\uc9c0 \ud544\ub4dc\ub294 \ud50c\ub7ec\uadf8\uc778\ub9c8\ub2e4 \ub2e4\ub974\uba70, \uc815\ud574\uc9c4 \uac12\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"type"}),": CNI \ubc14\uc774\ub108\ub9ac \uc774\ub984\uacfc \ub9e4\uce6d\ub418\ub294 \uac12\uc785\ub2c8\ub2e4.","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"ls /opt/cni/bin"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"ipam"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"type"}),": IPAM \ubc14\uc774\ub108\ub9ac \uc774\ub984\uacfc \ub9e4\uce6d\ub418\ub294 \uac12\uc785\ub2c8\ub2e4.","\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://www.cni.dev/plugins/current/ipam/",children:"https://www.cni.dev/plugins/current/ipam/"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"dhcp"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"host-local"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.code,{children:"static"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"examplecalico",children:"Example(Calico)"}),"\n",(0,r.jsx)("center",{children:(0,r.jsxs)("figure",{children:[(0,r.jsx)(s.A,{src:(0,c.Ay)("img/mlops/network/calico/cni-with-calico-ipam.drawio")}),(0,r.jsx)("figcaption",{children:"Calico CNI and Calico IPAM(pod-network-cidr=10.130.0.0/16)"}),(0,r.jsx)("figcaption",{children:(0,r.jsx)(e.a,{href:"https://www.youtube.com/watch?v=JyLtg_SJ1lo",children:"https://www.youtube.com/watch?v=JyLtg_SJ1lo"})})]})})]})}function x(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(u,{...n})}):u(n)}},74856:(n,e,i)=>{i.d(e,{A:()=>l});var t=i(96540),r=i(74848);function l(n){let{src:e}=n;const[i,l]=(0,t.useState)("loading..."),c=(0,t.useRef)(null);return(0,t.useEffect)((()=>{if("undefined"==typeof window)return;const n=window.GraphViewer;n?fetch(e).then((n=>{if(!n.ok)throw new Error("Failed to fetch drawio file");return n.text()})).then((e=>{if(!e)return void l("Drawio file is empty");const i={editable:"_blank",highlight:"#0000ff",nav:!0,resize:!0,toolbar:"zoom lightbox",xml:e};c.current.dataset.mxgraph=JSON.stringify(i),l(""),setTimeout((()=>{n.createViewerForElement(c.current)}),0)})).catch((n=>{l("Failed to load diagram: "+n.message)})):l("GraphViewer is not loaded")}),[e]),(0,r.jsxs)("div",{className:"w-full",children:[i&&(0,r.jsx)("p",{children:i}),(0,r.jsx)("div",{className:"w-full bg-white",ref:c})]})}}}]);