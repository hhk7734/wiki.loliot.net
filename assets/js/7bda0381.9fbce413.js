"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[84099],{28453:(e,s,n)=>{n.d(s,{R:()=>t,x:()=>d});var r=n(96540);const o={},l=r.createContext(o);function t(e){const s=r.useContext(l);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function d(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),r.createElement(l.Provider,{value:s},e.children)}},93202:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>i,contentTitle:()=>d,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"mlops/kubernetes/tools/kubespray/upgrade","title":"Kubespray\ub85c Kubernetes Cluster \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uae30","description":"Kubespray\ub85c Kubernetes Cluster \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uae30","source":"@site/docs/mlops/kubernetes/tools/kubespray/upgrade.mdx","sourceDirName":"mlops/kubernetes/tools/kubespray","slug":"/mlops/kubernetes/tools/kubespray/upgrade","permalink":"/docs/mlops/kubernetes/tools/kubespray/upgrade","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/kubernetes/tools/kubespray/upgrade.mdx","tags":[],"version":"current","lastUpdatedAt":1746637031000,"frontMatter":{"id":"upgrade","title":"Kubespray\ub85c Kubernetes Cluster \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uae30","sidebar_label":"Cluster \uc5c5\uadf8\ub808\uc774\ub4dc","description":"Kubespray\ub85c Kubernetes Cluster \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uae30","keywords":["Kubespray","kubernetes","upgrade"]},"sidebar":"kubernetes","previous":{"title":"\ud3d0\uc1c4\ub9dd \uc124\uce58","permalink":"/docs/mlops/kubernetes/tools/kubespray/offline"},"next":{"title":"Kustomize","permalink":"/docs/mlops/kubernetes/tools/kustomize"}}');var o=n(74848),l=n(28453);const t={id:"upgrade",title:"Kubespray\ub85c Kubernetes Cluster \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uae30",sidebar_label:"Cluster \uc5c5\uadf8\ub808\uc774\ub4dc",description:"Kubespray\ub85c Kubernetes Cluster \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uae30",keywords:["Kubespray","kubernetes","upgrade"]},d=void 0,i={},a=[{value:"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d",id:"\uc0ac\uc804-\uc900\ube44-\uc0ac\ud56d",level:2},{value:"Cluster \uc5c5\uadf8\ub808\uc774\ub4dc",id:"cluster-\uc5c5\uadf8\ub808\uc774\ub4dc",level:2}];function c(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.h2,{id:"\uc0ac\uc804-\uc900\ube44-\uc0ac\ud56d",children:"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d"}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.a,{href:"/docs/mlops/kubernetes/tools/kubeadm/upgrade",children:"Kubeadm\uc73c\ub85c Kubernetes Cluster \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uae30"}),"\uc758 \uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d\uc744 \ucc38\uace0\ud574\uc8fc\uc138\uc694.(\uc5c5\uadf8\ub808\uc774\ub4dc \uacfc\uc815\uc744 \uc77d\uc5b4\ubcf4\ub294 \uac83\ub3c4 \uc88b\uc2b5\ub2c8\ub2e4.)"]}),"\n",(0,o.jsxs)(s.p,{children:["Kubernetes \ubc84\uc804\ub9cc \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uba74 \ub418\ub294 \uacbd\uc6b0 ",(0,o.jsx)(s.code,{children:"kube_version"})," \uc124\uc815\ub9cc \ubcc0\uacbd\ud558\uace0, Kubespray\ub3c4 \uc5c5\uadf8\ub808\uc774\ub4dc\ud574\uc57c\ud558\ub294 \uacbd\uc6b0 \ud0c0\uac9f \ubc84\uc804\uc758 ",(0,o.jsx)(s.strong,{children:"kubespray/inventory/sample"}),"\uc758 \ubcc0\uacbd\uc0ac\ud56d\uc744 \uae30\uc874 inventory \ub514\ub809\ud1a0\ub9ac\uc5d0 \ubc18\uc601\ud569\ub2c8\ub2e4."]}),"\n",(0,o.jsx)(s.h2,{id:"cluster-\uc5c5\uadf8\ub808\uc774\ub4dc",children:"Cluster \uc5c5\uadf8\ub808\uc774\ub4dc"}),"\n",(0,o.jsx)(s.admonition,{title:"Reference",type:"info",children:(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsx)(s.li,{children:(0,o.jsx)(s.a,{href:"https://kubespray.io/#/docs/operations/upgrades",children:"Kubespray / Operations / Upgrading Kubernetes"})}),"\n"]})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.code,{children:"facts.yml"})," \ud50c\ub808\uc774\ubd81\uc744 \uc2e4\ud589\ud558\uc5ec \ud074\ub7ec\uc2a4\ud130 \uc815\ubcf4\ub97c \uc218\uc9d1\ud569\ub2c8\ub2e4."]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-shell",children:"ansible-playbook -i <inventory> -b playbooks/facts.yml\n"})}),"\n",(0,o.jsx)(s.admonition,{type:"warning",children:(0,o.jsx)(s.p,{children:"\uc5c5\uadf8\ub808\uc774\ub4dc\ub97c \uc9c4\ud589\ud558\ub294 Node\ub294 drain\ub418\ubbc0\ub85c, Pod\uc774 \ucd95\ucd9c\ub429\ub2c8\ub2e4. Pod\uc774 \ucd95\ucd9c\ub418\uba74 \uc11c\ube44\uc2a4\uac00 \uc911\ub2e8\ub420 \uc218 \uc788\uc73c\ubbc0\ub85c \uc8fc\uc758\ud574\uc57c\ud569\ub2c8\ub2e4."})}),"\n",(0,o.jsx)(s.p,{children:"kube_control_plane, etcd\ub85c \ubc94\uc704\ub97c \uc124\uc815\ud558\uc5ec control plane Node\ub9cc \uba3c\uc800 \uc5c5\uadf8\ub808\uc774\ub4dc\ud569\ub2c8\ub2e4. \ud558\ub098\uc529 \uc5c5\uadf8\ub808\uc774\ub4dc \ub418\uba70, \uac01 Node\uc758 \uc5c5\uadf8\ub808\uc774\ub4dc \uac04\uaca9\uc740 \uae38\uc5b4\ub3c4 \ubb38\uc81c \uc5c6\uc2b5\ub2c8\ub2e4."}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-shell",children:'ansible-playbook -i <inventory> -b upgrade-cluster.yml --limit "kube_control_plane:etcd"\n'})}),"\n",(0,o.jsx)(s.p,{children:"worker Node\ub97c \uc5c5\uadf8\ub808\uc774\ub4dc\ud569\ub2c8\ub2e4."}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{className:"language-shell",children:"ansible-playbook -i <inventory> -b upgrade-cluster.yml --limit <node>\n"})}),"\n",(0,o.jsxs)(s.p,{children:[(0,o.jsx)(s.code,{children:"upgrade-cluster.yml"})," \ud50c\ub808\uc774\ubd81 \uc0ac\uc6a9 \uc2dc \uc544\ub798 \ubcc0\uc218\ub4e4\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,o.jsxs)(s.ul,{children:["\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"serial: 20%"}),": 1 \ub85c \uc124\uc815\ud558\uba74 worker Node\ub97c 1 \uac1c\uc529 \uc5c5\uadf8\ub808\uc774\ub4dc\ud569\ub2c8\ub2e4."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"upgrade_node_confirm: false"}),": ",(0,o.jsx)(s.code,{children:"true"}),"\ub85c \uc124\uc815 \uc2dc Node\ub97c drain\ud558\uae30 \uc804\uc5d0 \uc9c4\ud589 \uc5ec\ubd80\ub97c \ud655\uc778\ud569\ub2c8\ub2e4."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"upgrade_node_pause_seconds: 0"}),": ",(0,o.jsx)(s.code,{children:"upgrade_node_confirm"}),"\uac00 ",(0,o.jsx)(s.code,{children:"false"}),"\uc778 \uacbd\uc6b0 Node\ub97c drain\ud558\uae30 \uc804\uc5d0 \ub300\uae30\ud558\ub294 \uc2dc\uac04\uc785\ub2c8\ub2e4."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"upgrade_node_post_upgrade_confirm: false"}),": ",(0,o.jsx)(s.code,{children:"true"}),"\ub85c \uc124\uc815 \uc2dc Node\ub97c uncordon\ud558\uae30 \uc804\uc5d0 \uc9c4\ud589 \uc5ec\ubd80\ub97c \ud655\uc778\ud569\ub2c8\ub2e4."]}),"\n",(0,o.jsxs)(s.li,{children:[(0,o.jsx)(s.code,{children:"upgrade_node_post_upgrade_pause_seconds: 0"}),": ",(0,o.jsx)(s.code,{children:"upgrade_node_post_upgrade_confirm"}),"\uac00 ",(0,o.jsx)(s.code,{children:"false"}),"\uc778 \uacbd\uc6b0 Node\ub97c uncordon\ud558\uae30 \uc804\uc5d0 \ub300\uae30\ud558\ub294 \uc2dc\uac04\uc785\ub2c8\ub2e4."]}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);