"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[63184],{82579:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>t,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"mlops/mlops/workflow/argo-workflows/entrypoint-templates","title":"Argo Workflows entrypoint and templates","description":"Argo Workflows entrypoint and templates","source":"@site/docs/mlops/mlops/workflow/argo-workflows/entrypoint-templates.mdx","sourceDirName":"mlops/mlops/workflow/argo-workflows","slug":"/mlops/mlops/workflow/argo-workflows/entrypoint-templates","permalink":"/docs/mlops/mlops/workflow/argo-workflows/entrypoint-templates","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/mlops/workflow/argo-workflows/entrypoint-templates.mdx","tags":[],"version":"current","lastUpdatedAt":1736949978000,"frontMatter":{"id":"entrypoint-templates","title":"Argo Workflows entrypoint and templates","sidebar_label":"entrypoint and templates","description":"Argo Workflows entrypoint and templates","keywords":["argo","workflows","templates"]},"sidebar":"mlops","previous":{"title":"CRD","permalink":"/docs/mlops/mlops/workflow/argo-workflows/crd"},"next":{"title":"DAG template","permalink":"/docs/mlops/mlops/workflow/argo-workflows/dag"}}');var o=r(74848),l=r(28453);const t={id:"entrypoint-templates",title:"Argo Workflows entrypoint and templates",sidebar_label:"entrypoint and templates",description:"Argo Workflows entrypoint and templates",keywords:["argo","workflows","templates"]},i=void 0,d={},a=[{value:"entrypoint",id:"entrypoint",level:2},{value:"template",id:"template",level:2},{value:"<code>container</code>",id:"container",level:3},{value:"<code>containerSet</code>",id:"containerset",level:3},{value:"<code>script</code>",id:"script",level:3},{value:"<code>resource</code>",id:"resource",level:3},{value:"<code>data</code>",id:"data",level:3},{value:"<code>suspend</code>",id:"suspend",level:3},{value:"<code>http</code>",id:"http",level:3},{value:"<code>dag</code> and <code>steps</code>",id:"dag-and-steps",level:3}];function c(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"entrypoint",children:"entrypoint"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"entrypoint"}),"\ub85c \uc9c0\uc815\ub41c ",(0,o.jsx)(n.code,{children:"template"}),"\uc774 workflow\uc758 \uc2dc\uc791\uc810\uc774 \ub429\ub2c8\ub2e4."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"spec:\n  entrypoint: <templateName>\n"})}),"\n",(0,o.jsx)(n.h2,{id:"template",children:"template"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://argoproj.github.io/argo-workflows/fields/#template",children:"https://argoproj.github.io/argo-workflows/fields/#template"})}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"template"}),"\uc740 workflow\uc5d0\uc11c \uc791\uc5c5\uc744 \uc815\uc758\ud560 \ub54c \uc0ac\uc6a9\ud558\ub294 \uc2e4\ud589 \ub2e8\uc704\uc785\ub2c8\ub2e4. ",(0,o.jsx)(n.code,{children:"container"}),", ",(0,o.jsx)(n.code,{children:"script"}),", \ub4f1\uc740 \uc2e4\ud589 \uac00\ub2a5\ud55c \ud558\ub098\uc758 \uc791\uc5c5\uc744 \uc815\uc758\ud558\uba70, ",(0,o.jsx)(n.code,{children:"steps"}),", ",(0,o.jsx)(n.code,{children:"dag"}),"\ub294 \uc815\uc758\ub41c template\ub4e4\uc758 \uc2e4\ud589 \uc21c\uc11c\uac00 \uc815\uc758\ub41c \ud558\ub098\uc758 \uc9d1\ud569\uc744 \uc791\uc5c5\uc73c\ub85c \uc815\uc758\ud569\ub2c8\ub2e4."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"spec:\n  templates:\n    - name: <templateName>\n      daemon: false\n      # retryStrategy:\n      #   retryPolicy: OnFailure # OnFailure|OnError|OnTransientError|Always\n      #   limit: null # null|integer\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"daemon"}),": ",(0,o.jsx)(n.code,{children:"true"}),"\ub85c \uc124\uc815\ud558\uba74 \ud574\ub2f9 \ucee8\ud14c\uc774\ub108\uc758 Ready status\uac00 True\uac00 \ub418\uba74 \uc9c4\ud589\uc911 \uc5ec\ubd80\uc640 \uad00\uacc4\uc5c6\uc774 \ub2e4\uc74c \uc791\uc5c5\uc73c\ub85c \ub118\uc5b4\uac11\ub2c8\ub2e4. \uc885\ub8cc\ub418\uc9c0 \uc54a\ub294 \uc791\uc5c5\uc778 \uacbd\uc6b0 \uc804\uccb4 \uc791\uc5c5\uc5d0\uc11c \uc784\uc2dc\ub85c \uc0ac\uc6a9\ub420 \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \uc0dd\uc131\ud558\ub294 \ub4f1\uc758 \uc6a9\ub3c4\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"retryStrategy"}),": (Optional) \ud15c\ud50c\ub9bf\uc774 \uc2e4\ud328\ud588\uc744 \ub54c, \uc7ac\uc2dc\ub3c4\ud560 \ud69f\uc218\uc640 \uac04\uaca9\uc744 \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://argoproj.github.io/argo-workflows/retries/",children:"https://argoproj.github.io/argo-workflows/retries/"})}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"retryPolicy"}),": ",(0,o.jsx)(n.code,{children:"OnFailure"}),"(\uae30\ubcf8\uac12), ",(0,o.jsx)(n.code,{children:"OnError"}),", ",(0,o.jsx)(n.code,{children:"OnTransientError"}),", ",(0,o.jsx)(n.code,{children:"Always"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"limit"}),": null(\uae30\ubcf8\uac12)\uc774\uba74 \ubb34\ud55c \uc7ac\uc2dc\ub3c4, \uc815\uc218\uba74 \ud574\ub2f9 \ud69f\uc218\ub9cc\ud07c \uc7ac\uc2dc\ub3c4\ud569\ub2c8\ub2e4."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"expression"}),": (Optional) \uc7ac\uc2dc\ub3c4 \uc870\uac74","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["variables","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"lastRetry.exitCode"}),": exit \ucf54\ub4dc\ub97c \uc54c \uc218 \uc5c6\ub294 \uacbd\uc6b0 -1 \uc785\ub2c8\ub2e4."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"lastRetry.status"}),": ",(0,o.jsx)(n.code,{children:"Error"}),", ",(0,o.jsx)(n.code,{children:"Failed"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"lastRetry.duration"}),": \ub9c8\uc9c0\ub9c9 \uc7ac\uc2dc\ub3c4\uc758 \uc2dc\uc791 \uc2dc\uac04\ubd80\ud130 \uc885\ub8cc \uc2dc\uac04\uae4c\uc9c0\uc758 \uac04\uaca9\uc785\ub2c8\ub2e4."]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"lastRetry.message"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"backoff"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"affinity"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"container",children:(0,o.jsx)(n.code,{children:"container"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://argoproj.github.io/argo-workflows/fields/#container",children:"https://argoproj.github.io/argo-workflows/fields/#container"})}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"container"}),"\ub294 \uc6d0\ud558\ub294 \ucee8\ud14c\uc774\ub108 \uc774\ubbf8\uc9c0\ub97c \uc0ac\uc6a9\ud558\uc5ec Pod\uc744 \uc2e4\ud589\uc2dc\ud0a4\ub294 \uc791\uc5c5\uc744 \uc815\uc758\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. Kubernetes\uc758 container spec\uc744 \uadf8\ub300\ub85c \uc0ac\uc6a9\ud558\uc2dc\uba74 \ub429\ub2c8\ub2e4."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'spec:\n  entrypoint: container-test\n  templates:\n    - name: container-test\n      container:\n        # name\uc740 main\uc73c\ub85c \uace0\uc815\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.\n        image: docker/whalesay\n        command: [cowsay]\n        args: ["hello world"]\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"spec:\n  template:\n    - name: <templateName>\n      daemon: true\n      container:\n        image: postgres:15.3\n        ports:\n          - name: postgres\n            containerPort: 5432\n        env:\n          - name: PGDATA\n            value: /lol_iot/postgresql/data\n          - name: POSTGRES_USER\n            value: test\n          - name: POSTGRES_PASSWORD\n            value: test\n        volumeMounts:\n          - name: tmp-db\n            mountPath: /lol_iot/postgresql\n"})}),"\n",(0,o.jsx)(n.h3,{id:"containerset",children:(0,o.jsx)(n.code,{children:"containerSet"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://argoproj.github.io/argo-workflows/fields/#containersettemplate",children:"https://argoproj.github.io/argo-workflows/fields/#containersettemplate"})}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"script",children:(0,o.jsx)(n.code,{children:"script"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://argoproj.github.io/argo-workflows/fields/#scripttemplate",children:"https://argoproj.github.io/argo-workflows/fields/#scripttemplate"})}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["\uc2a4\ud06c\ub9bd\ud2b8 \uc2e4\ud589\uc744 \ubc14\ub85c \ud560 \uc218 \uc788\ub3c4\ub85d ",(0,o.jsx)(n.code,{children:"source"})," \ud544\ub4dc\ub97c \ucd94\uac00\ud55c ",(0,o.jsx)(n.code,{children:"container"}),"\uc758 \ub798\ud37c\uc785\ub2c8\ub2e4."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"spec:\n  entrypoint: script-test\n  templates:\n    - name: script-test\n      script:\n        image: python:alpine3.6\n        command: [python]\n        source: |\n          import random\n          i = random.randint(1, 100)\n          print(i)\n"})}),"\n",(0,o.jsx)(n.h3,{id:"resource",children:(0,o.jsx)(n.code,{children:"resource"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"resource"}),"\ub294 Kubernetes \ub9ac\uc18c\uc2a4\ub97c \uc9c1\uc811 \uc120\uc5b8\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://argoproj.github.io/argo-workflows/fields/#resourcetemplate",children:"https://argoproj.github.io/argo-workflows/fields/#resourcetemplate"})}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'spec:\n  entrypoint: resource-test\n  serviceAccountName: argo-workflow\n  templates:\n    - name: resource-test\n      steps:\n        - - name: submit-resource\n            template: create-pod\n\n        - - name: delete-resource\n            arguments:\n              parameters:\n                - name: selector\n                  value: cleanup=true\n            template: delete-resource\n\n    - name: create-pod\n      resource:\n        action: create\n        manifest: |\n          apiVersion: v1\n          kind: Pod\n          metadata:\n            generateName: hello-world-\n            labels:\n              cleanup: "true"\n          spec:\n            containers:\n            - name: hello-world\n              image: docker/whalesay\n              command: [cowsay]\n              args: ["hello world"]\n\n    - name: delete-resource\n      inputs:\n        parameters:\n          - name: selector\n      resource:\n        action: delete\n        flags: ["pod", "--selector", "{{inputs.parameters.selector}}"]\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"setOwnerReference"}),": ",(0,o.jsx)(n.code,{children:"true"}),"\ub85c \uc124\uc815\ud558\uba74 workflow\uac00 \uc0ad\uc81c\ub420 \ub54c \ub9ac\uc18c\uc2a4\ub3c4 \ud568\uaed8 \uc0ad\uc81c\ub429\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsxs)(n.a,{href:"/docs/mlops/mlops/workflow/argo-workflows/variables#resource---outputsparameters",children:[(0,o.jsx)(n.code,{children:"resource"})," -> ",(0,o.jsx)(n.code,{children:"outputs.parameters"})]})}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"data",children:(0,o.jsx)(n.code,{children:"data"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://argoproj.github.io/argo-workflows/fields/#data",children:"https://argoproj.github.io/argo-workflows/fields/#data"})}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"suspend",children:(0,o.jsx)(n.code,{children:"suspend"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://argoproj.github.io/argo-workflows/fields/#suspendtemplate",children:"https://argoproj.github.io/argo-workflows/fields/#suspendtemplate"})}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"suspend"}),"\ub294 workflow\ub97c \uc77c\uc2dc \uc911\uc9c0\uc2dc\ud0a4\ub294 \uc791\uc5c5\uc744 \uc815\uc758\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4. ",(0,o.jsx)(n.code,{children:"argo resume"}),"\uc774\ub098 ",(0,o.jsx)(n.code,{children:"/api/v1/workflows/{namespace}/{name}/resume"}),"\ub97c \ud638\ucd9c\ud558\uc5ec \ub2e4\uc2dc \uc2dc\uc791\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'spec:\n  entrypoint: suspend-test\n  templates:\n    - name: suspend-test\n      suspend:\n        {} # \ubb34\uae30\ud55c \uc911\uc9c0\n        # duration: "20s"\n'})}),"\n",(0,o.jsx)(n.h3,{id:"http",children:(0,o.jsx)(n.code,{children:"http"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"https://argoproj.github.io/argo-workflows/fields/#http",children:"https://argoproj.github.io/argo-workflows/fields/#http"})}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"spec:\n  templates:\n    - name: <templateName>\n      http:\n        url: <url>\n        method: <method>\n        headers:\n          - name: <headerName> # ex) x-forwarded-user\n            value: <headerValue>\n        body: <body>\n        successCondition: <successCondition> # ex) response.statusCode < 400\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["variables","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"request.body"})}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"request.headers"}),": ",(0,o.jsx)(n.code,{children:"map[string]string"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"response.url"}),": http.url\uacfc \ub3d9\uc77c\ud569\ub2c8\ub2e4."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"response.method"}),": http.method\uc640 \ub3d9\uc77c\ud569\ub2c8\ub2e4."]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"response.statusCode"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"response.body"})}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"response.headers"}),": ",(0,o.jsx)(n.code,{children:"map[string]string"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.h3,{id:"dag-and-steps",children:[(0,o.jsx)(n.code,{children:"dag"})," and ",(0,o.jsx)(n.code,{children:"steps"})]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/docs/mlops/mlops/workflow/argo-workflows/dag",children:"Argo Workflows DAG template"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>i});var s=r(96540);const o={},l=s.createContext(o);function t(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);