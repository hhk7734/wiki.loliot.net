"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[84097],{28453:(e,n,l)=>{l.d(n,{R:()=>t,x:()=>o});var s=l(96540);const r={},d=s.createContext(r);function t(e){const n=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(d.Provider,{value:n},e.children)}},57654:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>i,contentTitle:()=>o,default:()=>u,frontMatter:()=>t,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"mlops/kubernetes/tools/kubeadm/upgrade","title":"Kubeadm\uc73c\ub85c Kubernetes Cluster \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uae30","description":"Kubeadm\uc73c\ub85c Kubernetes Cluster \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uae30","source":"@site/docs/mlops/kubernetes/tools/kubeadm/upgrade.mdx","sourceDirName":"mlops/kubernetes/tools/kubeadm","slug":"/mlops/kubernetes/tools/kubeadm/upgrade","permalink":"/docs/mlops/kubernetes/tools/kubeadm/upgrade","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/kubernetes/tools/kubeadm/upgrade.mdx","tags":[],"version":"current","lastUpdatedAt":1746291681000,"frontMatter":{"id":"upgrade","title":"Kubeadm\uc73c\ub85c Kubernetes Cluster \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uae30","sidebar_label":"Cluster \uc5c5\uadf8\ub808\uc774\ub4dc","description":"Kubeadm\uc73c\ub85c Kubernetes Cluster \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uae30","keywords":["Kubeadm","kubernetes","upgrade"]},"sidebar":"kubernetes","previous":{"title":"\uc778\uc99d\uc11c \uad00\ub9ac","permalink":"/docs/mlops/kubernetes/tools/kubeadm/certs"},"next":{"title":"Kubespray","permalink":"/docs/mlops/kubernetes/tools/kubespray/"}}');var r=l(74848),d=l(28453);const t={id:"upgrade",title:"Kubeadm\uc73c\ub85c Kubernetes Cluster \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uae30",sidebar_label:"Cluster \uc5c5\uadf8\ub808\uc774\ub4dc",description:"Kubeadm\uc73c\ub85c Kubernetes Cluster \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uae30",keywords:["Kubeadm","kubernetes","upgrade"]},o=void 0,i={},a=[{value:"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d",id:"\uc0ac\uc804-\uc900\ube44-\uc0ac\ud56d",level:2},{value:"Control Plane Node \uc5c5\uadf8\ub808\uc774\ub4dc",id:"control-plane-node-\uc5c5\uadf8\ub808\uc774\ub4dc",level:2},{value:"\uccab \ubc88\uc9f8 Control Plane Node",id:"\uccab-\ubc88\uc9f8-control-plane-node",level:3},{value:"\ucd94\uac00\ub41c Control Plane Node",id:"\ucd94\uac00\ub41c-control-plane-node",level:3},{value:"kubelet/kubectl \uc5c5\uadf8\ub808\uc774\ub4dc",id:"kubeletkubectl-\uc5c5\uadf8\ub808\uc774\ub4dc",level:3},{value:"Worker Node \uc5c5\uadf8\ub808\uc774\ub4dc",id:"worker-node-\uc5c5\uadf8\ub808\uc774\ub4dc",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.admonition,{title:"Reference",type:"info",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/tasks/administer-cluster/kubeadm/kubeadm-upgrade/",children:"Kubernetes / Docs / Upgrading kubeadm clusters"})}),"\n"]})}),"\n",(0,r.jsx)(n.h2,{id:"\uc0ac\uc804-\uc900\ube44-\uc0ac\ud56d",children:"\uc0ac\uc804 \uc900\ube44 \uc0ac\ud56d"}),"\n",(0,r.jsxs)(n.p,{children:["\uc5c5\uadf8\ub808\uc774\ub4dc\ud560 \ubc84\uc804\uc744 \uc120\ud0dd\ud569\ub2c8\ub2e4. ",(0,r.jsx)(n.a,{href:"https://kubernetes.io/releases/version-skew-policy/",children:"Kubernetes / Version Skew Policy"}),"\uc5d0 \ub530\ub77c minor \ubc84\uc804 1 \uc99d\uac00 \ub610\ub294 patch \ubc84\uc804 \uc99d\uac00\ub9cc \uac00\ub2a5\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG",children:"Kubernetes GitHub / CHANGELOG"}),"\ub97c \uc77d\uace0 \uc5b4\ub5a4 \uae30\ub2a5\uc774 \ucd94\uac00\ub418\uace0 \uc81c\uac70\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(n.admonition,{type:"tip",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://github.com/doitintl/kube-no-trouble",children:"kubent"}),"\ub294 Kubernetes \ud074\ub7ec\uc2a4\ud130\uc5d0 deprecated\ub41c API\ub97c \uc0ac\uc6a9\ud558\ub294\uc9c0 \ud655\uc778\ud558\ub294 \ub3c4\uad6c\uc785\ub2c8\ub2e4.\n",(0,r.jsx)(n.a,{href:"/docs/lang/etc/command-line-tools/asdf#%ED%94%8C%EB%9F%AC%EA%B7%B8%EC%9D%B8",children:"asdf\ub85c \ub7f0\ud0c0\uc784 \ubc84\uc804 \uad00\ub9ac\ud558\uae30"}),"\ub97c \ucc38\uace0\ud558\uc5ec kubent\ub97c \uc124\uce58\ud569\ub2c8\ub2e4."]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"asdf plugin add kubent\n"})}),(0,r.jsx)(n.p,{children:"\uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud558\uc5ec deprecated\ub41c API\ub97c \uc0ac\uc6a9\ud558\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4."}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kubent\n"})})]}),"\n",(0,r.jsx)(n.h2,{id:"control-plane-node-\uc5c5\uadf8\ub808\uc774\ub4dc",children:"Control Plane Node \uc5c5\uadf8\ub808\uc774\ub4dc"}),"\n",(0,r.jsx)(n.h3,{id:"\uccab-\ubc88\uc9f8-control-plane-node",children:"\uccab \ubc88\uc9f8 Control Plane Node"}),"\n",(0,r.jsx)(n.p,{children:"\ud0c0\uac9f \ubc84\uc804\uc758 kubeadm\uc744 \uc124\uce58\ud55c \ud6c4 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud558\uc5ec \uc5c5\uadf8\ub808\uc774\ub4dc \uacc4\ud68d\uc744 \ud655\uc778\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kubeadm upgrade plan\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"sudo kubeadm upgrade apply v<version>\n"})}),"\n",(0,r.jsx)(n.p,{children:"\uc704 \uba85\ub839\uc5b4\uac00 \uc2e4\ud589\ub418\uba74"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ud074\ub7ec\uc2a4\ud130\uac00 \uc5c5\uadf8\ub808\uc774\ub4dc \uac00\ub2a5\ud55c \uc0c1\ud0dc\uc778\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"Version Skey Policy\ub97c \ub530\ub974\ub294\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"control plane component\ub4e4\uc758 \uc774\ubbf8\uc9c0\uac00 \uc788\ub294\uc9c0 \ub610\ub294 pull \uac00\ub2a5\ud55c\uc9c0 \ud655\uc778\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"control plane component\ub4e4\uc758 \uc124\uc815\uc774 \uc5c5\uadf8\ub808\uc774\ub4dc\uac00 \ud544\uc694\ud55c \uacbd\uc6b0 \uc0dd\uc131\ud558\uac70\ub098 \uc720\uc800\uac00 \uc81c\uacf5\ud55c \uc124\uc815\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"control plane component\ub4e4\uc744 \uc5c5\uadf8\ub808\uc774\ub4dc\ud569\ub2c8\ub2e4. \uc2e4\ud328\ud558\uba74 \ub864\ubc31\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"\uc0c8\ub85c\uc6b4 CoreDNS, kube-proxy manifest\ub97c \uc801\uc6a9\ud558\uace0, \ud544\uc694\ud55c RBAC \uc124\uc815\uc744 \uc0dd\uc131\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"apiserver\uc758 \uc778\uc99d\uc11c \ub9cc\ub8cc\uac00 180\uc77c \uc774\ub0b4\uc778 \uacbd\uc6b0 \uc778\uc99d\uc11c\ub97c \uac31\uc2e0\ud569\ub2c8\ub2e4."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"\ucd94\uac00\ub41c-control-plane-node",children:"\ucd94\uac00\ub41c Control Plane Node"}),"\n",(0,r.jsx)(n.p,{children:"\ud0c0\uac9f \ubc84\uc804\uc758 kubeadm\uc744 \uc124\uce58\ud55c \ud6c4 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud558\uc5ec \uc5c5\uadf8\ub808\uc774\ub4dc\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"sudo kubeadm upgrade node\n"})}),"\n",(0,r.jsx)(n.p,{children:"\uc704 \uba85\ub839\uc5b4\uac00 \uc2e4\ud589\ub418\uba74"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c ClusterConfiguration\uc744 \uac00\uc838\uc635\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"\uc0c1\ud669\uc5d0 \ub530\ub77c kube-apiserver\uc758 \uc778\uc99d\uc11c\ub97c \ubc31\uc5c5\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"control plane component\ub4e4\uc758 static Pod manifest\ub97c \uc5c5\uadf8\ub808\uc774\ub4dc\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"kubelet \uc124\uc815\uc744 \uc5c5\uadf8\ub808\uc774\ub4dc\ud569\ub2c8\ub2e4."}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"kubeletkubectl-\uc5c5\uadf8\ub808\uc774\ub4dc",children:"kubelet/kubectl \uc5c5\uadf8\ub808\uc774\ub4dc"}),"\n",(0,r.jsx)(n.p,{children:"kubelet\uc744 \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uae30 \uc804\uc5d0 \ud574\ub2f9 \ub178\ub4dc\uc758 Pod\uc744 \ubaa8\ub450 \ucd95\ucd9c\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kubectl drain <node> --ignore-daemonsets\n"})}),"\n",(0,r.jsx)(n.p,{children:"\ud0c0\uac9f \ubc84\uc804\uc758 kubelet/kubectl\uc744 \uc124\uce58\ud558\uace0 kubelet\uc744 \uc7ac\uc2dc\uc791\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"sudo systemctl daemon-reload\nsudo systemctl restart kubelet\n"})}),"\n",(0,r.jsx)(n.p,{children:"\uc5c5\uadf8\ub808\uc774\ub4dc\ub41c Node\ub97c \ub2e4\uc2dc \uc2a4\ucf00\uc904 \uac00\ub2a5 \uc0c1\ud0dc\ub85c \ubcc0\uacbd\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kubectl uncordon <node>\n"})}),"\n",(0,r.jsx)(n.h2,{id:"worker-node-\uc5c5\uadf8\ub808\uc774\ub4dc",children:"Worker Node \uc5c5\uadf8\ub808\uc774\ub4dc"}),"\n",(0,r.jsx)(n.p,{children:"\ud0c0\uac9f \ubc84\uc804\uc758 kubeadm\uc744 \uc124\uce58\ud55c \ud6c4 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"sudo kubeadm upgrade node\n"})}),"\n",(0,r.jsx)(n.p,{children:"\uc704 \uba85\ub839\uc5b4\uac00 \uc2e4\ud589\ub418\uba74"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ud074\ub7ec\uc2a4\ud130\uc5d0\uc11c ClusterConfiguration\uc744 \uac00\uc838\uc635\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"kubelet \uc124\uc815\uc744 \uc5c5\uadf8\ub808\uc774\ub4dc\ud569\ub2c8\ub2e4."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"kubelet\uc744 \uc5c5\uadf8\ub808\uc774\ub4dc\ud558\uae30 \uc804\uc5d0 \ud574\ub2f9 \ub178\ub4dc\uc758 Pod\uc744 \ubaa8\ub450 \ucd95\ucd9c\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kubectl drain <node> --ignore-daemonsets\n"})}),"\n",(0,r.jsx)(n.p,{children:"\ud0c0\uac9f \ubc84\uc804\uc758 kubelet/kubectl\uc744 \uc124\uce58\ud558\uace0 kubelet\uc744 \uc7ac\uc2dc\uc791\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"sudo systemctl daemon-reload\nsudo systemctl restart kubelet\n"})}),"\n",(0,r.jsx)(n.p,{children:"\uc5c5\uadf8\ub808\uc774\ub4dc\ub41c Node\ub97c \ub2e4\uc2dc \uc2a4\ucf00\uc904 \uac00\ub2a5 \uc0c1\ud0dc\ub85c \ubcc0\uacbd\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kubectl uncordon <node>\n"})})]})}function u(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);