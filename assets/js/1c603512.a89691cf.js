"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[26792],{1144:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>m,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"mlops/mlops/auth/tls/x509","title":"X.509","description":"X.509","source":"@site/docs/mlops/mlops/auth/tls/x509.mdx","sourceDirName":"mlops/mlops/auth/tls","slug":"/mlops/mlops/auth/tls/x509","permalink":"/docs/mlops/mlops/auth/tls/x509","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/mlops/auth/tls/x509.mdx","tags":[],"version":"current","lastUpdatedAt":1743351841000,"frontMatter":{"id":"x509","title":"X.509","sidebar_label":"X.509","description":"X.509","keywords":["X.509","PKI"]},"sidebar":"mlops","previous":{"title":"TLS","permalink":"/docs/mlops/mlops/auth/tls/"},"next":{"title":"cert-manager","permalink":"/docs/mlops/mlops/auth/cert-manager/"}}');var a=t(74848),r=t(28453);const c={id:"x509",title:"X.509",sidebar_label:"X.509",description:"X.509",keywords:["X.509","PKI"]},s=void 0,o={},l=[{value:"Root CA",id:"root-ca",level:2},{value:"root-ca.key(Private Key)",id:"root-cakeyprivate-key",level:3},{value:"root-ca.conf",id:"root-caconf",level:3},{value:"root-ca.csr(CSR, \uc778\uc99d \uc11c\uba85 \uc694\uccad\uc11c)",id:"root-cacsrcsr-\uc778\uc99d-\uc11c\uba85-\uc694\uccad\uc11c",level:3},{value:"root-ca.crt(CRT, \uc778\uc99d\uc11c)",id:"root-cacrtcrt-\uc778\uc99d\uc11c",level:3},{value:"Intermediate CA",id:"intermediate-ca",level:2},{value:"intermediate-ca.key",id:"intermediate-cakey",level:3},{value:"intermediate-ca.conf",id:"intermediate-caconf",level:3},{value:"intermediate-ca.csr",id:"intermediate-cacsr",level:3},{value:"intermediate-ca.crt",id:"intermediate-cacrt",level:3},{value:"cert-chain.crt",id:"cert-chaincrt",level:3}];function d(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"openssl version -a\n"})}),"\n",(0,a.jsx)(n.h2,{id:"root-ca",children:"Root CA"}),"\n",(0,a.jsx)(n.h3,{id:"root-cakeyprivate-key",children:"root-ca.key(Private Key)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"openssl genrsa -out root-ca.key 3072\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"openssl ecparam -genkey -name prime256v1 -noout -out root-ca.key\n"})}),"\n",(0,a.jsx)(n.h3,{id:"root-caconf",children:"root-ca.conf"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ini",children:"[ req ]\ndefault_md = sha256\ndefault_bits = 3072\nencrypt_key = no\nprompt = no\nutf8 = yes\n\nreq_extensions = req_ext\nx509_extensions = req_ext\n\ndistinguished_name = req_distinguished_name\n\n[ req_ext ]\nbasicConstraints = critical, CA:true\nkeyUsage = critical, digitalSignature, nonRepudiation, keyEncipherment, keyCertSign\n\nsubjectKeyIdentifier = hash\nsubjectAltName=@san\n\n[ san ]\nDNS.1 = loliot.net\n\n[ req_distinguished_name ]\norganizationName = lol-iot\norganizationalUnitName = devops\ncountryName = KR\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"commonName -> CN"}),"\n",(0,a.jsx)(n.li,{children:"organizationName -> O"}),"\n",(0,a.jsx)(n.li,{children:"organizationalUnitName -> OU"}),"\n",(0,a.jsx)(n.li,{children:"localityName -> L"}),"\n",(0,a.jsx)(n.li,{children:"stateOrProvinceName -> ST"}),"\n",(0,a.jsx)(n.li,{children:"countryName -> C"}),"\n",(0,a.jsx)(n.li,{children:"emailAddress -> EMAIL"}),"\n"]}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\uc778\uc99d\uc11c\uc758 CN(Common Name)\uc774 User\ub85c \uc778\uc2dd\ub429\ub2c8\ub2e4."}),"\n",(0,a.jsx)(n.li,{children:"\uc778\uc99d\uc11c\uc758 O(Organization)\uac00 Group\uc73c\ub85c \uc778\uc2dd\ub429\ub2c8\ub2e4."}),"\n"]})}),"\n",(0,a.jsx)(n.h3,{id:"root-cacsrcsr-\uc778\uc99d-\uc11c\uba85-\uc694\uccad\uc11c",children:"root-ca.csr(CSR, \uc778\uc99d \uc11c\uba85 \uc694\uccad\uc11c)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"openssl req -new -key root-ca.key -config root-ca.conf -out root-ca.csr\n"})}),"\n",(0,a.jsx)(n.h3,{id:"root-cacrtcrt-\uc778\uc99d\uc11c",children:"root-ca.crt(CRT, \uc778\uc99d\uc11c)"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"openssl x509 -req -days 7300 -signkey root-ca.key \\\n    -extensions req_ext -extfile root-ca.conf \\\n    -in root-ca.csr -out root-ca.crt\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"openssl x509 -in root-ca.crt -text -noout\n"})}),"\n",(0,a.jsx)(n.h2,{id:"intermediate-ca",children:"Intermediate CA"}),"\n",(0,a.jsx)(n.h3,{id:"intermediate-cakey",children:"intermediate-ca.key"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"openssl genrsa -out intermediate-ca.key 3072\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"openssl ecparam -genkey -name prime256v1 -noout -out intermediate-ca.key\n"})}),"\n",(0,a.jsx)(n.h3,{id:"intermediate-caconf",children:"intermediate-ca.conf"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ini",children:"[ req ]\ndefault_md = sha256\ndefault_bits = 3072\nencrypt_key = no\nprompt = no\nutf8 = yes\n\nreq_extensions = req_ext\nx509_extensions = req_ext\n\ndistinguished_name = req_distinguished_name\n\n[ req_ext ]\nbasicConstraints = critical, CA:true, pathlen:0\nkeyUsage = critical, digitalSignature, nonRepudiation, keyEncipherment, keyCertSign\n\nsubjectKeyIdentifier = hash\nsubjectAltName=@san\n\n[ san ]\nDNS.1 = loliot.net\n\n[ req_distinguished_name ]\norganizationName = lol-iot\norganizationalUnitName = devops\ncountryName = KR\nlocalityName = Seoul\n"})}),"\n",(0,a.jsx)(n.h3,{id:"intermediate-cacsr",children:"intermediate-ca.csr"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"openssl req -new -config intermediate-ca.conf -key intermediate-ca.key -out intermediate-ca.csr\n"})}),"\n",(0,a.jsx)(n.h3,{id:"intermediate-cacrt",children:"intermediate-ca.crt"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"openssl x509 -req -days 1825 \\\n    -CA root-ca.crt -CAkey root-ca.key -CAcreateserial \\\n    -extensions req_ext -extfile intermediate-ca.conf \\\n    -in intermediate-ca.csr -out intermediate-ca.crt\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"openssl x509 -in intermediate-ca.crt -text -noout\n"})}),"\n",(0,a.jsx)(n.h3,{id:"cert-chaincrt",children:"cert-chain.crt"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-shell",children:"cat intermediate-ca.crt ../root-ca.crt > cert-chain.crt\n"})})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>s});var i=t(96540);const a={},r=i.createContext(a);function c(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);