"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[3567],{21857:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"mlops/kubernetes/tools/kubeadm/control-plane","title":"Kubeadm\uc73c\ub85c Kubernetes Control Plane \uad00\ub9ac\ud558\uae30","description":"Kubeadm\uc73c\ub85c Kubernetes Control Plane \uad00\ub9ac\ud558\uae30","source":"@site/docs/mlops/kubernetes/tools/kubeadm/control-plane.mdx","sourceDirName":"mlops/kubernetes/tools/kubeadm","slug":"/mlops/kubernetes/tools/kubeadm/control-plane","permalink":"/docs/mlops/kubernetes/tools/kubeadm/control-plane","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/kubernetes/tools/kubeadm/control-plane.mdx","tags":[],"version":"current","lastUpdatedAt":1746545636000,"frontMatter":{"id":"control-plane","title":"Kubeadm\uc73c\ub85c Kubernetes Control Plane \uad00\ub9ac\ud558\uae30","sidebar_label":"Control Plane \uad00\ub9ac","description":"Kubeadm\uc73c\ub85c Kubernetes Control Plane \uad00\ub9ac\ud558\uae30","keywords":["Kubeadm","kubernetes","Control Plane"]},"sidebar":"kubernetes","previous":{"title":"Kubeadm","permalink":"/docs/mlops/kubernetes/tools/kubeadm/"},"next":{"title":"\uc778\uc99d\uc11c \uad00\ub9ac","permalink":"/docs/mlops/kubernetes/tools/kubeadm/certs"}}');var r=l(74848),i=l(28453);const c={id:"control-plane",title:"Kubeadm\uc73c\ub85c Kubernetes Control Plane \uad00\ub9ac\ud558\uae30",sidebar_label:"Control Plane \uad00\ub9ac",description:"Kubeadm\uc73c\ub85c Kubernetes Control Plane \uad00\ub9ac\ud558\uae30",keywords:["Kubeadm","kubernetes","Control Plane"]},d=void 0,o={},t=[{value:"ClusterConfiguration \uc124\uc815\ud558\uae30",id:"clusterconfiguration-\uc124\uc815\ud558\uae30",level:2},{value:"\uc124\uc815 \uc801\uc6a9\ud558\uae30",id:"\uc124\uc815-\uc801\uc6a9\ud558\uae30",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"clusterconfiguration-\uc124\uc815\ud558\uae30",children:"ClusterConfiguration \uc124\uc815\ud558\uae30"}),"\n",(0,r.jsx)(n.admonition,{title:"Reference",type:"info",children:(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/reference/config-api/kubeadm-config.v1beta4/",children:"Kubernetes / Docs / kubeadm Configuration"})}),"\n"]})}),"\n",(0,r.jsxs)(n.admonition,{type:"warning",children:[(0,r.jsxs)(n.p,{children:["kube-system Namespace\uc758 ",(0,r.jsx)(n.strong,{children:"kubeadm-config"})," ConfigMap\uc5d0 \uc800\uc7a5\ub41c \uc124\uc815\uc774 SSOT\uc785\ub2c8\ub2e4."]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"/etc/kubernetes/kubeadm-config.yaml"}),"\uc744 \uc0ac\uc6a9\ud558\uae30 \uc804/\ud6c4\uc5d0 ",(0,r.jsx)(n.code,{children:"ClusterConfiguration"}),"\uc774 kubeadm-config\uc758 \ub0b4\uc6a9\uacfc \uac19\uc740\uc9c0 \ud655\uc778\ud574\uc57c\ud569\ub2c8\ub2e4."]}),(0,r.jsx)(n.p,{children:"\ud30c\uc77c\uc744 \ubcc0\uacbd\ud55c \uacbd\uc6b0\uc5d0\ub294 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc0ac\uc6a9\ud558\uc5ec kubeadm-config\uc5d0 \ubcc0\uacbd\uc0ac\ud56d\uc744 \ubc18\uc601\ud569\ub2c8\ub2e4."}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kubeadm init phase upload-config kubeadm --config=/etc/kubernetes/kubeadm-config.yaml\n"})})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="/etc/kubernetes/kubeadm-config.yaml"',children:"apiVersion: kubeadm.k8s.io/v1beta4\nkind: ClusterConfiguration\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"kubernetesVersion: <version>"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"apiServer"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"extraArgs: []"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"name: <name>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"value: <value>"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"extraEnvs: []"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"name: <name>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"value: <value>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"valueFrom"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"extraVolumes: []"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"name: <name>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"hostPath: <hostPath>"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"mountPath: <mountPath>"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"readOnly: <bool>"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\uae30\ubcf8\uac12: ",(0,r.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"pathType: DirectoryOrCreate|Directory|FileOrCreate|File|Socket|CharDevice|BlockDevice"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\uae30\ubcf8\uac12: ",(0,r.jsx)(n.code,{children:'""'})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"certSANs: []"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"kube-apiserver\uc758 \uc778\uc99d\uc11c\uc5d0 \ucd94\uac00\ud560 Subject Alternative Name\uc744 \uc124\uc815\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.li,{children:"IP \ub610\ub294 domain\uc744 \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"etcd"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"external"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\uc678\ubd80 etcd\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"local"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"etcd\ub97c static Pod\uc73c\ub85c \uc2e4\ud589\ud569\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"controllerManager"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"extraArgs: []"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"extraEnvs: []"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"extraVolumes: []"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"scheduler"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"extraArgs: []"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"extraEnvs: []"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"extraVolumes: []"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\uc124\uc815-\uc801\uc6a9\ud558\uae30",children:"\uc124\uc815 \uc801\uc6a9\ud558\uae30"}),"\n",(0,r.jsx)(n.p,{children:"\uc124\uc815\uc744 \ubcc0\uacbd\ud55c \ud6c4 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc2e4\ud589\ud558\uba74 static Pod manifest\uac00 \ubcc0\uacbd\ub418\uace0, kubelet\uc774 \uc774\ub97c \uac10\uc9c0\ud558\uc5ec static Pod\ub97c \uc7ac\uc2dc\uc791\ud569\ub2c8\ub2e4."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kubeadm init phase control-plane <command> \\\n  --config=/etc/kubernetes/kubeadm-config.yaml \\\n  [<flag> ...]\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"<command>"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"apiserver"}),": kube-apiserver static Pod manifest\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"controller-manager"}),": kube-controller-manager static Pod manifest\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"scheduler"}),": kube-scheduler static Pod manifest\ub97c \uc0dd\uc131\ud569\ub2c8\ub2e4."]}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"all"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"<flag>"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--config=<file>"}),": ",(0,r.jsx)(n.code,{children:"ClusterConfiguration"})," \uc124\uc815 \ud30c\uc77c\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"kubeadm init phase etcd local \\\n  --config=/etc/kubernetes/kubeadm-config.yaml \\\n  [<flag> ...]\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"--config=<file>"}),": ",(0,r.jsx)(n.code,{children:"ClusterConfiguration"})," \uc124\uc815 \ud30c\uc77c\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,r.jsxs)(n.admonition,{type:"warning",children:[(0,r.jsx)(n.p,{children:"\uc124\uc815\uc740 \ubcc0\uacbd\ub418\uc9c0 \uc54a\uc558\uc9c0\ub9cc, \uc124\uc815\uc5d0\uc11c \uc0ac\uc6a9\ub41c \ud30c\uc77c\uc774 \ubcc0\uacbd\ub418\uc5b4 kube-apiserver\ub97c \uc7ac\uc2dc\uc791\ud574\uc57c\ud558\ub294 \uacbd\uc6b0 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4."}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"crictl pods --namespace kube-system --name 'kube-apiserver-*' -q \\\n    | xargs crictl rmp -f\n"})}),(0,r.jsx)(n.p,{children:"\ubaa8\ub4e0 \ucef4\ud3ec\ub10c\ud2b8\ub97c \uc7ac\uc2dc\uc791\ud574\uc57c\ud558\ub294 \uacbd\uc6b0 \uc544\ub798 \uba85\ub839\uc5b4\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4."}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"crictl pods --namespace kube-system --name 'kube-scheduler-*|kube-controller-manager-*|kube-apiserver-*|etcd-*' -q \\\n    | xargs crictl rmp -f\n"})})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},28453:(e,n,l)=>{l.d(n,{R:()=>c,x:()=>d});var s=l(96540);const r={},i=s.createContext(r);function c(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);