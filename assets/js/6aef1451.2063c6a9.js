"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[10744],{28453:(i,e,n)=>{n.d(e,{R:()=>a,x:()=>l});var r=n(96540);const s={},t=r.createContext(s);function a(i){const e=r.useContext(t);return r.useMemo((function(){return"function"==typeof i?i(e):{...e,...i}}),[e,i])}function l(i){let e;return e=i.disableParentContext?"function"==typeof i.components?i.components(s):i.components||s:a(i.components),r.createElement(t.Provider,{value:e},i.children)}},89087:(i,e,n)=>{n.r(e),n.d(e,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"mlops/nn/llm/pragmatic-disaggregation","title":"Beyond the Buzz (2506) - A Pragmatic Take on Inference Disaggregation","description":"Beyond the Buzz (2506) - A Pragmatic Take on Inference Disaggregation","source":"@site/docs/mlops/nn/llm/pragmatic-disaggregation.mdx","sourceDirName":"mlops/nn/llm","slug":"/mlops/nn/llm/pragmatic-disaggregation","permalink":"/docs/mlops/nn/llm/pragmatic-disaggregation","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/nn/llm/pragmatic-disaggregation.mdx","tags":[],"version":"current","lastUpdatedAt":1757089854000,"frontMatter":{"id":"pragmatic-disaggregation","title":"Beyond the Buzz (2506) - A Pragmatic Take on Inference Disaggregation","sidebar_label":"Pragmatic Disaggregation (2506)","description":"Beyond the Buzz (2506) - A Pragmatic Take on Inference Disaggregation","keywords":["Neural Network","Large Language Model","Prefill/Decode Disaggregation"]},"sidebar":"nn","previous":{"title":"DeepServe (2501)","permalink":"/docs/mlops/nn/llm/deepserve"},"next":{"title":"Metrics for inference","permalink":"/docs/mlops/nn/llm/metrics"}}');var s=n(74848),t=n(28453),a=n(98180);const l={id:"pragmatic-disaggregation",title:"Beyond the Buzz (2506) - A Pragmatic Take on Inference Disaggregation",sidebar_label:"Pragmatic Disaggregation (2506)",description:"Beyond the Buzz (2506) - A Pragmatic Take on Inference Disaggregation",keywords:["Neural Network","Large Language Model","Prefill/Decode Disaggregation"]},c=void 0,o={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Background",id:"background",level:2},{value:"Design space exploration",id:"design-space-exploration",level:2},{value:"Model partitioning",id:"model-partitioning",level:3},{value:"Scaling and rate matching",id:"scaling-and-rate-matching",level:3},{value:"Disaggregation in practice",id:"disaggregation-in-practice",level:2},{value:"Model sensitivity",id:"model-sensitivity",level:3},{value:"Traffic sensitivity",id:"traffic-sensitivity",level:3},{value:"Dynamic rate matching considerations",id:"dynamic-rate-matching-considerations",level:3},{value:"NVLink sensitivity",id:"nvlink-sensitivity",level:3}];function g(i){const e={a:"a",admonition:"admonition",annotation:"annotation",h2:"h2",h3:"h3",li:"li",math:"math",mo:"mo",mrow:"mrow",p:"p",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,t.R)(),...i.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.admonition,{title:"Reference",type:"info",children:(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"https://www.arxiv.org/abs/2506.05508",children:"Beyond the Buzz: A Pragmatic Take on Inference Disaggregation"})}),"\n"]})}),"\n",(0,s.jsx)(e.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsx)(e.p,{children:"ISL >> OSL\uc778 \uc0c1\ud669\uc5d0\uc11c 10 B \uc774\uc0c1 \ubaa8\ub378\uc744 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 Prefill/Decode Disaggregation\uc744 \uc0ac\uc6a9\ud558\uba74 \ud070 \uc131\ub2a5 \ud5a5\uc0c1\uc744 \uae30\ub300\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsx)(e.h2,{id:"background",children:"Background"}),"\n",(0,s.jsx)("figure",{children:(0,s.jsxs)("center",{children:[(0,s.jsx)("img",{src:(0,a.Ay)("img/mlops/nn/llm/pragmatic-disaggregation/co-located-vs-dissaggregation.png")}),(0,s.jsx)("br",{}),(0,s.jsx)("figcaption",{children:(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://www.arxiv.org/html/2506.05508",children:"Figure 2: Visualization of (left) co-located and (right) disaggregated inference\nserving"})})})]})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"co-located serving \uc131\ub2a5\uc744 \ucd5c\ub300\ud654\ud558\uae30 \uc704\ud574 In-flight batching(Continuous batching)\uacfc Piggybacking(Chunked prefill)\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(e.li,{children:"In-flight batching\uacfc disaggregation\uc744 \uc0ac\uc6a9\ud558\uba74 co-located \uc5d0\uc11c \ubc1c\uc0dd\ud558\ub294 prefill \uc9c0\uc5f0\uc744 \uc904\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"design-space-exploration",children:"Design space exploration"}),"\n",(0,s.jsx)(e.h3,{id:"model-partitioning",children:"Model partitioning"}),"\n",(0,s.jsx)(e.p,{children:"\ubaa8\ub378 \uc131\ub2a5 \uc790\uccb4\ub97c \ucd5c\uc801\ud654\ud558\uae30 \uc704\ud574 \uc544\ub798\uc640 \uac19\uc740 \uc804\ub7b5\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Tensor Parallelism (TP)"}),"\n",(0,s.jsx)(e.li,{children:"Expert Parallelism (EP)"}),"\n",(0,s.jsx)(e.li,{children:"Pipeline Parallelism (PP)"}),"\n",(0,s.jsx)(e.li,{children:"Chunked Pipeline Parallelism (CPP)"}),"\n",(0,s.jsx)(e.li,{children:"Tensor Parallel Attention and EP FFNs (TEP)"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"\uc8fc\uc5b4\uc9c4 \ubaa8\ub378\uc5d0 \ub300\ud55c \ucd5c\uc801\ud654\ub41c \ud30c\ud2f0\uc154\ub2dd \uc804\ub7b5\uc740 \uc544\ub798\uc640 \uac19\uc740 \uc694\uc18c\uc5d0 \uc601\ud5a5\uc744 \ubc1b\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"model architecture"}),"\n",(0,s.jsx)(e.li,{children:"co-located or dissaggregated"}),"\n",(0,s.jsx)(e.li,{children:"traffic \ud2b9\uc131(ISL, OSL, QPS, ...)"}),"\n",(0,s.jsx)(e.li,{children:"target HW(GPU, NPU, ...)"}),"\n",(0,s.jsx)(e.li,{children:"latency \uc81c\uc57d \uc870\uac74(TTFT, TPOT, E2EL)"}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"scaling-and-rate-matching",children:"Scaling and rate matching"}),"\n",(0,s.jsx)("figure",{children:(0,s.jsxs)("center",{children:[(0,s.jsx)("img",{src:(0,a.Ay)("img/mlops/nn/llm/pragmatic-disaggregation/scaling-and-rate-matching.png")}),(0,s.jsx)("br",{}),(0,s.jsx)("figcaption",{children:(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://www.arxiv.org/html/2506.05508",children:"Figure 3: High-level overview of rate matching for disaggregated serving"})})})]})}),"\n",(0,s.jsx)(e.p,{children:"\uc801\uc808\ud55c prefill/decode \ube44\uc728\uc744 \uacb0\uc815\ud558\uace0 \ub450 \ub2e8\uacc4 \uc0ac\uc774\uc758 \ucd9c\ub825\uc744 \ub9de\ucd94\uae30 \uc704\ud574 rate matching \uc804\ub7b5\uc744 \uc0ac\uc6a9\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"FTL SLA\ub97c \ub9cc\uc871\ud558\uae30 \uc704\ud55c prefill \uc124\uc815\ub4e4\uc744 \ucc3e\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsx)(e.li,{children:"TTL SLA\ub97c \ub9cc\uc871\ud558\uae30 \uc704\ud55c decode \uc124\uc815\ub4e4\uc744 \ucc3e\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsxs)(e.li,{children:["(prefill \uc218 * prefill \ub2f9 \uc694\uccad \ucc98\ub9ac \uc18d\ub3c4) ",(0,s.jsxs)(e.span,{className:"katex",children:[(0,s.jsx)(e.span,{className:"katex-mathml",children:(0,s.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,s.jsxs)(e.semantics,{children:[(0,s.jsx)(e.mrow,{children:(0,s.jsx)(e.mo,{children:"\u2a85"})}),(0,s.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\lessapprox"})]})})}),(0,s.jsx)(e.span,{className:"katex-html","aria-hidden":"true",children:(0,s.jsxs)(e.span,{className:"base",children:[(0,s.jsx)(e.span,{className:"strut",style:{height:"1.0117em",verticalAlign:"-0.2558em"}}),(0,s.jsx)(e.span,{className:"mrel amsrm",children:"\u2a85"})]})})]})," (decode \uc218 * decode \ub2f9 \uc694\uccad \ucc98\ub9ac \uc18d\ub3c4) \ub97c \ub9cc\uc871\ud558\ub294 prefill/decode \uc218 \uc870\ud569\uc744 \ucc3e\uc2b5\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"disaggregation-in-practice",children:"Disaggregation in practice"}),"\n",(0,s.jsx)("figure",{children:(0,s.jsxs)("center",{children:[(0,s.jsx)("img",{src:(0,a.Ay)("img/mlops/nn/llm/pragmatic-disaggregation/pp-ftl-diagram.png")}),(0,s.jsx)("br",{}),(0,s.jsx)("figcaption",{children:(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://www.arxiv.org/html/2506.05508",children:"Figure 5: Chunked pipeline parallelism during Prefill is an optimal strategy to maximize throughput while\ncomplying with strict FTL SLA"})})})]})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\uac19\uc740 \uc218\uc758 GPU\ub97c \uc0ac\uc6a9\ud560 \ub54c, prefill\uc758 PP \ud06c\uae30\ub97c \ud0a4\uc6b0\uba74 throughput (tokens/s/GPU)\uc740 \uc720\uc9c0\ud558\uba74\uc11c FTL\uc744 \uc904\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,s.jsx)(e.li,{children:"batch size\ub97c \uc904\uc774\uace0 TP \ud06c\uae30\ub97c \ud0a4\uc6b0\uba74 TTL\uc744 \uc904\uc77c \uc218 \uc788\uc2b5\ub2c8\ub2e4. 1 / TTL\ub294 interactivity (tokens/s/user)\ub85c \uc0dd\uac01\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n"]}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"throughput (tokens/s/GPU)"})," \uacfc ",(0,s.jsx)(e.strong,{children:"interactivity (tokens/s/user)"})," \uc0ac\uc774\uc5d0\ub294 trade-off\uac00 \uc874\uc7ac\ud558\uba70, \uc774\ub97c Pareto frontier\ub85c \ud45c\ud604\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,s.jsx)(e.h3,{id:"model-sensitivity",children:"Model sensitivity"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Model architecture sensitivity"}),"\n",(0,s.jsxs)(e.li,{children:["Model size sensitivity","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\ud070 \ubaa8\ub378\uc77c\uc218\ub85d dissaggregation\uc5d0 \uc758\ud55c \uc131\ub2a5 \ud5a5\uc0c1 \ud6a8\uacfc\uac00 \ud07d\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"traffic-sensitivity",children:"Traffic sensitivity"}),"\n",(0,s.jsx)("figure",{children:(0,s.jsxs)("center",{children:[(0,s.jsx)("img",{src:(0,a.Ay)("img/mlops/nn/llm/pragmatic-disaggregation/traffic-sensitivity.png")}),(0,s.jsx)("br",{}),(0,s.jsx)("figcaption",{children:(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://www.arxiv.org/html/2506.05508",children:"Figure 8: Disaggregation helps most under prefill-heavy traffic"})})})]})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"prefill-heavy traffic(ISL >> OSL)\uc778 \uacbd\uc6b0 dissaggregation\uc5d0 \uc758\ud55c \uc131\ub2a5 \ud5a5\uc0c1 \ud6a8\uacfc\uac00 \ud07d\ub2c8\ub2e4."}),"\n",(0,s.jsxs)(e.li,{children:["\ud604\uc2e4 \uc138\uacc4\uc5d0\uc11c\uc758 \ud2b8\ub798\ud53d \ud1b5\uacc4\ub294 \uc544\ub798\uc640 \uac19\uc558\uc2b5\ub2c8\ub2e4.","\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"ISL: \ud3c9\uade0 4500, \ud45c\uc900\ud3b8\ucc28 3500"}),"\n",(0,s.jsx)(e.li,{children:"OSL: \ud3c9\uade0 750, \ud45c\uc900\ud3b8\ucc28 750"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"dynamic-rate-matching-considerations",children:"Dynamic rate matching considerations"}),"\n",(0,s.jsx)("figure",{children:(0,s.jsxs)("center",{children:[(0,s.jsx)("img",{src:(0,a.Ay)("img/mlops/nn/llm/pragmatic-disaggregation/optimal-ratio-of-prefill-to-decode.png")}),(0,s.jsx)("br",{}),(0,s.jsx)("figcaption",{children:(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"https://www.arxiv.org/html/2506.05508",children:"Figure 9: The optimal ratio of ctx-to-gen GPUs varies across models and target\nlatencies."})})})]})}),"\n",(0,s.jsx)(e.p,{children:"prefill/decode\uac00 \uc791\uc544\uc9c8\uc218\ub85d tokens/s/user\uac00 \uc99d\uac00\ud569\ub2c8\ub2e4."}),"\n",(0,s.jsx)(e.h3,{id:"nvlink-sensitivity",children:"NVLink sensitivity"}),"\n",(0,s.jsx)(e.p,{children:"NVLink\ub85c \ub354 \ub9ce\uc740 GPU\ub97c \uc5f0\uacb0\ud560\uc218\ub85d EP, TP \ud06c\uae30\uc758 \uc120\ud0dd\ud3ed\uc774 \ub113\uc5b4\uc9c0\uba74\uc11c \ub354 \uc88b\uc740 \uc131\ub2a5\uc744 \ub0bc \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]})}function h(i={}){const{wrapper:e}={...(0,t.R)(),...i.components};return e?(0,s.jsx)(e,{...i,children:(0,s.jsx)(g,{...i})}):g(i)}}}]);