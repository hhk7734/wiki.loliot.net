"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[55547],{28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>o});var r=i(96540);const l={},s=r.createContext(l);function d(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),r.createElement(s.Provider,{value:n},e.children)}},56907:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>d,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"lang/go/libraries/command/viper","title":"viper\ub85c \uc124\uc815 \uad00\ub9ac\ud558\uae30","description":"viper\ub85c \uc124\uc815\ud30c\uc77c, \ud658\uacbd\ubcc0\uc218, flag \ub4f1\uc744 \uad00\ub9ac\ud558\ub294 \ubc29\ubc95","source":"@site/docs/lang/go/libraries/command/viper.mdx","sourceDirName":"lang/go/libraries/command","slug":"/lang/go/libraries/command/viper","permalink":"/docs/lang/go/libraries/command/viper","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/lang/go/libraries/command/viper.mdx","tags":[],"version":"current","lastUpdatedAt":1746545636000,"frontMatter":{"id":"viper","title":"viper\ub85c \uc124\uc815 \uad00\ub9ac\ud558\uae30","sidebar_label":"viper","description":"viper\ub85c \uc124\uc815\ud30c\uc77c, \ud658\uacbd\ubcc0\uc218, flag \ub4f1\uc744 \uad00\ub9ac\ud558\ub294 \ubc29\ubc95","keywords":["viper"]},"sidebar":"go","previous":{"title":"Goroutine","permalink":"/docs/lang/go/goroutine"},"next":{"title":"Gin","permalink":"/docs/lang/go/libraries/gin/"}}');var l=i(74848),s=i(28453);const d={id:"viper",title:"viper\ub85c \uc124\uc815 \uad00\ub9ac\ud558\uae30",sidebar_label:"viper",description:"viper\ub85c \uc124\uc815\ud30c\uc77c, \ud658\uacbd\ubcc0\uc218, flag \ub4f1\uc744 \uad00\ub9ac\ud558\ub294 \ubc29\ubc95",keywords:["viper"]},o=void 0,c={},a=[{value:"\uc124\uce58",id:"\uc124\uce58",level:2},{value:"viper \uc124\uc815 \uc6b0\uc120\uc21c\uc704",id:"viper-\uc124\uc815-\uc6b0\uc120\uc21c\uc704",level:2},{value:"\uc124\uc815\ud30c\uc77c",id:"\uc124\uc815\ud30c\uc77c",level:2},{value:"\ud658\uacbd \ubcc0\uc218",id:"\ud658\uacbd-\ubcc0\uc218",level:2},{value:"flag",id:"flag",level:2}];function t(e){const n={admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"\uc124\uce58",children:"\uc124\uce58"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-shell",children:"go get -u github.com/spf13/viper\n"})}),"\n",(0,l.jsx)(n.h2,{id:"viper-\uc124\uc815-\uc6b0\uc120\uc21c\uc704",children:"viper \uc124\uc815 \uc6b0\uc120\uc21c\uc704"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"Set"}),"\uc73c\ub85c \uc124\uc815\ud55c \uac12"]}),"\n",(0,l.jsx)(n.li,{children:"flag"}),"\n",(0,l.jsx)(n.li,{children:"\ud658\uacbd \ubcc0\uc218"}),"\n",(0,l.jsx)(n.li,{children:"\uc124\uc815\ud30c\uc77c"}),"\n",(0,l.jsx)(n.li,{children:"\ud0a4/\uac12 \uc800\uc7a5\uc18c"}),"\n",(0,l.jsx)(n.li,{children:"\uae30\ubcf8\uac12"}),"\n"]}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\uc124\uc815 key\ub294 \ub300\uc18c\ubb38\uc790\ub97c \uad6c\ubd84\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."}),"\n",(0,l.jsx)(n.li,{children:"\uc124\uc815\uc744 \uc804\ub2ec\ud558\ub294 \ubc29\uc2dd\ub9c8\ub2e4 \uc124\uc815\uac12\uc744 \ub530\ub85c \uc800\uc7a5\ud558\uace0 \uc788\ub2e4\uac00 \uac12\uc744 \uac00\uc838\uc624\ub294 \uc21c\uac04 \uc6b0\uc120\uc21c\uc704\ub97c \ud3c9\uac00\ud558\uc5ec \uac12\uc744 \uac00\uc838\uc635\ub2c8\ub2e4."}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"viper.Debug()"}),": viper \uc124\uc815\uc744 \ucd9c\ub825\ud569\ub2c8\ub2e4."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"viper.AllSettings()"}),": \ucd5c\uc885 \uc124\uc815\uac12\uc744 \ub9ac\ud134\ud569\ub2c8\ub2e4."]}),"\n"]})}),"\n",(0,l.jsx)(n.h2,{id:"\uc124\uc815\ud30c\uc77c",children:"\uc124\uc815\ud30c\uc77c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'viper.SetConfigName("config") // \ud655\uc7a5\uc790\ub97c \uc81c\uc678\ud55c \ud30c\uc77c\uba85\uc744 \uc801\uc2b5\ub2c8\ub2e4.\n// \ud655\uc7a5\uc790\uac00 \uc5c6\ub2e4\uba74 \uba85\uc2dc\uc801\uc73c\ub85c \uc124\uc815\ud574\uc918\uc57c \ud569\ub2c8\ub2e4.\n// "json", "toml", "yaml", "yml", "properties", "props", "prop", "env", "dotenv"\nviper.SetConfigType("yaml")\nviper.AddConfigPath(".") // \uc124\uc815\ud30c\uc77c\uc744 \ucc3e\uc744 \uacbd\ub85c\ub97c \ucd94\uac00\ud569\ub2c8\ub2e4.\n\n// viper.SetConfigFile("./config.yaml")\n\nif err := viper.ReadInConfig(); err != nil {\n\tif errors.As(err, &viper.ConfigFileNotFoundError{}) {\n\t\tfmt.Println("failed to find .env file")\n\t} else {\n\t\tpanic(fmt.Errorf("fatal error config file: %w", err))\n\t}\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\ud658\uacbd-\ubcc0\uc218",children:"\ud658\uacbd \ubcc0\uc218"}),"\n",(0,l.jsxs)(n.p,{children:["\ud658\uacbd \ubcc0\uc218\ub294 ",(0,l.jsx)(n.code,{children:"BindEnv"}),"\ud638\ucd9c \uc2dc\uc810\uc774 \uc544\ub2c8\ub77c \uac12\uc5d0 \uc811\uadfc\ud558\ub294 \uc2dc\uc810\uc5d0 \ud3c9\uac00\ub429\ub2c8\ub2e4."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'viper.SetEnvPrefix("a")\nviper.BindEnv("c") // viper.BindEnv("c", "A_C")\nviper.BindEnv("d") // viper.BindEnv("d", "A_D")\n\nviper.SetEnvPrefix("b")\nviper.BindEnv("c") // viper.BindEnv("c", "B_C")\nviper.BindEnv("f") // viper.BindEnv("f", "B_F")\n\n// viper.BindEnv("c", "A_C", "B_C")\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'// \ud658\uacbd\ubcc0\uc218\ub97c \uc77d\uc744 \ub54c key\uc758 `.` \ub610\ub294 `-`\uc744 `_`\ub85c \ubcc0\ud658\ud558\uc5ec \uc77d\uc5b4\uc635\ub2c8\ub2e4.\n// viper.Get("a.b") \ub97c \ud638\ucd9c\ud558\uba74 A_B \ud658\uacbd\ubcc0\uc218\ub97c \uc77d\uc5b4\uc635\ub2c8\ub2e4.\nviper.SetEnvKeyReplacer(strings.NewReplacer(".", "_", "-", "_"))\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"viper.AutomaticEnv() // \ud658\uacbd\ubcc0\uc218\ub97c \uc790\ub3d9\uc73c\ub85c \uc77d\uc5b4\uc635\ub2c8\ub2e4.\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"c"}),"\uc758 \uacbd\uc6b0 ",(0,l.jsx)(n.code,{children:"A_C"}),"\uc640 ",(0,l.jsx)(n.code,{children:"B_C"}),"\uac00 \ubaa8\ub450 \uc124\uc815\ub418\uc5b4 \uc788\uc744 \uacbd\uc6b0, ",(0,l.jsx)(n.code,{children:"A_C"}),"\uac00 \uc6b0\uc120\uc21c\uc704\uac00 \ub192\uc2b5\ub2c8\ub2e4."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"AutomaticEnv"}),"\uac00 \uc124\uc815\ub418\uc5b4 \uc788\uc744 \uacbd\uc6b0 BindEnv\ubcf4\ub2e4 \uc6b0\uc120\uc21c\uc704\uac00 \ub192\uc2b5\ub2c8\ub2e4.","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"SetEnvPrefix"}),"\ub294 \ub9c8\uc9c0\ub9c9 \uc124\uc815\uac12\ub9cc \uc720\ud6a8\ud569\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:"// \ud658\uacbd \ubcc0\uc218\uac00 \ube48 \uac12\uc73c\ub85c \uc124\uc815\ub418\uc5b4 \uc788\uc744 \ub54c, \ud658\uacbd \ubcc0\uc218\ub97c \uc124\uc815\ud55c \uac83\uc73c\ub85c \uac04\uc8fc\ud560\uc9c0\n// \uc5ec\ubd80\ub97c \uacb0\uc815\ud569\ub2c8\ub2e4.\nviper.AllowEmptyEnv(true)\n"})}),"\n",(0,l.jsx)(n.h2,{id:"flag",children:"flag"}),"\n",(0,l.jsxs)(n.p,{children:["flag\ub294 ",(0,l.jsx)(n.code,{children:"BindPFlag"}),"\ud638\ucd9c \uc2dc\uc810\uc774 \uc544\ub2c8\ub77c \uac12\uc5d0 \uc811\uadfc\ud558\ub294 \uc2dc\uc810\uc5d0 \ud3c9\uac00\ub429\ub2c8\ub2e4."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'pflag.String("log_level", "info", "log level")\n\npflag.Parse()\nviper.BindPFlags(pflag.CommandLine)\n'})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-go",children:'flag.String("log_level", "info", "log level")\n\npflag.CommandLine.AddGoFlagSet(flag.CommandLine)\npflag.Parse()\nviper.BindPFlags(pflag.CommandLine)\n'})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(t,{...e})}):t(e)}}}]);