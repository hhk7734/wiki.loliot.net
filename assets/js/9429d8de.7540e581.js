"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[51778],{28453:(e,r,n)=>{n.d(r,{R:()=>l,x:()=>t});var i=n(96540);const d={},o=i.createContext(d);function l(e){const r=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:l(e.components),i.createElement(o.Provider,{value:r},e.children)}},36014:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>t,default:()=>p,frontMatter:()=>l,metadata:()=>i,toc:()=>s});const i=JSON.parse('{"id":"mlops/device/amd/gpu-operator/crd","title":"AMD GPU Operator CRD","description":"AMD GPU Operator CRD","source":"@site/docs/mlops/device/amd/gpu-operator/crd.mdx","sourceDirName":"mlops/device/amd/gpu-operator","slug":"/mlops/device/amd/gpu-operator/crd","permalink":"/docs/mlops/device/amd/gpu-operator/crd","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/device/amd/gpu-operator/crd.mdx","tags":[],"version":"current","lastUpdatedAt":1758132002000,"frontMatter":{"id":"crd","title":"AMD GPU Operator CRD","sidebar_label":"CRD","description":"AMD GPU Operator CRD","keywords":["amd","gpu-operator","crd"]},"sidebar":"device","previous":{"title":"\uc124\uce58 \uac00\uc774\ub4dc","permalink":"/docs/mlops/device/amd/gpu-operator/"},"next":{"title":"OFED","permalink":"/docs/mlops/device/infiniband/ofed"}}');var d=n(74848),o=n(28453);const l={id:"crd",title:"AMD GPU Operator CRD",sidebar_label:"CRD",description:"AMD GPU Operator CRD",keywords:["amd","gpu-operator","crd"]},t=void 0,c={},s=[{value:"DeviceConfig",id:"deviceconfig",level:2},{value:"driver",id:"driver",level:3},{value:"devicePlugin",id:"deviceplugin",level:3},{value:"metricsExporter",id:"metricsexporter",level:3}];function a(e){const r={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(r.h2,{id:"deviceconfig",children:"DeviceConfig"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-yaml",children:'apiVersion: amd.com/v1alpha1\nkind: DeviceConfig\nspec:\n  selector:\n    feature.node.kubernetes.io/amd-gpu: "true"\n'})}),"\n",(0,d.jsx)(r.h3,{id:"driver",children:"driver"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-yaml",children:"spec:\n  driver:\n    enable: true\n    blacklist: true\n    tolerations:\n      - key: amd.com/gpu\n        operator: Exists\n        effect: NoSchedule\n"})}),"\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"enable: true"}),"\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsx)(r.li,{children:"out-of-tree (OS\uc5d0 \uae30\ubcf8 \uc81c\uacf5\ub418\uc9c0 \uc54a\ub294) AMD GPU \ub4dc\ub77c\uc774\ubc84\ub97c \uc124\uce58\ud569\ub2c8\ub2e4."}),"\n",(0,d.jsx)(r.li,{children:"\uc124\uce58\ud558\uc9c0 \uc54a\uc73c\uba74 inbox (OS\uc5d0 \uae30\ubcf8 \uc81c\uacf5\ub418\ub294) \ub610\ub294 pre-installed AMD GPU \ub4dc\ub77c\uc774\ubc84\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"blacklist: true"}),"\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"amdgpu"})," (inbox \ub4dc\ub77c\uc774\ubc84) \ubaa8\ub4c8\uc744 \ube14\ub799\ub9ac\uc2a4\ud2b8\uc5d0 \ucd94\uac00\ud569\ub2c8\ub2e4. (",(0,d.jsx)(r.code,{children:"/etc/modprobe.d/blacklist-amdgpu.conf"}),")"]}),"\n",(0,d.jsx)(r.li,{children:"\uc801\uc6a9\ub41c \uac83\uc744 \ud655\uc778 \ud6c4 \ud574\ub2f9 \ub178\ub4dc\ub4e4\uc758 \uc7ac\ubd80\ud305\uc774 \ud544\uc694\ud569\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(r.li,{children:(0,d.jsx)(r.code,{children:"image: <repository>"})}),"\n",(0,d.jsx)(r.li,{children:(0,d.jsx)(r.code,{children:"version: <version>"})}),"\n",(0,d.jsxs)(r.li,{children:[(0,d.jsx)(r.code,{children:"imageRegistrySecret"}),"\n",(0,d.jsxs)(r.ul,{children:["\n",(0,d.jsx)(r.li,{children:"\uc774\ubbf8\uc9c0 push/pull\uc5d0 \uc778\uc99d\uc774 \ud544\uc694\ud55c \uacbd\uc6b0 \uc0ac\uc6a9\ud569\ub2c8\ub2e4."}),"\n",(0,d.jsx)(r.li,{children:(0,d.jsx)(r.code,{children:"name: <secretName>"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(r.table,{children:[(0,d.jsx)(r.thead,{children:(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.th,{children:"OS"}),(0,d.jsx)(r.th,{children:"Tag"}),(0,d.jsx)(r.th,{children:"Example"})]})}),(0,d.jsxs)(r.tbody,{children:[(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:"Ubuntu"}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"ubuntu-<os>-<kernel>-<driver>"})}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"ubuntu-24.04-6.8.0-79-generic-6.4.3"})})]}),(0,d.jsxs)(r.tr,{children:[(0,d.jsx)(r.td,{children:"RHEL CoreOS"}),(0,d.jsx)(r.td,{children:(0,d.jsx)(r.code,{children:"coreos-<os>-<kernel>-<driver>"})}),(0,d.jsx)(r.td,{})]})]})]}),"\n",(0,d.jsx)(r.admonition,{type:"warning",children:(0,d.jsxs)(r.p,{children:["\uc124\uc815\ub41c image\uc640 version\uc5d0 \ub9de\ub294 \uc774\ubbf8\uc9c0\ub97c \ucc3e\uc544\ubcf4\uace0, \uc788\uc73c\uba74 \ud574\ub2f9 \uc774\ubbf8\uc9c0\ub97c \uc0ac\uc6a9\ud558\uc5ec \ub4dc\ub77c\uc774\ubc84\ub97c \uc124\uce58\ud569\ub2c8\ub2e4. \uc5c6\uc73c\uba74 operator\uac00 \uac00\uc9c0\uace0 \uc788\ub294 Dockerfile\ub85c \uc774\ubbf8\uc9c0\ub97c \ube4c\ub4dc\ud558\uc5ec \uc124\uc815\ud55c \uacbd\ub85c\ub85c \uc5c5\ub85c\ub4dc\ud55c \ud6c4 \uc0ac\uc6a9\ud569\ub2c8\ub2e4.\n\uc774\ubbf8\uc9c0\ub97c \ub9cc\ub4e4\uc5b4\ub450\uae30 \uc704\ud574 ",(0,d.jsx)(r.a,{href:"https://github.com/ROCm/gpu-operator/blob/main/docs/drivers/precompiled-driver.md",children:"ROCm / gpu-operator GitHub / driver / precompiled-driver"})," \ubb38\uc11c\ub97c \ucc38\uace0\ud558\uc138\uc694."]})}),"\n",(0,d.jsx)(r.h3,{id:"deviceplugin",children:"devicePlugin"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-yaml",children:"spec:\n  devicePlugin:\n    devicePluginImage: docker.io/rocm/k8s-device-plugin:1.31.0.8\n    devicePluginImagePullPolicy: IfNotPresent\n    devicePluginTolerations:\n      - key: amd.com/gpu\n        operator: Exists\n        effect: NoSchedule\n\n    enableNodeLabeller: true\n    nodeLabellerImage: docker.io/rocm/k8s-device-plugin:labeller-1.31.0.8\n    nodeLabellerImagePullPolicy: IfNotPresent\n    nodeLabellerTolerations:\n      - key: amd.com/gpu\n        operator: Exists\n        effect: NoSchedule\n"})}),"\n",(0,d.jsx)(r.h3,{id:"metricsexporter",children:"metricsExporter"}),"\n",(0,d.jsx)(r.pre,{children:(0,d.jsx)(r.code,{className:"language-yaml",children:'spec:\n  metricsExporter:\n    enable: true\n    image: docker.io/rocm/device-metrics-exporter:v1.3.1\n    imagePullPolicy: IfNotPresent\n    tolerations:\n      - key: amd.com/gpu\n        operator: Exists\n        effect: NoSchedule\n    selector:\n      feature.node.kubernetes.io/amd-gpu: "true"\n    prometheus:\n      serviceMonitor:\n        enable: true\n        interval: 10s\n        labels: {}\n'})})]})}function p(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,d.jsx)(r,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}}}]);