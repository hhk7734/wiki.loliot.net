"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[21573],{28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>s});var l=i(96540);const a={},c=l.createContext(a);function r(e){const n=l.useContext(c);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),l.createElement(c.Provider,{value:n},e.children)}},38171:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>s,default:()=>m,frontMatter:()=>r,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"mlops/network/cilium/load-balancer","title":"Cilium Load Balancer IPAM \uc0ac\uc6a9\ud558\uae30","description":"Cilium Load Balancer IPAM \uc0ac\uc6a9\ud558\uae30","source":"@site/docs/mlops/network/cilium/load-balancer.mdx","sourceDirName":"mlops/network/cilium","slug":"/mlops/network/cilium/load-balancer","permalink":"/docs/mlops/network/cilium/load-balancer","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/network/cilium/load-balancer.mdx","tags":[],"version":"current","lastUpdatedAt":1747248331000,"frontMatter":{"id":"load-balancer","title":"Cilium Load Balancer IPAM \uc0ac\uc6a9\ud558\uae30","sidebar_label":"Load Balancer IPAM","description":"Cilium Load Balancer IPAM \uc0ac\uc6a9\ud558\uae30","keywords":["cilium","bgp","ipam","load balancer"]},"sidebar":"network","previous":{"title":"BGP","permalink":"/docs/mlops/network/cilium/bgp"},"next":{"title":"Gateway API","permalink":"/docs/mlops/network/cilium/gateway-api"}}');var a=i(74848),c=i(28453);const r={id:"load-balancer",title:"Cilium Load Balancer IPAM \uc0ac\uc6a9\ud558\uae30",sidebar_label:"Load Balancer IPAM",description:"Cilium Load Balancer IPAM \uc0ac\uc6a9\ud558\uae30",keywords:["cilium","bgp","ipam","load balancer"]},s=void 0,o={},d=[{value:"CiliumLoadBalancerIPPool",id:"ciliumloadbalancerippool",level:2},{value:"Node IPAM LB",id:"node-ipam-lb",level:2},{value:"L2 Aware LB",id:"l2-aware-lb",level:2},{value:"BGP LB",id:"bgp-lb",level:2},{value:"IP \uc694\uccad",id:"ip-\uc694\uccad",level:2}];function t(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.admonition,{title:"Reference",type:"info",children:(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://docs.cilium.io/en/stable/network/lb-ipam/",children:"Cilium / LoadBalancer IP Address Management"})}),"\n"]})}),"\n",(0,a.jsx)(n.h2,{id:"ciliumloadbalancerippool",children:"CiliumLoadBalancerIPPool"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: cilium.io/v2alpha1\nkind: CiliumLoadBalancerIPPool\nmetadata:\n  name: <name>\nspec:\n  blocks:\n    - cidr: <cidr>\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"spec"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"blocks"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"LoadBalancer IP\ub85c \uc0ac\uc6a9\ud560 CIDR\uc744 \uc9c0\uc815\ud569\ub2c8\ub2e4."}),"\n",(0,a.jsx)(n.li,{children:"\ub2e4\ub978 CiliumLoadBalancerIPPool\uacfc \uacb9\uce58\uba74 \uc548\ub429\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"serviceSelector"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"IP\ub97c \ud560\ub2f9 \ubc1b\uc744 \uc218 \uc788\ub294 Service\ub4e4\uc744 \uc120\ud0dd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,a.jsx)(n.li,{children:"\uc120\uc5b8\ud558\uc9c0 \uc54a\uc73c\uba74 \ubaa8\ub4e0 Service\ub4e4\uc774 \uc120\ud0dd\ub429\ub2c8\ub2e4."}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"matchExpressions"})}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"matchLabels"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"io.kubernetes.service.namespace"})," \ub808\uc774\ube14\ub85c ",(0,a.jsx)(n.code,{children:".metadata.namespace"}),"\ub97c \uc120\ud0dd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"io.kubernetes.service.name"})," \ub808\uc774\ube14\ub85c ",(0,a.jsx)(n.code,{children:".metadata.name"}),"\uc744 \uc120\ud0dd\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"LB IPAM\uc740 LoadBalancer \ud0c0\uc785\uc758 Service\ub4e4\uc5d0 ExternalIP\ub97c \ud560\ub2f9\ud558\ub294 \uc5ed\ud560\ub9cc \ud558\uace0 \ub85c\ub4dc\ubca8\ub7f0\uc2f1 \uae30\ub2a5\uc740 \uc218\ud589\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ub54c\ubb38\uc5d0 \ub85c\ub4dc\ubca8\ub7f0\uc2f1 \uc790\uccb4\ub294 Cilium\uc774 \uc81c\uacf5\ud558\ub294 BGP \ub4f1\uc758 \uae30\ub2a5\uc744 \uc0ac\uc6a9\ud558\uac70\ub098 \ub2e4\ub978 \ud234\uc774 \uc81c\uacf5\ud558\ub294 \uac83\uc744 \uc0ac\uc6a9\ud574\uc57c \ud569\ub2c8\ub2e4."}),"\n",(0,a.jsx)(n.h2,{id:"node-ipam-lb",children:"Node IPAM LB"}),"\n",(0,a.jsx)(n.admonition,{title:"Reference",type:"info",children:(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://docs.cilium.io/en/stable/network/node-ipam/",children:"Cilium / Node IPAM LB"})}),"\n"]})}),"\n",(0,a.jsx)(n.p,{children:"Service\uc5d0 \uc544\ub798\uc640 \uac19\uc740 \uc124\uc815\uc744 \ucd94\uac00\ud558\uba74 \ubcc4\ub3c4\uc758 \ub124\ud2b8\uc6cc\ud06c \uc81c\uc5b4 \uc5c6\uc774 Node IP\ub97c LoadBalancer IP\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'title="cilium-values.yaml"',children:"nodeIPAM:\n  enabled: true\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Service\nspec:\n  loadBalancerClass: io.cilium/node\n"})}),"\n",(0,a.jsxs)(n.p,{children:["IP\ub294 ",(0,a.jsx)(n.code,{children:".spec.ipFamilies"}),", ",(0,a.jsx)(n.code,{children:".spec.ExternalIPs"}),"\uc5d0 \uc758\ud574 \uacb0\uc815\ub429\ub2c8\ub2e4."]}),"\n",(0,a.jsx)(n.h2,{id:"l2-aware-lb",children:"L2 Aware LB"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"/docs/mlops/network/cilium/arp",children:"ARP/NDP"})," \uc124\uc815\uc774 \ud65c\uc131\ud654\ub418\uc5b4 \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Service\nspec:\n  loadBalancerClass: io.cilium/l2-announcer\n"})}),"\n",(0,a.jsx)(n.h2,{id:"bgp-lb",children:"BGP LB"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"/docs/mlops/network/cilium/bgp",children:"BGP"})," \uc124\uc815\uc774 \ud65c\uc131\ud654\ub418\uc5b4 \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Service\nspec:\n  loadBalancerClass: io.cilium/io.cilium/bgp-control-plane\n"})}),"\n",(0,a.jsx)(n.h2,{id:"ip-\uc694\uccad",children:"IP \uc694\uccad"}),"\n",(0,a.jsxs)(n.p,{children:["Service\ub294 ",(0,a.jsx)(n.code,{children:'.metadata.annotations["io.cilium/lb-ipam-ips"]'}),"\uc5d0 \ud560\ub2f9 \ubc1b\uace0 \uc2f6\uc740 IP\ub97c ",(0,a.jsx)(n.code,{children:","}),"\ub85c \uad6c\ubd84\ud558\uc5ec \uc120\uc5b8\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Service\nmetadata:\n  annotations:\n    "io.cilium/lb-ipam-ips": "1.2.3.4,1.2.3.5"\n'})})]})}function m(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(t,{...e})}):t(e)}}}]);