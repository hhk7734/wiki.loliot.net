"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[26360],{28453:(n,e,i)=>{i.d(e,{R:()=>o,x:()=>c});var s=i(96540);const l={},r=s.createContext(l);function o(n){const e=s.useContext(r);return s.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:o(n.components),s.createElement(r.Provider,{value:e},n.children)}},49715:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>t,contentTitle:()=>c,default:()=>x,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"mlops/network/istio/traffic-management/envoy-filter/compression","title":"Compression EnvoyFilter","description":"Compression EnvoyFilter","source":"@site/docs/mlops/network/istio/traffic-management/envoy-filter/compression.mdx","sourceDirName":"mlops/network/istio/traffic-management/envoy-filter","slug":"/mlops/network/istio/traffic-management/envoy-filter/compression","permalink":"/docs/mlops/network/istio/traffic-management/envoy-filter/compression","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/network/istio/traffic-management/envoy-filter/compression.mdx","tags":[],"version":"current","lastUpdatedAt":1741968348000,"frontMatter":{"id":"compression","title":"Compression EnvoyFilter","sidebar_label":"Compression","description":"Compression EnvoyFilter","keywords":["EnvoyFilter","compression"]},"sidebar":"network","previous":{"title":"Auth","permalink":"/docs/mlops/network/istio/traffic-management/envoy-filter/auth"},"next":{"title":"Authorization","permalink":"/docs/mlops/network/istio/security/authorization/"}}');var l=i(74848),r=i(28453);const o={id:"compression",title:"Compression EnvoyFilter",sidebar_label:"Compression",description:"Compression EnvoyFilter",keywords:["EnvoyFilter","compression"]},c=void 0,t={},d=[{value:"http.compressor",id:"httpcompressor",level:2},{value:"<code>compressor_library</code>",id:"compressor_library",level:2},{value:"gzip",id:"gzip",level:3},{value:"Brotli",id:"brotli",level:3},{value:"zstd",id:"zstd",level:3}];function h(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",pre:"pre",ul:"ul",...(0,r.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h2,{id:"httpcompressor",children:"http.compressor"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/compressor_filter",children:"https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/compressor_filter"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/http/compressor/v3/compressor.proto",children:"https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/filters/http/compressor/v3/compressor.proto"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:'spec:\n  configPatches:\n    - applyTo: HTTP_FILTER\n      match:\n        context: SIDECAR_INBOUND\n        listener:\n          filterChain:\n            filter:\n              name: envoy.filters.network.http_connection_manager\n              subFilter:\n                name: envoy.filters.http.router\n      patch:\n        operation: INSERT_BEFORE\n        value:\n          name: envoy.filters.http.compressor\n          typed_config:\n            "@type": type.googleapis.com/envoy.extensions.filters.http.compressor.v3.Compressor\n            response_direction_config:\n              common_config:\n                min_content_length: 1024\n            compressor_library:\n              name: text_optimized\n              typed_config:\n                "@type": type.googleapis.com/envoy.extensions.compression.brotli.compressor.v3.Brotli\n'})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"content_length"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\ucd5c\uc18c response \uae38\uc774\uc785\ub2c8\ub2e4."}),"\n",(0,l.jsx)(e.li,{children:"\uae30\ubcf8\uac12\uc740 30\uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"content_type"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\uc555\ucd95\uc774 \uc801\uc6a9\ub420 mime-types \uc785\ub2c8\ub2e4."}),"\n",(0,l.jsxs)(e.li,{children:["\uae30\ubcf8\uac12\uc740 ",(0,l.jsx)(e.code,{children:'["application/javascript", "application/json", "application/xhtml+xml", "image/svg+xml", "text/css", "text/html", "text/plain", "text/xml"]'})," \uc785\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"disable_on_etag_header"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"remove_accept_encoding_header"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"runtime_enabled"})}),"\n"]}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"request_direction_config"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\uc124\uc815\ud558\uc9c0 \uc54a\uc73c\uba74 \uae30\ubcf8\uc801\uc73c\ub85c \ube44\ud65c\uc131\ud654 \ub429\ub2c8\ub2e4."}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"common_config"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"enabled"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"default_value"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"runtime_key"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"min_content_length"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"content_type"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"response_direction_config"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\uc124\uc815\ud558\uc9c0 \uc54a\uc73c\uba74 \uae30\ubcf8\uc801\uc73c\ub85c \ud65c\uc131\ud654 \ub429\ub2c8\ub2e4."}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"common_config"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"enabled"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"default_value"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"runtime_key"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"min_content_length"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"content_type"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"disable_on_etag_header"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"remove_accept_encoding_header"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"choose_first"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.code,{children:"compressor_library"})}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"compressor_library",children:(0,l.jsx)(e.code,{children:"compressor_library"})}),"\n",(0,l.jsx)(e.h3,{id:"gzip",children:"gzip"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/compression/gzip/compressor/v3/gzip.proto",children:"https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/compression/gzip/compressor/v3/gzip.proto"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:'spec:\n  configPatches:\n    - patch:\n        value:\n          typed_config:\n            compressor_library:\n              name: text_optimized\n              typed_config:\n                "@type": type.googleapis.com/envoy.extensions.compression.gzip.compressor.v3.Gzip\n'})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"memory_level"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"1 ~ 9 \uae4c\uc9c0 \uac12\uc744 \uac00\uc9c8 \uc218 \uc788\uc73c\uba70, \ud074 \uc218\ub85d \uba54\ubaa8\ub9ac\ub97c \ub9ce\uc774 \uc0ac\uc6a9\ud558\uc9c0\ub9cc \ube68\ub77c\uc9c0\uace0 \uc555\ucd95 \uacb0\uacfc\uac00 \uc88b\uc544\uc9d1\ub2c8\ub2e4."}),"\n",(0,l.jsx)(e.li,{children:"\uae30\ubcf8\uac12\uc740 5 \uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"compression_level"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"COMPRESSION_LEVEL_N\uc73c\ub85c \uc124\uc815\ud560 \uc218 \uc788\uc73c\uba70 N\uc740 1 ~ 9 \uae4c\uc9c0\uc758 \uac12\uc744 \uac00\uc9d1\ub2c8\ub2e4."}),"\n",(0,l.jsx)(e.li,{children:"BEST_SPEED == COMPRESSION_LEVEL_1"}),"\n",(0,l.jsx)(e.li,{children:"DEFAULT_COMPRESSION == COMPRESSION_LEVEL_6"}),"\n",(0,l.jsx)(e.li,{children:"BEST_COMPRESSION == COMPRESSION_LEVEL_9"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"compression_strategy"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"DEFAULT_STRATEGY"}),"\n",(0,l.jsx)(e.li,{children:"FILTERED"}),"\n",(0,l.jsx)(e.li,{children:"HUFFMAN_ONLY"}),"\n",(0,l.jsx)(e.li,{children:"RLE"}),"\n",(0,l.jsx)(e.li,{children:"FIXED"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"window_bits"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\uc555\ucd95\uae30 window \ud06c\uae30\ub294 2 ^ window_bits \ub85c \uc124\uc815\ub429\ub2c8\ub2e4. 9 ~ 15 \uc0ac\uc774 \uac12\uc744 \uac00\uc9c0\uba70, \ud074 \uc218\ub85d \ub354 \ub9ce\uc740 \uba54\ubaa8\ub9ac\ub97c \uc0ac\uc6a9\ud558\ub294 \ub300\uc2e0 \uc555\ucd95 \uacb0\uacfc\uac00 \uc88b\uc544\uc9d1\ub2c8\ub2e4."}),"\n",(0,l.jsx)(e.li,{children:"\uae30\ubcf8\uac12\uc740 12 \uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"chunk_size"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\ucd9c\ub825 \ubc84\ud37c \ud06c\uae30\uc785\ub2c8\ub2e4."}),"\n",(0,l.jsx)(e.li,{children:"\uae30\ubcf8\uac12\uc740 4096 \uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"brotli",children:"Brotli"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/compression/brotli/compressor/v3/brotli.proto",children:"https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/compression/brotli/compressor/v3/brotli.proto"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:'spec:\n  configPatches:\n    - patch:\n        value:\n          typed_config:\n            compressor_library:\n              name: text_optimized\n              typed_config:\n                "@type": type.googleapis.com/envoy.extensions.compression.brotli.compressor.v3.Brotli\n'})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"quality"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"0 ~ 11 \uae4c\uc9c0 \uac12\uc744 \uac00\uc9c8 \uc218 \uc788\uc73c\uba70, \ud074 \uc218\ub85d \ub290\ub824\uc9c0\ub294 \ub300\uc2e0 \uc555\ucd95 \uacb0\uacfc\uac00 \uc88b\uc544\uc9d1\ub2c8\ub2e4."}),"\n",(0,l.jsx)(e.li,{children:"\uae30\ubcf8\uac12\uc740 3 \uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"encoder_mode"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"DEFAULT == GENERIC"}),"\n",(0,l.jsx)(e.li,{children:"TEXT"}),"\n",(0,l.jsx)(e.li,{children:"FONT"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"window_bits"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\uc555\ucd95\uae30 window \ud06c\uae30\ub294 2 ^ window_bits \ub85c \uc124\uc815\ub429\ub2c8\ub2e4. 10 ~ 24 \uc0ac\uc774 \uac12\uc744 \uac00\uc9c0\uba70, \ud074 \uc218\ub85d \ub354 \ub9ce\uc740 \uba54\ubaa8\ub9ac\ub97c \uc0ac\uc6a9\ud558\ub294 \ub300\uc2e0 \uc555\ucd95 \uacb0\uacfc\uac00 \uc88b\uc544\uc9d1\ub2c8\ub2e4."}),"\n",(0,l.jsx)(e.li,{children:"\uae30\ubcf8\uac12\uc740 18 \uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"input_block_bits"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"16 ~ 24 \uae4c\uc9c0 \uac12\uc744 \uac00\uc9c8 \uc218 \uc788\uc73c\uba70, \ud074 \uc218\ub85d \ub354 \ub9ce\uc740 \uba54\ubaa8\ub9ac\ub97c \uc0ac\uc6a9\ud558\ub294 \ub300\uc2e0 \uc555\ucd95 \uacb0\uacfc\uac00 \uc88b\uc544\uc9d1\ub2c8\ub2e4."}),"\n",(0,l.jsx)(e.li,{children:"\uae30\ubcf8\uac12\uc740 24 \uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"chunk_size"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\ucd9c\ub825 \ubc84\ud37c \ud06c\uae30\uc785\ub2c8\ub2e4."}),"\n",(0,l.jsx)(e.li,{children:"\uae30\ubcf8\uac12\uc740 4096 \uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"disable_literal_context_modeling"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"literal context modeling\uc744 \ube44\ud65c\uc131\ud654\ud560 \uc9c0 \uc5ec\ubd80\uc785\ub2c8\ub2e4. \ub514\ucf54\ub529 \uc18d\ub3c4\uc640 \uc555\ucd95\ub960 \uc0ac\uc774\uc758 \ud2b8\ub808\uc774\ub4dc \uc624\ud504\uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"zstd",children:"zstd"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/compression/zstd/compressor/v3/zstd.proto",children:"https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/compression/zstd/compressor/v3/zstd.proto"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:'spec:\n  configPatches:\n    - patch:\n        value:\n          typed_config:\n            compressor_library:\n              name: text_optimized\n              typed_config:\n                "@type": type.googleapis.com/envoy.extensions.compression.zstd.compressor.v3.Zstd\n'})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"compression_level"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\ucee8\ud150\uce20 \ud06c\uae30\uc640 \ubbf8\ub9ac \uc815\uc758\ub41c \uc555\ucd95 \ub808\ubca8\uc5d0 \ub530\ub77c \ub3d9\uc801\uc73c\ub85c \uc555\ucd95 \ud30c\ub77c\ubbf8\ud130\uac00 \uacb0\uc815\ub429\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"enable_checksum"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"32 bits \uccb4\ud06c\uc12c\uc744 \uc0ac\uc6a9\ud560 \uc9c0 \uc5ec\ubd80\uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"strategy"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\uc555\ucd95 \uc804\ub7b5\uc73c\ub85c \ud074 \uc218\ub85d \ub290\ub824\uc9c0\ub294 \ub300\uc2e0 \uc555\ucd95 \uacb0\uacfc\uac00 \uc88b\uc544\uc9d1\ub2c8\ub2e4."}),"\n",(0,l.jsx)(e.li,{children:"DEFAULT = 0"}),"\n",(0,l.jsx)(e.li,{children:"FAST"}),"\n",(0,l.jsx)(e.li,{children:"DFAST"}),"\n",(0,l.jsx)(e.li,{children:"GREEDY"}),"\n",(0,l.jsx)(e.li,{children:"LAZY"}),"\n",(0,l.jsx)(e.li,{children:"LAZY2"}),"\n",(0,l.jsx)(e.li,{children:"BTLAZY2"}),"\n",(0,l.jsx)(e.li,{children:"BTOPT"}),"\n",(0,l.jsx)(e.li,{children:"BTULTRA"}),"\n",(0,l.jsx)(e.li,{children:"BTULTRA2"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"dictionary"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\uc555\ucd95\uc744 \uc704\ud55c dictionary \uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"chunk_size"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\ucd9c\ub825 \ubc84\ud37c \ud06c\uae30\uc785\ub2c8\ub2e4."}),"\n",(0,l.jsx)(e.li,{children:"\uae30\ubcf8\uac12\uc740 4096 \uc785\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n"]})]})}function x(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(h,{...n})}):h(n)}}}]);