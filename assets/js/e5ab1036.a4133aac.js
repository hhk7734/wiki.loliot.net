"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[26224],{28453:(e,n,l)=>{l.d(n,{R:()=>d,x:()=>r});var s=l(96540);const c={},i=s.createContext(c);function d(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:d(e.components),s.createElement(i.Provider,{value:n},e.children)}},91475:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>x,frontMatter:()=>d,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"mlops/mlops/auth/keycloak/openid-connect","title":"Keycloak OpenID Connect","description":"Keycloak OpenID Connect","source":"@site/docs/mlops/mlops/auth/keycloak/openid-connect.mdx","sourceDirName":"mlops/mlops/auth/keycloak","slug":"/mlops/mlops/auth/keycloak/openid-connect","permalink":"/docs/mlops/mlops/auth/keycloak/openid-connect","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/mlops/auth/keycloak/openid-connect.mdx","tags":[],"version":"current","lastUpdatedAt":1743962785000,"frontMatter":{"id":"openid-connect","title":"Keycloak OpenID Connect","sidebar_label":"OpenID Connect","description":"Keycloak OpenID Connect","keywords":["keycloak","openid","connect"]},"sidebar":"mlops","previous":{"title":"keycloak-config-cli","permalink":"/docs/mlops/mlops/auth/keycloak/keycloak-config-cli"},"next":{"title":"Identity Providers","permalink":"/docs/mlops/mlops/auth/keycloak/identity-providers"}}');var c=l(74848),i=l(28453);const d={id:"openid-connect",title:"Keycloak OpenID Connect",sidebar_label:"OpenID Connect",description:"Keycloak OpenID Connect",keywords:["keycloak","openid","connect"]},r=void 0,o={},t=[{value:"Keycloak \uc124\uc815",id:"keycloak-\uc124\uc815",level:2},{value:"Client \uc0dd\uc131",id:"client-\uc0dd\uc131",level:3},{value:"groups clinet scope \uc0dd\uc131",id:"groups-clinet-scope-\uc0dd\uc131",level:3},{value:"Access/ID Token \uc124\uc815",id:"accessid-token-\uc124\uc815",level:3},{value:"Test",id:"test",level:3},{value:"\ud074\ub77c\uc774\uc5b8\ud2b8 \uc5f0\uacb0",id:"\ud074\ub77c\uc774\uc5b8\ud2b8-\uc5f0\uacb0",level:2},{value:"\uae30\ubcf8 IDP\ub85c \ub9ac\ub2e4\uc774\ub809\ud2b8",id:"\uae30\ubcf8-idp\ub85c-\ub9ac\ub2e4\uc774\ub809\ud2b8",level:3}];function h(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h2,{id:"keycloak-\uc124\uc815",children:"Keycloak \uc124\uc815"}),"\n",(0,c.jsx)(n.h3,{id:"client-\uc0dd\uc131",children:"Client \uc0dd\uc131"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Clients \ud0ed","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"Create Client"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["General Settings","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Client type: ",(0,c.jsx)(n.code,{children:"OpenID Connect"})]}),"\n",(0,c.jsxs)(n.li,{children:["Client ID: ",(0,c.jsx)(n.code,{children:"<clientID>"})]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["Capability config","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Client authenticatoion: ",(0,c.jsx)(n.code,{children:"On"})," (",(0,c.jsx)(n.code,{children:"secret"})," or ",(0,c.jsx)(n.code,{children:"jwt"})," or ",(0,c.jsx)(n.code,{children:"secret-jwt"})," \uc911 \ud558\ub098\ub85c \ud074\ub77c\uc774\uc5b8\ud2b8 \uc778\uc99d\uc744 \uc218\ud589\ud558\ub294 \uae30\ub2a5)"]}),"\n",(0,c.jsxs)(n.li,{children:["Authorization: ",(0,c.jsx)(n.code,{children:"Off"})," (keycloak\uc758 \uc815\ucc45\uc744 \ud1b5\ud574 \uc811\uadfc \uc81c\uc5b4\ub97c \uc218\ud589\ud558\ub294 \uae30\ub2a5)"]}),"\n",(0,c.jsxs)(n.li,{children:["Authentication flow","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"Standard flow"})}),"\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"Direct access grants"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"<clientID>"})," \uc120\ud0dd","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Settings","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Enabled: ",(0,c.jsx)(n.code,{children:"On"})]}),"\n",(0,c.jsxs)(n.li,{children:["Valid Redirect URIs","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.code,{children:"https://*"})}),"\n",(0,c.jsx)(n.li,{children:"\uac00\ub2a5\ud55c \uc881\uc740 \ubc94\uc704\ub85c \uc124\uc815\ud558\ub294 \uac83\uc774 \uc88b\uc2b5\ub2c8\ub2e4"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["Credentials","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Client Authenticator: ",(0,c.jsx)(n.code,{children:"Client ID and Secret"})]}),"\n",(0,c.jsxs)(n.li,{children:["Client Secret: ",(0,c.jsx)(n.code,{children:"<clientSecret>"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"groups-clinet-scope-\uc0dd\uc131",children:"groups clinet scope \uc0dd\uc131"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Client Scopes \ud0ed","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"Create client scope"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Name: ",(0,c.jsx)(n.code,{children:"groups"})]}),"\n",(0,c.jsxs)(n.li,{children:["Protocol: ",(0,c.jsx)(n.code,{children:"OpenID Connect"})]}),"\n",(0,c.jsxs)(n.li,{children:["Include in token scope: ",(0,c.jsx)(n.code,{children:"On"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"JWT scope\uc5d0 groups\uac00 \ucd94\uac00\ub429\ub2c8\ub2e4."}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"groups"})," \uc120\ud0dd","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Mappers","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"Configure a new mapper"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"Group Membership"})," \uc120\ud0dd","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Name: ",(0,c.jsx)(n.code,{children:"groups"})]}),"\n",(0,c.jsxs)(n.li,{children:["Token Claim Name: ",(0,c.jsx)(n.code,{children:"groups"})]}),"\n",(0,c.jsxs)(n.li,{children:["Full group path: ",(0,c.jsx)(n.code,{children:"Off"})]}),"\n",(0,c.jsxs)(n.li,{children:["Add to ID token: ",(0,c.jsx)(n.code,{children:"On"})]}),"\n",(0,c.jsxs)(n.li,{children:["Add to access token: ",(0,c.jsx)(n.code,{children:"On"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"accessid-token-\uc124\uc815",children:"Access/ID Token \uc124\uc815"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Clients \ud0ed","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"<clientID>"})," \uc120\ud0dd","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Client Scopes","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"<clientID>-dedicated"})," \uc120\ud0dd","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"\ud574\ub2f9 \ud074\ub77c\uc774\uc5b8\ud2b8 \uc804\uc6a9 \uc124\uc815\uc785\ub2c8\ub2e4."}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"Configure a new mapper"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"Audience"})," \uc120\ud0dd","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Name: ",(0,c.jsx)(n.code,{children:"audience"})]}),"\n",(0,c.jsxs)(n.li,{children:["Included Client Audience: ",(0,c.jsx)(n.code,{children:"<clientID>"})]}),"\n",(0,c.jsxs)(n.li,{children:["Add to ID token: ",(0,c.jsx)(n.code,{children:"On"})]}),"\n",(0,c.jsxs)(n.li,{children:["Add to access token: ",(0,c.jsx)(n.code,{children:"On"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"Add client scope"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"groups"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"Add"}),": ",(0,c.jsx)(n.code,{children:"Default"})]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"email"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"Default"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"test",children:"Test"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:(0,c.jsx)(n.a,{href:"https://www.keycloak.org/docs/latest/server_development/#examples-of-using-curl",children:"https://www.keycloak.org/docs/latest/server_development/#examples-of-using-curl"})}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-shell",children:'curl -k -X POST <keycloakURL>/realms/<realm>/protocol/openid-connect/token \\\n    -H "Content-Type: application/x-www-form-urlencoded" \\\n    -d "client_id=<clientID>" \\\n    -d "client_secret=<clientSecret>" \\\n    -d "scope=openid" \\\n    -d "grant_type=password" \\\n    -d "username=<user>" \\\n    -d "password=<password>" \\\n    -d "totp=<otp>" \\\n| jq \'.\'\n'})}),"\n",(0,c.jsxs)(n.p,{children:["\ud14c\uc2a4\ud2b8\ub97c \ud1b5\ud574 \ud1a0\ud070\uc744 \ud68d\ub4dd\ud55c \ud6c4, \uc5b4\ub5a4 \uc815\ubcf4\uac00 \ub4e4\uc5b4\uc788\ub294\uc9c0 ",(0,c.jsx)(n.a,{href:"https://jwt.io/",children:"https://jwt.io/"})," \uc5d0\uc11c \ud655\uc778\ud574\ubcf4\ub294 \uac83\uc774 \uc88b\uc2b5\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(n.h2,{id:"\ud074\ub77c\uc774\uc5b8\ud2b8-\uc5f0\uacb0",children:"\ud074\ub77c\uc774\uc5b8\ud2b8 \uc5f0\uacb0"}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:["Issuer URL: ",(0,c.jsx)(n.code,{children:"<keycloakURL>/realms/<realm>"})]}),"\n",(0,c.jsxs)(n.li,{children:["Client ID: ",(0,c.jsx)(n.code,{children:"<clientID>"})]}),"\n",(0,c.jsxs)(n.li,{children:["Client Secret: ",(0,c.jsx)(n.code,{children:"<clientSecret>"})]}),"\n",(0,c.jsxs)(n.li,{children:["Username claim","\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsxs)(n.li,{children:[(0,c.jsx)(n.code,{children:"email"}),"\uc774 \ub9ce\uc774 \uc0ac\uc6a9\ub429\ub2c8\ub2e4."]}),"\n",(0,c.jsxs)(n.li,{children:["email\uc744 \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 ",(0,c.jsx)(n.code,{children:"email_verified"}),"\ub97c \ud655\uc778\ud558\ub294 \uc560\ud50c\ub9ac\ucf00\uc774\uc158\uc774 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(n.li,{children:["Groups claim: ",(0,c.jsx)(n.code,{children:"groups"}),"\uac00 \ub9ce\uc774 \uc0ac\uc6a9\ub429\ub2c8\ub2e4."]}),"\n"]}),"\n",(0,c.jsx)(n.h3,{id:"\uae30\ubcf8-idp\ub85c-\ub9ac\ub2e4\uc774\ub809\ud2b8",children:"\uae30\ubcf8 IDP\ub85c \ub9ac\ub2e4\uc774\ub809\ud2b8"}),"\n",(0,c.jsx)(n.p,{children:"\uae30\ubcf8\uc801\uc73c\ub85c \ub85c\uadf8\uc778 \ud398\uc774\uc9c0\uc5d0 Keycloak\uc73c\ub85c \ub85c\uadf8\uc778\ud558\uae30 \ubc84\ud2bc\uc744 \ub204\ub974\uba74 Keycloak \ub85c\uadf8\uc778 \ud398\uc774\uc9c0\ub85c \uc774\ub3d9\ud558\uc9c0\ub9cc, Keycloak\uc5d0\uc11c IDP\ub9cc \uc0ac\uc6a9\ud558\ub294 \uacbd\uc6b0 \ub85c\uadf8\uc778 \ud398\uc774\uc9c0\ub97c \uc0dd\ub7b5\ud558\uace0 IDP\ub85c \ubc14\ub85c \ub9ac\ub2e4\uc774\ub809\ud2b8\ub418\ub294 \uac83\uc774 \ud3b8\ud55c \uc0c1\ud669\uc774 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,c.jsxs)(n.p,{children:["Keycloak\uc758 Authorization Endpoint\ub294 ",(0,c.jsx)(n.code,{children:"<keycloakURL>/realms/<realm>/protocol/openid-connect/auth"})," \uc778\ub370, \ucffc\ub9ac\uc5d0 ",(0,c.jsx)(n.code,{children:"kc_idp_hint=<provider>"}),"\ub97c \ucd94\uac00\ud558\uba74 \ub85c\uadf8\uc778 \ud398\uc774\uc9c0\ub97c \uc0dd\ub7b5\ud558\uace0 IDP\ub85c \ubc14\ub85c \ub9ac\ub2e4\uc774\ub809\ud2b8\ub429\ub2c8\ub2e4."]})]})}function x(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(h,{...e})}):h(e)}}}]);