"use strict";(self.webpackChunkwiki_loliot_net=self.webpackChunkwiki_loliot_net||[]).push([[41551],{11785:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"mlops/monitoring/prometheus/kube-state-metrics","title":"kube-state-metrics","description":"kube-state-metrics","source":"@site/docs/mlops/monitoring/prometheus/kube-state-metrics.mdx","sourceDirName":"mlops/monitoring/prometheus","slug":"/mlops/monitoring/prometheus/kube-state-metrics","permalink":"/docs/mlops/monitoring/prometheus/kube-state-metrics","draft":false,"unlisted":false,"editUrl":"https://github.com/hhk7734/wiki/tree/main/docs/mlops/monitoring/prometheus/kube-state-metrics.mdx","tags":[],"version":"current","lastUpdatedAt":1734103299000,"frontMatter":{"id":"kube-state-metrics","title":"kube-state-metrics","sidebar_label":"kube-state-metrics","description":"kube-state-metrics","keywords":["kube-state-metrics"]},"sidebar":"monitoring","previous":{"title":"Custom Exporter \ub9cc\ub4e4\uae30","permalink":"/docs/mlops/monitoring/prometheus/custom-exporter"},"next":{"title":"node-exporter","permalink":"/docs/mlops/monitoring/prometheus/node-exporter"}}');var r=s(74848),i=s(28453);const o={id:"kube-state-metrics",title:"kube-state-metrics",sidebar_label:"kube-state-metrics",description:"kube-state-metrics",keywords:["kube-state-metrics"]},a=void 0,l={},c=[{value:"kube-state-metrics",id:"kube-state-metrics",level:2},{value:"\uc124\uce58",id:"\uc124\uce58",level:2},{value:"Helm",id:"helm",level:3},{value:"kube-prometheus-stack",id:"kube-prometheus-stack",level:3},{value:"Metrics",id:"metrics",level:2}];function m(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"kube-state-metrics",children:"kube-state-metrics"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://github.com/kubernetes/kube-state-metrics",children:"https://github.com/kubernetes/kube-state-metrics"})}),"\n"]}),"\n",(0,r.jsx)(t.p,{children:"Kubernetes API\ub97c \uc0ac\uc6a9\ud558\uc5ec Deployment, Node, Pod \ub4f1\uacfc \uac19\uc740 \uac1d\uccb4\uc758 \uc0c1\ud0dc\ub97c \uc218\uc9d1\ud558\ub294 \uc11c\ube44\uc2a4\uc785\ub2c8\ub2e4."}),"\n",(0,r.jsx)(t.h2,{id:"\uc124\uce58",children:"\uc124\uce58"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-state-metrics",children:"https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-state-metrics"})}),"\n"]}),"\n",(0,r.jsx)(t.h3,{id:"helm",children:"Helm"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"helm repo add prometheus-community https://prometheus-community.github.io/helm-charts\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"helm repo update prometheus-community \\\n&& helm search repo prometheus-community/kube-state-metrics -l | head -n 10\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"helm pull prometheus-community/kube-state-metrics --version 5.16.4\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"helm show values prometheus-community/kube-state-metrics \\\n    --version 5.16.4 \\\n    > kube-state-metrics-5.16.4.yaml\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'title="kube-state-metrics-values.yaml"',children:"prometheus:\n  monitor:\n    # ServiceMonitor\n    enabled: true\n\n    additionalLabels: {}\n\naffinity: {}\n\ntolerations: []\n\ncollectors:\n  - certificatesigningrequests\n  - configmaps\n  - cronjobs\n  - daemonsets\n  - deployments\n  - endpoints\n  - horizontalpodautoscalers\n  - ingresses\n  - jobs\n  - leases\n  - limitranges\n  - mutatingwebhookconfigurations\n  - namespaces\n  - networkpolicies\n  - nodes\n  - persistentvolumeclaims\n  - persistentvolumes\n  - poddisruptionbudgets\n  - pods\n  - replicasets\n  - replicationcontrollers\n  - resourcequotas\n  - secrets\n  - services\n  - statefulsets\n  - storageclasses\n  - validatingwebhookconfigurations\n  - volumeattachments\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"helm template kube-state-metrics kube-state-metrics-5.16.4.tgz \\\n    -n monitoring \\\n    -f kube-state-metrics-values.yaml \\\n    > kube-state-metrics.yaml\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-shell",children:"helm upgrade kube-state-metrics kube-state-metrics-5.16.4.tgz \\\n    --install \\\n    --history-max 5 \\\n    -n monitoring \\\n    -f kube-state-metrics-values.yaml\n"})}),"\n",(0,r.jsx)(t.h3,{id:"kube-prometheus-stack",children:"kube-prometheus-stack"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yaml",metastring:'title="kube-prometheus-stack-values.yaml"',children:"kubeStateMetrics:\n  enabled: true\n\n# Helm kube-state-metrics-values.yaml\uc744 \ucc38\uace0\ud558\uc5ec \uc791\uc131\ud558\uba74 \ub429\ub2c8\ub2e4.\nkube-state-metrics: {}\n"})}),"\n",(0,r.jsx)(t.h2,{id:"metrics",children:"Metrics"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.a,{href:"https://github.com/kubernetes/kube-state-metrics/tree/master/docs",children:"https://github.com/kubernetes/kube-state-metrics/tree/master/docs"})}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}},28453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>a});var n=s(96540);const r={},i=n.createContext(r);function o(e){const t=n.useContext(i);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);